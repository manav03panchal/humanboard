<!-- Source: https://deepwiki.com/zed-industries/zed/8.1-git-panel-and-ui -->

# 8.1 Git Panel And Ui

Loading...

Index your code with Devin

[DeepWiki](</>)

[DeepWiki](</>)

[zed-industries/zed ](<https://github.com/zed-industries/zed> "Open repository")

Index your code with

Devin

Edit WikiShare

Loading...

Last indexed: 16 December 2025 ([4109c9](<https://github.com/zed-industries/zed/commits/4109c9dd>))

  * [Overview](</zed-industries/zed/1-overview>)
  * [Core Architecture](</zed-industries/zed/2-core-architecture>)
  * [Application Initialization and Lifecycle](</zed-industries/zed/2.1-application-initialization-and-lifecycle>)
  * [GPUI Framework](</zed-industries/zed/2.2-gpui-framework>)
  * [Window and Platform Abstraction](</zed-industries/zed/2.3-window-and-platform-abstraction>)
  * [Event Flow and Input Handling](</zed-industries/zed/2.4-event-flow-and-input-handling>)
  * [Keybinding and Action System](</zed-industries/zed/2.5-keybinding-and-action-system>)
  * [Focus Management and Hit Testing](</zed-industries/zed/2.6-focus-management-and-hit-testing>)
  * [Editor Architecture](</zed-industries/zed/3-editor-architecture>)
  * [Editor Component and UI](</zed-industries/zed/3.1-editor-component-and-ui>)
  * [Buffer System and Text Storage](</zed-industries/zed/3.2-buffer-system-and-text-storage>)
  * [Display Pipeline and Rendering](</zed-industries/zed/3.3-display-pipeline-and-rendering>)
  * [Selections and Editing Operations](</zed-industries/zed/3.4-selections-and-editing-operations>)
  * [Code Intelligence Integration](</zed-industries/zed/3.5-code-intelligence-integration>)
  * [Diff Integration](</zed-industries/zed/3.6-diff-integration>)
  * [Workspace and Panel System](</zed-industries/zed/4-workspace-and-panel-system>)
  * [Workspace Organization](</zed-industries/zed/4.1-workspace-organization>)
  * [Item System and Lifecycle](</zed-industries/zed/4.2-item-system-and-lifecycle>)
  * [Pane Management](</zed-industries/zed/4.3-pane-management>)
  * [Search System](</zed-industries/zed/4.4-search-system>)
  * [Project Management](</zed-industries/zed/5-project-management>)
  * [Project Orchestration](</zed-industries/zed/5.1-project-orchestration>)
  * [Worktree and File System](</zed-industries/zed/5.2-worktree-and-file-system>)
  * [Buffer Store](</zed-industries/zed/5.3-buffer-store>)
  * [Language Intelligence](</zed-industries/zed/6-language-intelligence>)
  * [LSP Store Architecture](</zed-industries/zed/6.1-lsp-store-architecture>)
  * [Language Server Lifecycle](</zed-industries/zed/6.2-language-server-lifecycle>)
  * [Completions and Diagnostics](</zed-industries/zed/6.3-completions-and-diagnostics>)
  * [Multi-Language Server Coordination](</zed-industries/zed/6.4-multi-language-server-coordination>)
  * [Settings and Configuration](</zed-industries/zed/7-settings-and-configuration>)
  * [Settings Store and Layering](</zed-industries/zed/7.1-settings-store-and-layering>)
  * [Settings UI](</zed-industries/zed/7.2-settings-ui>)
  * [Settings Migration](</zed-industries/zed/7.3-settings-migration>)
  * [Keymap System](</zed-industries/zed/7.4-keymap-system>)
  * [Git Integration](</zed-industries/zed/8-git-integration>)
  * [Git Panel and UI](</zed-industries/zed/8.1-git-panel-and-ui>)
  * [Git Store and State Management](</zed-industries/zed/8.2-git-store-and-state-management>)
  * [Repository Operations](</zed-industries/zed/8.3-repository-operations>)
  * [Diff System](</zed-industries/zed/8.4-diff-system>)
  * [Terminal and Task Execution](</zed-industries/zed/9-terminal-and-task-execution>)
  * [Terminal Core](</zed-industries/zed/9.1-terminal-core>)
  * [Terminal View and Rendering](</zed-industries/zed/9.2-terminal-view-and-rendering>)
  * [Task System](</zed-industries/zed/9.3-task-system>)
  * [Vim Mode](</zed-industries/zed/10-vim-mode>)
  * [Mode State Machine](</zed-industries/zed/10.1-mode-state-machine>)
  * [Operators, Motions, and Objects](</zed-industries/zed/10.2-operators-motions-and-objects>)
  * [Visual Mode](</zed-industries/zed/10.3-visual-mode>)
  * [Helix Mode Integration](</zed-industries/zed/10.4-helix-mode-integration>)
  * [AI Agent System](</zed-industries/zed/11-ai-agent-system>)
  * [Agent Communication Protocol (ACP)](</zed-industries/zed/11.1-agent-communication-protocol-\(acp\)>)
  * [Agent UI and Thread Management](</zed-industries/zed/11.2-agent-ui-and-thread-management>)
  * [Agent Connection and Implementations](</zed-industries/zed/11.3-agent-connection-and-implementations>)
  * [Tool System](</zed-industries/zed/11.4-tool-system>)
  * [Mention System and Context](</zed-industries/zed/11.5-mention-system-and-context>)
  * [Legacy Agent Thread System](</zed-industries/zed/11.6-legacy-agent-thread-system>)
  * [Remote Development and Collaboration](</zed-industries/zed/12-remote-development-and-collaboration>)
  * [Local vs Remote Architecture](</zed-industries/zed/12.1-local-vs-remote-architecture>)
  * [Remote Project Architecture](</zed-industries/zed/12.2-remote-project-architecture>)
  * [Collaboration Features](</zed-industries/zed/12.3-collaboration-features>)
  * [CRDT and Synchronization](</zed-industries/zed/12.4-crdt-and-synchronization>)


Menu

# Git Panel and UI

Relevant source files

  * [crates/collab/src/rpc.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/collab/src/rpc.rs>)
  * [crates/fs/src/fake_git_repo.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/fs/src/fake_git_repo.rs>)
  * [crates/git/src/git.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git/src/git.rs>)
  * [crates/git/src/repository.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git/src/repository.rs>)
  * [crates/git_ui/Cargo.toml](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/Cargo.toml>)
  * [crates/git_ui/src/branch_picker.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/branch_picker.rs>)
  * [crates/git_ui/src/commit_modal.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/commit_modal.rs>)
  * [crates/git_ui/src/git_panel.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs>)
  * [crates/git_ui/src/git_ui.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_ui.rs>)
  * [crates/git_ui/src/project_diff.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/project_diff.rs>)
  * [crates/project/src/git_store.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/git_store.rs>)
  * [crates/proto/proto/git.proto](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/proto/proto/git.proto>)
  * [crates/proto/proto/zed.proto](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/proto/proto/zed.proto>)
  * [crates/proto/src/proto.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/proto/src/proto.rs>)


This document describes the Git Panel and UI system in Zed, which provides a visual interface for managing git operations. The Git Panel displays repository status, allows staging/unstaging changes, creating commits, and performing remote operations. For information about the underlying git repository state management, see [GitStore and State Management](</zed-industries/zed/8.2-git-store-and-state-management>). For details on git operations like commit, push, and pull, see [Repository Operations](</zed-industries/zed/8.3-repository-operations>).

## Overview

The Git UI system consists of several interconnected components that provide a comprehensive interface for git operations:


**Sources:** [crates/git_ui/src/git_panel.rs1-100](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L1-L100>) [crates/git_ui/src/git_ui.rs1-60](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_ui.rs#L1-L60>) [crates/project/src/git_store.rs89-102](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/git_store.rs#L89-L102>)

## GitPanel Structure

The `GitPanel` is the primary UI component for git operations, implemented as a workspace panel that displays repository status and provides interactive controls.

### Core State and Data Structures


**Sources:** [crates/git_ui/src/git_panel.rs560-601](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L560-L601>)

The `GitPanel` struct contains several categories of state:

State Category| Fields| Purpose  
---|---|---  
**View Configuration**| `view_mode`, `show_placeholders`| Controls whether entries are displayed in flat or tree view  
**Entry Data**| `entries`, `entries_indices`, `entry_count`| Stores the list of git status entries and their indices  
**Selection**| `selected_entry`, `marked_entries`, `bulk_staging`| Tracks user selection and bulk operations  
**Commit UI**| `commit_editor`, `amend_pending`, `signoff_enabled`, `original_commit_message`| Manages commit message editing and options  
**Repository**| `active_repository`, tracked/new/conflicted counts| References the active git repository and summary statistics  
**UI State**| `focus_handle`, `scroll_handle`, `width`, `context_menu`, `modal_open`| Panel focus, scrolling, and UI interaction state  
  
**Sources:** [crates/git_ui/src/git_panel.rs560-601](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L560-L601>)

### Entry Types and Classification

The Git Panel displays git status information through a hierarchy of entry types:


**Sources:** [crates/git_ui/src/git_panel.rs228-277](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L228-L277>) [crates/git_ui/src/git_panel.rs446-480](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L446-L480>)

Entries are organized into three sections:

  1. **Conflict Section** \- Files with merge conflicts [crates/git_ui/src/git_panel.rs230-232](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L230-L232>)
  2. **Tracked Section** \- Modified or deleted tracked files [crates/git_ui/src/git_panel.rs231](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L231-L231>)
  3. **New Section** \- Untracked files [crates/git_ui/src/git_panel.rs232](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L232-L232>)


Each `GitStatusEntry` contains:

  * `repo_path` \- Path relative to repository root [crates/git_ui/src/git_panel.rs477](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L477-L477>)
  * `status` \- `FileStatus` indicating the type of change [crates/git_ui/src/git_panel.rs478](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L478-L478>)
  * `staging` \- `StageStatus` tracking whether changes are staged [crates/git_ui/src/git_panel.rs479](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L479-L479>)


**Sources:** [crates/git_ui/src/git_panel.rs228-277](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L228-L277>) [crates/git_ui/src/git_panel.rs475-495](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L475-L495>)

### View Modes

The Git Panel supports two view modes for displaying entries:

#### Flat View Mode

In flat view, entries are displayed as a simple list, optionally sorted by path or by status:


**Sources:** [crates/git_ui/src/git_panel.rs279-306](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L279-L306>) [crates/git_ui/src/git_panel.rs1411-1542](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L1411-L1542>)

#### Tree View Mode

Tree view organizes entries by directory structure with collapsible folders:


The `TreeViewState` maintains:

  * `logical_indices` \- Maps visible entry indices to actual entry indices (accounts for collapsed directories) [crates/git_ui/src/git_panel.rs313](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L313-L313>)
  * `expanded_dirs` \- Tracks which directories are expanded [crates/git_ui/src/git_panel.rs314](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L314-L314>)
  * `directory_descendants` \- Caches descendant entries for each directory [crates/git_ui/src/git_panel.rs315](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L315-L315>)


The tree building process [crates/git_ui/src/git_panel.rs319-443](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L319-L443>):

  1. `build_tree_entries()` \- Constructs tree structure from flat status entries
  2. `flatten_tree()` \- Converts tree to flat list respecting expansion state
  3. `compact_directory_chain()` \- Collapses single-child directory chains (e.g., `a/b/c` → `a/b/c`)


**Sources:** [crates/git_ui/src/git_panel.rs308-444](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L308-L444>)

### Entry Rendering and Interactions

Each entry type renders differently and supports different interactions:

Entry Type| Visual Representation| Key Interactions  
---|---|---  
**Header**|  Section label (Conflicts/Tracked/Untracked)| Click to select section  
**Directory**|  Folder icon + path with indent| Click to expand/collapse  
**TreeStatus**|  Git status icon + filename with indent| Click to select, stage/unstage  
**Status**|  Git status icon + full path| Click to select, stage/unstage, open diff  
  
**Sources:** [crates/git_ui/src/git_panel.rs1850-2130](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L1850-L2130>)

The rendering methods include:

  * `render_entry()` \- Main entry rendering dispatcher [crates/git_ui/src/git_panel.rs1895-1930](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L1895-L1930>)
  * `render_status_entry()` \- Renders individual file entries [crates/git_ui/src/git_panel.rs1932-2059](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L1932-L2059>)
  * `render_directory()` \- Renders directory entries in tree view [crates/git_ui/src/git_panel.rs2067-2130](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L2067-L2130>)
  * `render_header()` \- Renders section headers [crates/git_ui/src/git_panel.rs2132-2165](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L2132-L2165>)


**Sources:** [crates/git_ui/src/git_panel.rs1850-2165](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L1850-L2165>)

### Update and Refresh Flow

The Git Panel updates its display when repository status changes:


**Sources:** [crates/git_ui/src/git_panel.rs691-728](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L691-L728>) [crates/git_ui/src/git_panel.rs1282-1408](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L1282-L1408>)

The update process:

  1. `schedule_update()` \- Debounces updates to avoid excessive rebuilds [crates/git_ui/src/git_panel.rs1282-1296](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L1282-L1296>)
  2. `update_visible_entries()` \- Rebuilds entry list from repository status [crates/git_ui/src/git_panel.rs1298-1408](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L1298-L1408>)
  3. Entry list construction varies by view mode: 
     * Flat view: `update_entries_for_flat_view()` [crates/git_ui/src/git_panel.rs1411-1542](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L1411-L1542>)
     * Tree view: Uses `TreeViewState::build_tree_entries()` [crates/git_ui/src/git_panel.rs1544-1646](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L1544-L1646>)


**Sources:** [crates/git_ui/src/git_panel.rs1282-1646](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L1282-L1646>)

## Staging and Unstaging Operations

The Git Panel provides multiple ways to stage and unstage changes:

### Individual Entry Operations


**Sources:** [crates/git_ui/src/git_panel.rs2252-2448](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L2252-L2448>)

The staging operations support several modes:

  1. **Toggle Staged** (`ToggleStaged` action) [crates/git_ui/src/git_panel.rs2252-2320](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L2252-L2320>):

     * If file is unstaged → stage it
     * If file is staged → unstage it
     * Works on selected entry or all marked entries
  2. **Stage and Next** (`StageAndNext` action) [crates/git_ui/src/git_panel.rs2328-2348](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L2328-L2348>):

     * Stages the current entry
     * Moves selection to next entry
     * Useful for keyboard-driven workflows
  3. **Unstage and Next** (`UnstageAndNext` action) [crates/git_ui/src/git_panel.rs2350-2370](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L2350-L2370>):

     * Unstages the current entry
     * Moves selection to next entry
  4. **Bulk Staging** \- When staging directory in tree view [crates/git_ui/src/git_panel.rs2396-2448](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L2396-L2448>):

     * First stage/unstage initiates bulk operation
     * Subsequent stages in same directory are batched
     * Reduces git index writes


**Sources:** [crates/git_ui/src/git_panel.rs2252-2448](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L2252-L2448>)

### Repository-Wide Operations


**Sources:** [crates/git_ui/src/git_panel.rs2475-2696](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L2475-L2696>)

Repository-wide operations:

  * `stage_all()` \- Stages all unstaged changes [crates/git_ui/src/git_panel.rs2475-2504](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L2475-L2504>)
  * `unstage_all()` \- Unstages all staged changes [crates/git_ui/src/git_panel.rs2506-2535](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L2506-L2535>)
  * `restore_tracked_files()` \- Discards all modifications to tracked files [crates/git_ui/src/git_panel.rs2537-2625](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L2537-L2625>)
  * `trash_untracked_files()` \- Moves untracked files to trash [crates/git_ui/src/git_panel.rs2627-2696](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L2627-L2696>)


**Sources:** [crates/git_ui/src/git_panel.rs2475-2696](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L2475-L2696>)

## Commit UI

The commit UI consists of two components: an inline editor in the Git Panel and a modal for expanded editing.

### Commit Message Editor


**Sources:** [crates/git_ui/src/git_panel.rs611-640](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L611-L640>) [crates/git_ui/src/commit_modal.rs172-194](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/commit_modal.rs#L172-L194>)

The `commit_message_editor()` function [crates/git_ui/src/git_panel.rs611-640](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L611-L640>) creates an editor configured for commit messages:

  * Uses `EditorMode::AutoHeight` with min/max line constraints
  * Sets placeholder text "Enter commit message"
  * Disables gutter, wrap guides, and indent guides for clean appearance
  * Enables modal editing (Vim mode if active)
  * Sets collaboration hub to project for co-authoring


**Sources:** [crates/git_ui/src/git_panel.rs611-640](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L611-L640>)

### Commit Modal

The `CommitModal` provides an expanded view for writing commit messages:


**Sources:** [crates/git_ui/src/commit_modal.rs61-227](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/commit_modal.rs#L61-L227>)

The modal lifecycle:

  1. **Opening** (`CommitModal::toggle()`) [crates/git_ui/src/commit_modal.rs120-170](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/commit_modal.rs#L120-L170>):

     * Stores current dock state for restoration
     * Opens git panel if needed
     * Creates modal with commit editor synced to panel editor
  2. **Committing** [crates/git_ui/src/git_panel.rs2916-3108](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L2916-L3108>):

     * Validates commit message not empty
     * Gathers commit options (amend, signoff)
     * Calls `Repository::commit()` with message and options
     * Updates panel state on success/failure
  3. **Dismissal** (`on_before_dismiss()`) [crates/git_ui/src/commit_modal.rs78-96](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/commit_modal.rs#L78-L96>):

     * Restores dock state (open/closed, active panel)
     * Notifies GitPanel that modal is closed


**Sources:** [crates/git_ui/src/commit_modal.rs61-227](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/commit_modal.rs#L61-L227>) [crates/git_ui/src/git_panel.rs2916-3108](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L2916-L3108>)

### Commit Options


**Sources:** [crates/git_ui/src/git_panel.rs3175-3272](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L3175-L3272>)

Commit options include:

  * **Amend** [crates/git_ui/src/git_panel.rs3175-3213](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L3175-L3213>):

    * Modifies the last commit instead of creating new one
    * Loads previous commit message when enabled
    * Stores original message for restoration if cancelled
  * **Signoff** [crates/git_ui/src/git_panel.rs3214-3224](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L3214-L3224>):

    * Adds "Signed-off-by: Name " line to commit message
    * Uses configured git user name and email
  * **Co-authors** [crates/git_ui/src/git_panel.rs3251-3272](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L3251-L3272>):

    * Automatically suggests co-authors based on git blame
    * Adds "Co-authored-by:" lines to commit message


**Sources:** [crates/git_ui/src/git_panel.rs3175-3272](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L3175-L3272>)

## Project Diff View

The `ProjectDiff` component displays a multi-buffer diff view of all changed files in the project:


**Sources:** [crates/git_ui/src/project_diff.rs64-336](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/project_diff.rs#L64-L336>)

### Diff Base Modes

The `ProjectDiff` supports two diff base modes:

Mode| Description| Use Case  
---|---|---  
`DiffBase::Head`| Diff against HEAD commit| Standard unstaged changes view  
`DiffBase::Merge { base_ref }`| Diff against merge base| Branch diff / PR-style view  
  
**Sources:** [crates/project/src/git_store/branch_diff.rs1-50](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/git_store/branch_diff.rs#L1-L50>)

### Multi-Buffer Construction


**Sources:** [crates/git_ui/src/project_diff.rs611-701](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/project_diff.rs#L611-L701>)

The refresh process [crates/git_ui/src/project_diff.rs611-701](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/project_diff.rs#L611-L701>):

  1. Queries `BranchDiff` for changed file list
  2. For each changed file: 
     * Opens or retrieves buffer
     * Gets or creates `BufferDiff` for the file
     * Registers buffer with subscriptions via `register_buffer()` [crates/git_ui/src/project_diff.rs500-609](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/project_diff.rs#L500-L609>)
     * Adds excerpts to `MultiBuffer` for diff hunks or conflicts
  3. Sorts files by status (conflicts first, then tracked, then new)
  4. Collapses untracked files if configured


**Sources:** [crates/git_ui/src/project_diff.rs500-701](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/project_diff.rs#L500-L701>)

### Integration with Git Panel

The `ProjectDiff` integrates with `GitPanel` for navigation:


**Sources:** [crates/git_ui/src/project_diff.rs343-397](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/project_diff.rs#L343-L397>) [crates/git_ui/src/project_diff.rs463-497](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/project_diff.rs#L463-L497>) [crates/git_ui/src/git_panel.rs1010-1038](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L1010-L1038>)

The integration works bidirectionally:

  * **Panel → Diff** : When user opens diff from panel via `Confirm` action [crates/git_ui/src/git_panel.rs1010-1038](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L1010-L1038>) `ProjectDiff::deploy_at()` is called with the selected entry
  * **Diff → Panel** : When cursor moves in diff editor, `EditorEvent::SelectionsChanged` triggers `GitPanel::select_entry_by_path()` [crates/git_ui/src/project_diff.rs463-497](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/project_diff.rs#L463-L497>)


**Sources:** [crates/git_ui/src/project_diff.rs343-497](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/project_diff.rs#L343-L497>) [crates/git_ui/src/git_panel.rs1010-1038](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L1010-L1038>)

## Supporting Components

### Branch Picker

The `BranchList` component provides branch selection and management:


**Sources:** [crates/git_ui/src/branch_picker.rs111-243](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/branch_picker.rs#L111-L243>)

Key features:

  * **Branch Operations** [crates/git_ui/src/branch_picker.rs439-602](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/branch_picker.rs#L439-L602>):

    * Switch to branch (creates if doesn't exist)
    * Delete branch (with confirmation)
    * Filter remotes vs local branches
  * **Remote Management** [crates/git_ui/src/branch_picker.rs604-793](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/branch_picker.rs#L604-L793>):

    * Create new remote from URL
    * Delete remote
    * Push to remote
  * **Search and Filter** [crates/git_ui/src/branch_picker.rs795-898](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/branch_picker.rs#L795-L898>):

    * Fuzzy search branches by name
    * Filter by local/remote using `FilterRemotes` action
    * Sort by most recent commit


**Sources:** [crates/git_ui/src/branch_picker.rs111-898](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/branch_picker.rs#L111-L898>)

### Repository Selector

For multi-repository workspaces, the `RepositorySelector` allows switching between repositories:


**Sources:** [crates/git_ui/src/repository_selector.rs1-200](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/repository_selector.rs#L1-L200>)

### Stash Picker

The `StashPicker` displays and manages git stashes:


**Sources:** [crates/git_ui/src/stash_picker.rs1-200](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/stash_picker.rs#L1-L200>)

## Remote Operations

The Git Panel supports push, pull, and fetch operations with authentication handling:

### Push Operation Flow


**Sources:** [crates/git_ui/src/git_panel.rs3471-3623](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L3471-L3623>) [crates/git_ui/src/askpass_modal.rs1-200](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/askpass_modal.rs#L1-L200>)

Push operation features [crates/git_ui/src/git_panel.rs3471-3623](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L3471-L3623>):

  * Detects missing upstream and shows "Publish" button
  * Supports force push with confirmation
  * Shows progress and output via `RemoteOutputToast`
  * Handles authentication via `AskPassModal`


**Sources:** [crates/git_ui/src/git_panel.rs3471-3623](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L3471-L3623>)

### Pull and Fetch Operations


**Sources:** [crates/git_ui/src/git_panel.rs3625-3856](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L3625-L3856>)

Fetch operation [crates/git_ui/src/git_panel.rs3625-3736](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L3625-L3736>):

  * `fetch(true)` \- Fetches from all remotes
  * `fetch(false)` \- Shows remote picker to fetch from specific remote
  * Updates remote tracking branches


Pull operation [crates/git_ui/src/git_panel.rs3738-3856](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L3738-L3856>):

  * `pull(false)` \- Pull with merge (default)
  * `pull(true)` \- Pull with rebase
  * Shows conflicts if merge fails
  * Updates working directory


**Sources:** [crates/git_ui/src/git_panel.rs3625-3856](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L3625-L3856>)

### Authentication Modal

The `AskPassModal` handles git credential requests:


**Sources:** [crates/git_ui/src/askpass_modal.rs1-250](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/askpass_modal.rs#L1-L250>)

The authentication flow:

  1. Git command requires authentication
  2. `AskPassSession` is created with unique ID
  3. Git spawns askpass helper that sends prompt to Zed
  4. `AskPassModal` displays prompt to user
  5. User enters password (encrypted in memory)
  6. Password returned to git via askpass helper
  7. Modal dismissed after git command completes


**Sources:** [crates/git_ui/src/askpass_modal.rs1-250](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/askpass_modal.rs#L1-L250>) [crates/askpass/src/lib.rs1-100](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/askpass/src/lib.rs#L1-L100>)

## Context Menu and Actions

The Git Panel provides a context menu with repository-wide actions:


**Sources:** [crates/git_ui/src/git_panel.rs134-196](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L134-L196>)

The context menu is built dynamically based on repository state [crates/git_ui/src/git_panel.rs134-196](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L134-L196>):


Menu items are conditionally enabled based on `GitMenuState`:

  * `has_unstaged_changes` \- Enables "Stage All"
  * `has_staged_changes` \- Enables "Unstage All"
  * `has_tracked_changes` \- Enables "Discard Tracked Changes"
  * `has_new_changes` \- Enables "Trash Untracked Files"
  * `has_stash_items` \- Enables "Stash Pop"


**Sources:** [crates/git_ui/src/git_panel.rs124-196](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L124-L196>)

## Serialization and Persistence

The Git Panel state is persisted across sessions:


**Sources:** [crates/git_ui/src/git_panel.rs800-848](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L800-L848>)

Serialization implementation [crates/git_ui/src/git_panel.rs808-847](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L808-L847>):

  * Uses `SerializedGitPanel` struct [crates/git_ui/src/git_panel.rs220-226](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L220-L226>)
  * Serialization is throttled by 250ms to avoid excessive writes
  * Stored in `KEY_VALUE_STORE` with workspace-specific key
  * Panel width, amend state, and signoff preference are persisted


**Sources:** [crates/git_ui/src/git_panel.rs219-848](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git_ui/src/git_panel.rs#L219-L848>)

Dismiss

Refresh this wiki

This wiki was recently refreshed. Please wait 7 days to refresh again.

### On this page

  * [Git Panel and UI](<#git-panel-and-ui>)
  * [Overview](<#overview>)
  * [GitPanel Structure](<#gitpanel-structure>)
  * [Core State and Data Structures](<#core-state-and-data-structures>)
  * [Entry Types and Classification](<#entry-types-and-classification>)
  * [View Modes](<#view-modes>)
  * [Flat View Mode](<#flat-view-mode>)
  * [Tree View Mode](<#tree-view-mode>)
  * [Entry Rendering and Interactions](<#entry-rendering-and-interactions>)
  * [Update and Refresh Flow](<#update-and-refresh-flow>)
  * [Staging and Unstaging Operations](<#staging-and-unstaging-operations>)
  * [Individual Entry Operations](<#individual-entry-operations>)
  * [Repository-Wide Operations](<#repository-wide-operations>)
  * [Commit UI](<#commit-ui>)
  * [Commit Message Editor](<#commit-message-editor>)
  * [Commit Modal](<#commit-modal>)
  * [Commit Options](<#commit-options>)
  * [Project Diff View](<#project-diff-view>)
  * [Diff Base Modes](<#diff-base-modes>)
  * [Multi-Buffer Construction](<#multi-buffer-construction>)
  * [Integration with Git Panel](<#integration-with-git-panel>)
  * [Supporting Components](<#supporting-components>)
  * [Branch Picker](<#branch-picker>)
  * [Repository Selector](<#repository-selector>)
  * [Stash Picker](<#stash-picker>)
  * [Remote Operations](<#remote-operations>)
  * [Push Operation Flow](<#push-operation-flow>)
  * [Pull and Fetch Operations](<#pull-and-fetch-operations>)
  * [Authentication Modal](<#authentication-modal>)
  * [Context Menu and Actions](<#context-menu-and-actions>)
  * [Serialization and Persistence](<#serialization-and-persistence>)
