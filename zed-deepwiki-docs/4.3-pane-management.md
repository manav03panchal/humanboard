<!-- Source: https://deepwiki.com/zed-industries/zed/4.3-pane-management -->

# 4.3 Pane Management

Loading...

Index your code with Devin

[DeepWiki](</>)

[DeepWiki](</>)

[zed-industries/zed ](<https://github.com/zed-industries/zed> "Open repository")

Index your code with

Devin

Edit WikiShare

Loading...

Last indexed: 16 December 2025 ([4109c9](<https://github.com/zed-industries/zed/commits/4109c9dd>))

  * [Overview](</zed-industries/zed/1-overview>)
  * [Core Architecture](</zed-industries/zed/2-core-architecture>)
  * [Application Initialization and Lifecycle](</zed-industries/zed/2.1-application-initialization-and-lifecycle>)
  * [GPUI Framework](</zed-industries/zed/2.2-gpui-framework>)
  * [Window and Platform Abstraction](</zed-industries/zed/2.3-window-and-platform-abstraction>)
  * [Event Flow and Input Handling](</zed-industries/zed/2.4-event-flow-and-input-handling>)
  * [Keybinding and Action System](</zed-industries/zed/2.5-keybinding-and-action-system>)
  * [Focus Management and Hit Testing](</zed-industries/zed/2.6-focus-management-and-hit-testing>)
  * [Editor Architecture](</zed-industries/zed/3-editor-architecture>)
  * [Editor Component and UI](</zed-industries/zed/3.1-editor-component-and-ui>)
  * [Buffer System and Text Storage](</zed-industries/zed/3.2-buffer-system-and-text-storage>)
  * [Display Pipeline and Rendering](</zed-industries/zed/3.3-display-pipeline-and-rendering>)
  * [Selections and Editing Operations](</zed-industries/zed/3.4-selections-and-editing-operations>)
  * [Code Intelligence Integration](</zed-industries/zed/3.5-code-intelligence-integration>)
  * [Diff Integration](</zed-industries/zed/3.6-diff-integration>)
  * [Workspace and Panel System](</zed-industries/zed/4-workspace-and-panel-system>)
  * [Workspace Organization](</zed-industries/zed/4.1-workspace-organization>)
  * [Item System and Lifecycle](</zed-industries/zed/4.2-item-system-and-lifecycle>)
  * [Pane Management](</zed-industries/zed/4.3-pane-management>)
  * [Search System](</zed-industries/zed/4.4-search-system>)
  * [Project Management](</zed-industries/zed/5-project-management>)
  * [Project Orchestration](</zed-industries/zed/5.1-project-orchestration>)
  * [Worktree and File System](</zed-industries/zed/5.2-worktree-and-file-system>)
  * [Buffer Store](</zed-industries/zed/5.3-buffer-store>)
  * [Language Intelligence](</zed-industries/zed/6-language-intelligence>)
  * [LSP Store Architecture](</zed-industries/zed/6.1-lsp-store-architecture>)
  * [Language Server Lifecycle](</zed-industries/zed/6.2-language-server-lifecycle>)
  * [Completions and Diagnostics](</zed-industries/zed/6.3-completions-and-diagnostics>)
  * [Multi-Language Server Coordination](</zed-industries/zed/6.4-multi-language-server-coordination>)
  * [Settings and Configuration](</zed-industries/zed/7-settings-and-configuration>)
  * [Settings Store and Layering](</zed-industries/zed/7.1-settings-store-and-layering>)
  * [Settings UI](</zed-industries/zed/7.2-settings-ui>)
  * [Settings Migration](</zed-industries/zed/7.3-settings-migration>)
  * [Keymap System](</zed-industries/zed/7.4-keymap-system>)
  * [Git Integration](</zed-industries/zed/8-git-integration>)
  * [Git Panel and UI](</zed-industries/zed/8.1-git-panel-and-ui>)
  * [Git Store and State Management](</zed-industries/zed/8.2-git-store-and-state-management>)
  * [Repository Operations](</zed-industries/zed/8.3-repository-operations>)
  * [Diff System](</zed-industries/zed/8.4-diff-system>)
  * [Terminal and Task Execution](</zed-industries/zed/9-terminal-and-task-execution>)
  * [Terminal Core](</zed-industries/zed/9.1-terminal-core>)
  * [Terminal View and Rendering](</zed-industries/zed/9.2-terminal-view-and-rendering>)
  * [Task System](</zed-industries/zed/9.3-task-system>)
  * [Vim Mode](</zed-industries/zed/10-vim-mode>)
  * [Mode State Machine](</zed-industries/zed/10.1-mode-state-machine>)
  * [Operators, Motions, and Objects](</zed-industries/zed/10.2-operators-motions-and-objects>)
  * [Visual Mode](</zed-industries/zed/10.3-visual-mode>)
  * [Helix Mode Integration](</zed-industries/zed/10.4-helix-mode-integration>)
  * [AI Agent System](</zed-industries/zed/11-ai-agent-system>)
  * [Agent Communication Protocol (ACP)](</zed-industries/zed/11.1-agent-communication-protocol-\(acp\)>)
  * [Agent UI and Thread Management](</zed-industries/zed/11.2-agent-ui-and-thread-management>)
  * [Agent Connection and Implementations](</zed-industries/zed/11.3-agent-connection-and-implementations>)
  * [Tool System](</zed-industries/zed/11.4-tool-system>)
  * [Mention System and Context](</zed-industries/zed/11.5-mention-system-and-context>)
  * [Legacy Agent Thread System](</zed-industries/zed/11.6-legacy-agent-thread-system>)
  * [Remote Development and Collaboration](</zed-industries/zed/12-remote-development-and-collaboration>)
  * [Local vs Remote Architecture](</zed-industries/zed/12.1-local-vs-remote-architecture>)
  * [Remote Project Architecture](</zed-industries/zed/12.2-remote-project-architecture>)
  * [Collaboration Features](</zed-industries/zed/12.3-collaboration-features>)
  * [CRDT and Synchronization](</zed-industries/zed/12.4-crdt-and-synchronization>)


Menu

# Pane Management

Relevant source files

  * [crates/editor/src/items.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/items.rs>)
  * [crates/language/src/proto.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/proto.rs>)
  * [crates/project/src/search.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/search.rs>)
  * [crates/proto/proto/buffer.proto](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/proto/proto/buffer.proto>)
  * [crates/search/src/buffer_search.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/search/src/buffer_search.rs>)
  * [crates/search/src/project_search.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/search/src/project_search.rs>)
  * [crates/vim/src/normal/search.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/vim/src/normal/search.rs>)
  * [crates/workspace/src/item.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/item.rs>)
  * [crates/workspace/src/pane.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs>)
  * [crates/workspace/src/searchable.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/searchable.rs>)
  * [crates/workspace/src/workspace.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/workspace.rs>)


## Purpose and Scope

This document describes the pane management system in Zed, which handles the organization and lifecycle of items (editors, search results, terminals, etc.) within individual panes. A pane is a container that displays one or more items in a tabbed interface, manages item activation, and handles user interactions like splitting, closing, and navigating between items.

For information about the workspace-level organization of panes into groups and docks, see [Workspace Organization](</zed-industries/zed/4.1-workspace-organization>). For details on the item trait system that all pane contents must implement, see [Item System and Lifecycle](</zed-industries/zed/4.2-item-system-and-lifecycle>).

## Core Architecture

### Pane Entity

The `Pane` struct is the central entity managing a collection of items with tab-based navigation:

Field| Type| Purpose  
---|---|---  
`items`| `Vec<Box<dyn ItemHandle>>`| All items in the pane  
`active_item_index`| `usize`| Index of currently active item  
`activation_history`| `Vec<ActivationHistoryEntry>`| Order items were activated  
`preview_item_id`| `Option<EntityId>`| ID of item in preview mode  
`nav_history`| `NavHistory`| Back/forward navigation state  
`toolbar`| `Entity<Toolbar>`| Associated toolbar  
`pinned_tab_count`| `usize`| Number of pinned tabs  
`focus_handle`| `FocusHandle`| Focus management  
  
**Sources:** [crates/workspace/src/pane.rs343-405](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L343-L405>)


**Sources:** [crates/workspace/src/pane.rs343-405](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L343-L405>)

### Pane Events

Panes emit events to communicate state changes to the workspace:

Event| Description| When Emitted  
---|---|---  
`AddItem`| Item added to pane| After item insertion  
`ActivateItem`| Item became active| On activation  
`Remove`| Pane should be removed| When last item closes and `close_pane_if_empty` is true  
`RemovedItem`| Item was removed| After item closure  
`Split`| Pane should split| User requests split  
`ItemPinned`| Item was pinned| Pin toggle  
`ItemUnpinned`| Item was unpinned| Pin toggle  
`ChangeItemTitle`| Item title changed| Title update  
`UserSavedItem`| User explicitly saved| After save action  
  
**Sources:** [crates/workspace/src/pane.rs266-296](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L266-L296>)

## Item Management

### Adding Items

Items are added to panes through the `add_item` method with control over activation and preview mode:


**Sources:** [crates/workspace/src/pane.rs1039-1188](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L1039-L1188>)

The method signature provides fine-grained control:

  * `activate: bool` \- Whether to immediately activate the item
  * `focus: bool` \- Whether to focus the item's editor
  * `destination_index: Option<usize>` \- Specific position to insert (default: after active)
  * Returns `Option<usize>` \- Index where item was inserted


**Sources:** [crates/workspace/src/pane.rs1039-1043](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L1039-L1043>)

### Preview Tabs

Preview tabs allow temporary item display without committing to a full tab. A preview tab is replaced when opening another preview item:


**Sources:** [crates/workspace/src/pane.rs866-884](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L866-L884>)

Key preview tab fields and methods:

  * `preview_item_id: Option<EntityId>` \- Tracks current preview item
  * `preview_item()` \- Returns the preview item if any
  * `preview_item_idx()` \- Returns preview item index
  * Preview is cleared on edit or explicit open action


**Sources:** [crates/workspace/src/pane.rs866-897](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L866-L897>)

### Item Activation

Activation follows a specific flow to maintain history and focus:


**Sources:** [crates/workspace/src/pane.rs1190-1286](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L1190-L1286>)

The `activate_item` method:

  * Updates `active_item_index`
  * Calls `deactivated()` on the previous item
  * Manages focus transfer
  * Updates activation history with timestamps
  * Scrolls the tab bar to make the tab visible
  * Emits `ActivateItem` event for workspace coordination


**Sources:** [crates/workspace/src/pane.rs1190-1286](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L1190-L1286>)

### Closing Items

Item closure involves cleanup, save prompts, and history management:


**Sources:** [crates/workspace/src/pane.rs1607-1819](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L1607-L1819>)

Closure options via `SaveIntent`:

Intent| Behavior  
---|---  
`Save`| Write all files, prompt on conflict  
`SaveWithoutFormat`| Save without formatting  
`SaveAll`| Write changed files, prompt on conflict  
`SaveAs`| Always prompt for new path  
`Close`| Prompt "unsaved changes" before writing  
`Overwrite`| Write dirty files without prompting  
`Skip`| Skip all save behavior  
  
**Sources:** [crates/workspace/src/pane.rs80-99](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L80-L99>)

## Tab Bar Rendering

### Tab Bar Structure

The tab bar displays tabs for all items with optional navigation buttons:


**Sources:** [crates/workspace/src/pane.rs2281-2528](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L2281-L2528>)

The tab bar rendering is customizable via:

  * `render_tab_bar: Rc<dyn Fn>` \- Custom tab bar rendering function
  * `render_tab_bar_buttons: Rc<dyn Fn>` \- Custom button rendering
  * `should_display_tab_bar: Rc<dyn Fn>` \- Visibility predicate
  * `display_nav_history_buttons: Option<bool>` \- Show back/forward buttons


**Sources:** [crates/workspace/src/pane.rs369-389](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L369-L389>)

### Tab States

Individual tabs can be in different states:

State| Visual Indicator| Condition  
---|---|---  
Active| Highlighted background| `index == active_item_index`  
Preview| Italicized text| `item_id == preview_item_id`  
Pinned| Pin icon| Index < `pinned_tab_count`  
Dirty| Dot indicator| `item.is_dirty()`  
Has Conflict| Warning indicator| `item.has_conflict()`  
Diagnostic Error| Error icon| Diagnostics with errors  
Diagnostic Warning| Warning icon| Diagnostics with warnings  
  
**Sources:** [crates/workspace/src/pane.rs2529-2838](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L2529-L2838>)

### Pinning Tabs

Pinned tabs are protected from certain operations:


**Sources:** [crates/workspace/src/pane.rs1949-2002](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L1949-L2002>)

Effects of pinning:

  * Pinned tabs appear first in the tab bar
  * Protected from "close other tabs" operations (unless `close_pinned` flag set)
  * Maintained when closing unpinned tabs
  * Can still be explicitly closed


**Sources:** [crates/workspace/src/pane.rs1821-1947](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L1821-L1947>)

## Pane Splitting

### Split Directions

Panes support four split directions:


**Sources:** [crates/workspace/src/pane_group.rs67](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane_group.rs#L67-L67>)

Split actions with their behaviors:

Action| Effect| Item Handling  
---|---|---  
`SplitLeft`| Creates pane to left| Clone or move active item  
`SplitRight`| Creates pane to right| Clone or move active item  
`SplitUp`| Creates pane above| Clone or move active item  
`SplitDown`| Creates pane below| Clone or move active item  
`SplitAndMoveLeft`| Split left and move| Move active item  
`SplitAndMoveRight`| Split right and move| Move active item  
`SplitAndMoveUp`| Split up and move| Move active item  
`SplitAndMoveDown`| Split down and move| Move active item  
  
**Sources:** [crates/workspace/src/pane.rs220-252](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L220-L252>)

### Split Implementation

The split process emits an event handled by the workspace:


**Sources:** [crates/workspace/src/pane.rs3074-3135](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L3074-L3135>)

The split actions:

  * Check `can_split_predicate` if set
  * Determine whether to clone or move the item based on action
  * Emit `Split` event with direction and clone flag
  * Workspace handles actual pane creation and layout


**Sources:** [crates/workspace/src/pane.rs3074-3135](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L3074-L3135>)

### Joining Panes

Panes can be joined to consolidate items:

Action| Behavior  
---|---  
`JoinIntoNext`| Move all items to next pane, close this one  
`JoinAll`| Move all items from all panes to first pane  
  

**Sources:** [crates/workspace/src/pane.rs3137-3157](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L3137-L3157>)

## Navigation System

### Navigation History

Navigation history enables back/forward navigation between item states:


**Sources:** [crates/workspace/src/pane.rs418-447](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L418-L447>)

### Navigation Modes

Navigation operates in different modes to control history recording:

Mode| Purpose| Behavior  
---|---|---  
`Normal`| Default operation| Records navigation  
`GoingBack`| Navigating backward| Moves entries from backward to forward stack  
`GoingForward`| Navigating forward| Moves entries from forward to backward stack  
`ClosingItem`| Closing an item| Records to closed stack  
`ReopeningClosedItem`| Reopening closed| Restores from closed stack  
`Disabled`| No history| Skips all recording  
  
**Sources:** [crates/workspace/src/pane.rs432-440](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L432-L440>)

### History Navigation Flow


**Sources:** [crates/workspace/src/pane.rs838-860](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L838-L860>)

Navigation history is managed per-pane and includes:

  * Item reference (weak pointer)
  * Item-specific navigation data (scroll position, selection, etc.)
  * Timestamp for ordering
  * Preview state flag


**Sources:** [crates/workspace/src/pane.rs442-447](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L442-L447>)

### Reopening Closed Items

Closed items can be reopened from the closed stack:


**Sources:** [crates/workspace/src/pane.rs3193-3254](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L3193-L3254>)

The reopen process:

  1. Checks if closed stack has entries
  2. Pops most recent closed item
  3. Attempts to reopen via project path or item reference
  4. Restores navigation state
  5. Activates the restored item


**Sources:** [crates/workspace/src/pane.rs3193-3254](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L3193-L3254>)

## Activation History

Activation history tracks the order items were activated for MRU (Most Recently Used) ordering:


**Sources:** [crates/workspace/src/pane.rs407-410](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L407-L410>)

Uses of activation history:

  * **MRU Navigation** : `ActivatePreviousItem` / `ActivateNextItem` walk the history
  * **Tab Ordering** : Optional MRU-based tab display order
  * **Close Behavior** : `activate_on_close` settings use history to determine next item
  * **Workspace Coordination** : Helps determine which pane to activate


**Sources:** [crates/workspace/src/pane.rs2882-2940](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L2882-L2940>)

The history is maintained with:

  * Each entry stores `entity_id` and `timestamp`
  * Timestamps from shared atomic counter ensure ordering
  * Limited to `MAX_NAVIGATION_HISTORY_LEN` entries (1024)


**Sources:** [crates/workspace/src/pane.rs264](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L264-L264>) [crates/workspace/src/pane.rs407-410](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L407-L410>)

## Pane Actions

### Core Actions

Panes support numerous actions for item and pane management:

Action Category| Actions  
---|---  
**Item Activation**| `ActivateItem(usize)`, `ActivatePreviousItem`, `ActivateNextItem`, `ActivateLastItem`  
**Item Closing**| `CloseActiveItem`, `CloseOtherItems`, `CloseAllItems`, `CloseCleanItems`, `CloseItemsToTheRight`, `CloseItemsToTheLeft`, `CloseMultibufferItems`  
**Splitting**| `SplitLeft`, `SplitRight`, `SplitUp`, `SplitDown`, `SplitAndMoveLeft`, `SplitAndMoveRight`, `SplitAndMoveUp`, `SplitAndMoveDown`  
**Joining**| `JoinIntoNext`, `JoinAll`  
**Navigation**| `GoBack`, `GoForward`, `ReopenClosedItem`, `AlternateFile`  
**Tab Management**| `TogglePreviewTab`, `TogglePinTab`, `UnpinAllTabs`, `SwapItemLeft`, `SwapItemRight`  
  
**Sources:** [crates/workspace/src/pane.rs102-252](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L102-L252>)

### Workspace-Level Pane Actions

The workspace provides actions for moving between panes:

Action| Description  
---|---  
`ActivateNextPane`| Cycle to next pane in layout  
`ActivatePreviousPane`| Cycle to previous pane  
`ActivatePane(usize)`| Activate specific pane by index  
`ActivatePaneLeft`| Activate pane to the left  
`ActivatePaneRight`| Activate pane to the right  
`ActivatePaneUp`| Activate pane above  
`ActivatePaneDown`| Activate pane below  
`SwapPaneLeft`| Swap with left pane  
`SwapPaneRight`| Swap with right pane  
`SwapPaneUp`| Swap with upper pane  
`SwapPaneDown`| Swap with lower pane  
  
**Sources:** [crates/workspace/src/workspace.rs436-462](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/workspace.rs#L436-L462>)

### Moving Items Between Panes

Items can be moved to other panes:


**Sources:** [crates/workspace/src/workspace.rs3738-3821](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/workspace.rs#L3738-L3821>)

Move action parameters:

  * `MoveItemToPane { destination: usize, focus: bool, clone: bool }`
  * `MoveItemToPaneInDirection { direction: SplitDirection, focus: bool, clone: bool }`


The workspace handles finding the target pane or creating one if needed.

**Sources:** [crates/workspace/src/workspace.rs298-322](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/workspace.rs#L298-L322>)

## Drag and Drop

### Dragging Tabs

Tabs can be dragged for reordering or moving to other panes:


**Sources:** [crates/workspace/src/pane.rs449-456](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L449-L456>)

The `DraggedTab` struct carries:

  * `pane: Entity<Pane>` \- Source pane
  * `item: Box<dyn ItemHandle>` \- The item being dragged
  * `ix: usize` \- Original index
  * `detail: usize` \- Detail level for rendering
  * `is_active: bool` \- Whether it was active


**Sources:** [crates/workspace/src/pane.rs449-456](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L449-L456>)

### Drop Handling

Drop operations are processed in multiple stages:

  1. **Predicate Check** : `can_drop_predicate` determines if drop is allowed
  2. **Target Detection** : Identify target pane and position
  3. **Item Transfer** : Remove from source, add to target
  4. **Layout Update** : Adjust pane splits if creating new pane
  5. **Custom Handling** : `custom_drop_handle` for special cases


**Sources:** [crates/workspace/src/pane.rs362-368](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L362-L368>)

### Drag Split Direction

The `drag_split_direction` field indicates where a new pane would be created:


**Sources:** [crates/workspace/src/pane.rs361](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L361-L361>)

## Focus Management

### Focus Flow

Focus management coordinates between pane and items:


**Sources:** [crates/workspace/src/pane.rs600-644](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L600-L644>)

The pane maintains `last_focus_handle_by_item` to restore focus to the correct component within an item:

  * When item activated, check if we have a stored focus handle for it
  * If stored handle exists and is valid, focus it
  * Otherwise, focus the item's main focus handle
  * Update stored handle when focus moves within active item


**Sources:** [crates/workspace/src/pane.rs616-638](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L616-L638>)

### Focus Out

When focus leaves the pane:


**Sources:** [crates/workspace/src/pane.rs651-658](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L651-L658>)

## Autosave Integration

Panes coordinate with workspace-level autosave:


**Sources:** [crates/workspace/src/pane.rs2004-2041](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L2004-L2041>)

The autosave flow:

  1. Item emits edit events
  2. Pane checks autosave settings
  3. For `after_delay`: Uses `DelayedDebouncedEditAction` for debouncing
  4. For `on_focus_change`: Saves when pane loses focus
  5. Calls item's `save()` method with autosave flag


**Sources:** [crates/workspace/src/pane.rs2004-2041](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L2004-L2041>)

## Key Context and Keybindings

Panes contribute to the key context for action dispatch:

Context Key| When Active| Purpose  
---|---|---  
`Pane`| Always| Base pane actions  
`BufferSearchBar`| When search is deployed| Buffer search actions  
`in_replace`| When replace is active| Replace-specific actions  
  
The workspace also adds contexts for pane positioning:

  * `center_pane` \- For center group panes
  * `dock_pane` \- For dock panes


**Sources:** [crates/workspace/src/pane.rs2839-2850](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L2839-L2850>)

## Toolbar Integration

Each pane has an associated toolbar displaying item-specific tools:


**Sources:** [crates/workspace/src/pane.rs358](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L358-L358>)

Toolbar coordination:

  * Toolbar queries active item for toolbar items
  * Items implement `show_toolbar()` to control visibility
  * Toolbar forwards focus events from pane
  * Navigation buttons enabled based on `can_navigate_backward/forward()`


**Sources:** [crates/workspace/src/pane.rs830-864](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L830-L864>)

## Zoom Mode

Panes support zoom mode to temporarily maximize a single pane:


**Sources:** [crates/workspace/src/pane.rs352](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L352-L352>)

Zoom behavior:

  * `zoomed: bool` field tracks state
  * `can_toggle_zoom` flag controls whether zoom is allowed
  * `zoom_out_on_close` automatically unzooms when last item closes
  * Emits `ZoomIn` / `ZoomOut` events for workspace layout adjustment


**Sources:** [crates/workspace/src/pane.rs352](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L352-L352>) [crates/workspace/src/pane.rs3256-3291](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L3256-L3291>)

## Diagnostics Display

Panes track and display diagnostic information in tabs:


**Sources:** [crates/workspace/src/pane.rs686-710](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L686-L710>)

The diagnostics system:

  * Subscribes to project diagnostic events
  * Maintains `diagnostics: HashMap<ProjectPath, DiagnosticSeverity>`
  * Debounces updates (30ms) to avoid excessive recomputation
  * Displays error/warning icons in corresponding tabs
  * Controlled by `ItemSettings::show_diagnostics`


**Sources:** [crates/workspace/src/pane.rs395](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L395-L395>) [crates/workspace/src/pane.rs660-710](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs#L660-L710>)

Dismiss

Refresh this wiki

This wiki was recently refreshed. Please wait 7 days to refresh again.

### On this page

  * [Pane Management](<#pane-management>)
  * [Purpose and Scope](<#purpose-and-scope>)
  * [Core Architecture](<#core-architecture>)
  * [Pane Entity](<#pane-entity>)
  * [Pane Events](<#pane-events>)
  * [Item Management](<#item-management>)
  * [Adding Items](<#adding-items>)
  * [Preview Tabs](<#preview-tabs>)
  * [Item Activation](<#item-activation>)
  * [Closing Items](<#closing-items>)
  * [Tab Bar Rendering](<#tab-bar-rendering>)
  * [Tab Bar Structure](<#tab-bar-structure>)
  * [Tab States](<#tab-states>)
  * [Pinning Tabs](<#pinning-tabs>)
  * [Pane Splitting](<#pane-splitting>)
  * [Split Directions](<#split-directions>)
  * [Split Implementation](<#split-implementation>)
  * [Joining Panes](<#joining-panes>)
  * [Navigation System](<#navigation-system>)
  * [Navigation History](<#navigation-history>)
  * [Navigation Modes](<#navigation-modes>)
  * [History Navigation Flow](<#history-navigation-flow>)
  * [Reopening Closed Items](<#reopening-closed-items>)
  * [Activation History](<#activation-history>)
  * [Pane Actions](<#pane-actions>)
  * [Core Actions](<#core-actions>)
  * [Workspace-Level Pane Actions](<#workspace-level-pane-actions>)
  * [Moving Items Between Panes](<#moving-items-between-panes>)
  * [Drag and Drop](<#drag-and-drop>)
  * [Dragging Tabs](<#dragging-tabs>)
  * [Drop Handling](<#drop-handling>)
  * [Drag Split Direction](<#drag-split-direction>)
  * [Focus Management](<#focus-management>)
  * [Focus Flow](<#focus-flow>)
  * [Focus Out](<#focus-out>)
  * [Autosave Integration](<#autosave-integration>)
  * [Key Context and Keybindings](<#key-context-and-keybindings>)
  * [Toolbar Integration](<#toolbar-integration>)
  * [Zoom Mode](<#zoom-mode>)
  * [Diagnostics Display](<#diagnostics-display>)
