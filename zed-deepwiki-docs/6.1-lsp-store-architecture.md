<!-- Source: https://deepwiki.com/zed-industries/zed/6.1-lsp-store-architecture -->

# 6.1 Lsp Store Architecture

Loading...

Index your code with Devin

[DeepWiki](</>)

[DeepWiki](</>)

[zed-industries/zed ](<https://github.com/zed-industries/zed> "Open repository")

Index your code with

Devin

Edit WikiShare

Loading...

Last indexed: 16 December 2025 ([4109c9](<https://github.com/zed-industries/zed/commits/4109c9dd>))

  * [Overview](</zed-industries/zed/1-overview>)
  * [Core Architecture](</zed-industries/zed/2-core-architecture>)
  * [Application Initialization and Lifecycle](</zed-industries/zed/2.1-application-initialization-and-lifecycle>)
  * [GPUI Framework](</zed-industries/zed/2.2-gpui-framework>)
  * [Window and Platform Abstraction](</zed-industries/zed/2.3-window-and-platform-abstraction>)
  * [Event Flow and Input Handling](</zed-industries/zed/2.4-event-flow-and-input-handling>)
  * [Keybinding and Action System](</zed-industries/zed/2.5-keybinding-and-action-system>)
  * [Focus Management and Hit Testing](</zed-industries/zed/2.6-focus-management-and-hit-testing>)
  * [Editor Architecture](</zed-industries/zed/3-editor-architecture>)
  * [Editor Component and UI](</zed-industries/zed/3.1-editor-component-and-ui>)
  * [Buffer System and Text Storage](</zed-industries/zed/3.2-buffer-system-and-text-storage>)
  * [Display Pipeline and Rendering](</zed-industries/zed/3.3-display-pipeline-and-rendering>)
  * [Selections and Editing Operations](</zed-industries/zed/3.4-selections-and-editing-operations>)
  * [Code Intelligence Integration](</zed-industries/zed/3.5-code-intelligence-integration>)
  * [Diff Integration](</zed-industries/zed/3.6-diff-integration>)
  * [Workspace and Panel System](</zed-industries/zed/4-workspace-and-panel-system>)
  * [Workspace Organization](</zed-industries/zed/4.1-workspace-organization>)
  * [Item System and Lifecycle](</zed-industries/zed/4.2-item-system-and-lifecycle>)
  * [Pane Management](</zed-industries/zed/4.3-pane-management>)
  * [Search System](</zed-industries/zed/4.4-search-system>)
  * [Project Management](</zed-industries/zed/5-project-management>)
  * [Project Orchestration](</zed-industries/zed/5.1-project-orchestration>)
  * [Worktree and File System](</zed-industries/zed/5.2-worktree-and-file-system>)
  * [Buffer Store](</zed-industries/zed/5.3-buffer-store>)
  * [Language Intelligence](</zed-industries/zed/6-language-intelligence>)
  * [LSP Store Architecture](</zed-industries/zed/6.1-lsp-store-architecture>)
  * [Language Server Lifecycle](</zed-industries/zed/6.2-language-server-lifecycle>)
  * [Completions and Diagnostics](</zed-industries/zed/6.3-completions-and-diagnostics>)
  * [Multi-Language Server Coordination](</zed-industries/zed/6.4-multi-language-server-coordination>)
  * [Settings and Configuration](</zed-industries/zed/7-settings-and-configuration>)
  * [Settings Store and Layering](</zed-industries/zed/7.1-settings-store-and-layering>)
  * [Settings UI](</zed-industries/zed/7.2-settings-ui>)
  * [Settings Migration](</zed-industries/zed/7.3-settings-migration>)
  * [Keymap System](</zed-industries/zed/7.4-keymap-system>)
  * [Git Integration](</zed-industries/zed/8-git-integration>)
  * [Git Panel and UI](</zed-industries/zed/8.1-git-panel-and-ui>)
  * [Git Store and State Management](</zed-industries/zed/8.2-git-store-and-state-management>)
  * [Repository Operations](</zed-industries/zed/8.3-repository-operations>)
  * [Diff System](</zed-industries/zed/8.4-diff-system>)
  * [Terminal and Task Execution](</zed-industries/zed/9-terminal-and-task-execution>)
  * [Terminal Core](</zed-industries/zed/9.1-terminal-core>)
  * [Terminal View and Rendering](</zed-industries/zed/9.2-terminal-view-and-rendering>)
  * [Task System](</zed-industries/zed/9.3-task-system>)
  * [Vim Mode](</zed-industries/zed/10-vim-mode>)
  * [Mode State Machine](</zed-industries/zed/10.1-mode-state-machine>)
  * [Operators, Motions, and Objects](</zed-industries/zed/10.2-operators-motions-and-objects>)
  * [Visual Mode](</zed-industries/zed/10.3-visual-mode>)
  * [Helix Mode Integration](</zed-industries/zed/10.4-helix-mode-integration>)
  * [AI Agent System](</zed-industries/zed/11-ai-agent-system>)
  * [Agent Communication Protocol (ACP)](</zed-industries/zed/11.1-agent-communication-protocol-\(acp\)>)
  * [Agent UI and Thread Management](</zed-industries/zed/11.2-agent-ui-and-thread-management>)
  * [Agent Connection and Implementations](</zed-industries/zed/11.3-agent-connection-and-implementations>)
  * [Tool System](</zed-industries/zed/11.4-tool-system>)
  * [Mention System and Context](</zed-industries/zed/11.5-mention-system-and-context>)
  * [Legacy Agent Thread System](</zed-industries/zed/11.6-legacy-agent-thread-system>)
  * [Remote Development and Collaboration](</zed-industries/zed/12-remote-development-and-collaboration>)
  * [Local vs Remote Architecture](</zed-industries/zed/12.1-local-vs-remote-architecture>)
  * [Remote Project Architecture](</zed-industries/zed/12.2-remote-project-architecture>)
  * [Collaboration Features](</zed-industries/zed/12.3-collaboration-features>)
  * [CRDT and Synchronization](</zed-industries/zed/12.4-crdt-and-synchronization>)


Menu

# LSP Store Architecture

Relevant source files

  * [crates/collab/src/tests/editor_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/collab/src/tests/editor_tests.rs>)
  * [crates/collab/src/tests/integration_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/collab/src/tests/integration_tests.rs>)
  * [crates/collab/src/tests/remote_editing_collaboration_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/collab/src/tests/remote_editing_collaboration_tests.rs>)
  * [crates/copilot/Cargo.toml](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/copilot/Cargo.toml>)
  * [crates/copilot/src/copilot.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/copilot/src/copilot.rs>)
  * [crates/copilot/src/sign_in.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/copilot/src/sign_in.rs>)
  * [crates/editor/src/hover_links.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/hover_links.rs>)
  * [crates/fs/src/fs.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/fs/src/fs.rs>)
  * [crates/git/src/status.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git/src/status.rs>)
  * [crates/lsp/src/lsp.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/lsp/src/lsp.rs>)
  * [crates/prettier/src/prettier.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/prettier/src/prettier.rs>)
  * [crates/prettier/src/prettier_server.js](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/prettier/src/prettier_server.js>)
  * [crates/project/src/buffer_store.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs>)
  * [crates/project/src/lsp_command.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_command.rs>)
  * [crates/project/src/lsp_store.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs>)
  * [crates/project/src/prettier_store.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/prettier_store.rs>)
  * [crates/project/src/project.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project.rs>)
  * [crates/project/src/project_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project_tests.rs>)
  * [crates/project/src/worktree_store.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/worktree_store.rs>)
  * [crates/proto/proto/lsp.proto](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/proto/proto/lsp.proto>)
  * [crates/remote_server/src/headless_project.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/remote_server/src/headless_project.rs>)
  * [crates/remote_server/src/remote_editing_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/remote_server/src/remote_editing_tests.rs>)
  * [crates/worktree/src/worktree.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/worktree/src/worktree.rs>)
  * [crates/worktree/src/worktree_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/worktree/src/worktree_tests.rs>)


## Purpose and Scope

The `LspStore` is responsible for managing all Language Server Protocol (LSP) interactions within a project. It provides a unified interface for starting, configuring, and communicating with language servers, handling both local and remote (SSH/collaborative) scenarios transparently. The store manages the lifecycle of language servers, tracks which buffers are registered with which servers, aggregates diagnostics, and coordinates requests for code intelligence features like completions, hover information, and code actions.

For information about the overall Project architecture that contains the LspStore, see [Project Orchestration](</zed-industries/zed/5.1-project-orchestration>). For details on specific LSP protocol commands and their implementations, see [Language Server Lifecycle](</zed-industries/zed/6.2-language-server-lifecycle>).

Sources: [crates/project/src/lsp_store.rs1-11](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L1-L11>)

## Architecture Overview

The LspStore follows a local/remote split architecture to support both single-machine and distributed development scenarios:


**Diagram: LspStore Local/Remote Architecture**

The `LspStore` enum wraps either a `LocalLspStore` or `RemoteLspStore`:

  * **LocalLspStore** : Runs on the machine where files are stored, directly manages language server processes
  * **RemoteLspStore** : Runs on a client machine, forwards all requests via RPC to a remote LocalLspStore
  * **LspStore** : Provides a consistent API regardless of local/remote mode


Sources: [crates/project/src/lsp_store.rs1-11](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L1-L11>) [crates/project/src/lsp_store.rs254-299](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L254-L299>)

## LspStore Entity Structure


**Diagram: LspStore Entity Class Structure**

The `LspStore` provides these key methods:

  * `language_server_for_buffer()` \- Find appropriate server for a buffer
  * `start_language_servers()` \- Initialize servers for a buffer's language
  * `format_project_buffers()` \- Format multiple buffers using LSP
  * `completions()`, `code_actions()`, `hover()` \- Request code intelligence


Sources: [crates/project/src/lsp_store.rs1066-1195](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L1066-L1195>)

## LocalLspStore Internals

The `LocalLspStore` manages the actual language server processes and maintains several critical data structures:

Data Structure| Type| Purpose  
---|---|---  
`language_servers`| `HashMap<LanguageServerId, LanguageServerState>`| Tracks running and starting servers  
`language_server_ids`| `HashMap<LanguageServerSeed, UnifiedLanguageServer>`| Maps configuration to server instances  
`registered_buffers`| `HashMap<BufferId, usize>`| Reference count of buffers registered with servers  
`buffers_opened_in_servers`| `HashMap<BufferId, HashSet<LanguageServerId>>`| Which servers have which buffers open  
`diagnostics`| `HashMap<WorktreeId, HashMap<RelPath, Vec<...>>>`| Aggregated diagnostics by path  
`buffer_snapshots`| `HashMap<BufferId, HashMap<LanguageServerId, Vec<...>>>`| Buffer versions per server  
  

**Diagram: Buffer Registration Tracking**

Sources: [crates/project/src/lsp_store.rs254-299](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L254-L299>) [crates/project/src/lsp_store.rs301-313](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L301-L313>)

## Language Server Identification and Deduplication

Language servers are uniquely identified by a `LanguageServerSeed` to enable deduplication:


**Diagram: Language Server Deduplication via LanguageServerSeed**

The `LanguageServerSeed` contains:

  * `worktree_id`: Which worktree the server is for
  * `name`: Language server name (e.g., "rust-analyzer")
  * `toolchain`: Optional toolchain specification
  * `settings`: Arc of LSP-specific settings


When a buffer needs a language server, its seed is computed and looked up in `language_server_ids`. If a matching server exists, it's reused; otherwise, a new one is started.

Sources: [crates/project/src/lsp_store.rs225-231](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L225-L231>) [crates/project/src/lsp_store.rs315-357](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L315-L357>)

## Language Server State Machine


**Diagram: Language Server State Machine**

The `LanguageServerState` enum tracks server lifecycle:


Key lifecycle methods:

  * `start_language_server()` \- [crates/project/src/lsp_store.rs359-570](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L359-L570>)
  * `get_language_server_binary()` \- [crates/project/src/lsp_store.rs572-663](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L572-L663>)
  * `setup_lsp_messages()` \- [crates/project/src/lsp_store.rs665-1009](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L665-L1009>)
  * `insert_newly_running_language_server()` \- Transitions from Starting to Running


Sources: [crates/project/src/lsp_store.rs359-570](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L359-L570>) [crates/project/src/lsp_store.rs1875-2008](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L1875-L2008>)

## Buffer Registration Lifecycle

Buffers must be registered with language servers before LSP features are available:


**Diagram: Buffer Registration Sequence**

The registration process:

  1. Determine which language servers are needed based on language and settings
  2. Start any servers that aren't already running
  3. Send `textDocument/didOpen` notification with buffer content
  4. Track registration in `registered_buffers` and `buffers_opened_in_servers`
  5. Set up buffer change listeners to send `textDocument/didChange`


Sources: [crates/project/src/lsp_store.rs2010-2287](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L2010-L2287>) [crates/project/src/lsp_store.rs2492-2721](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L2492-L2721>)

## Diagnostics Aggregation

The LspStore aggregates diagnostics from multiple language servers:


**Diagram: Diagnostics Aggregation Flow**

Two diagnostic modes are supported:

  1. **Push Diagnostics** : Server sends `textDocument/publishDiagnostics` notifications
  2. **Pull Diagnostics** : Client requests diagnostics via `textDocument/diagnostic`


The `merge_lsp_diagnostics()` method:

  * Deduplicates diagnostics across servers
  * Maintains per-server diagnostic state
  * Updates buffer's `DiagnosticSet`
  * Emits events for UI updates


Sources: [crates/project/src/lsp_store.rs4267-4504](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L4267-L4504>) [crates/project/src/lsp_store.rs665-715](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L665-L715>)

## LSP Request Handling

LSP requests follow a consistent pattern through the `LspCommand` trait:


**Diagram: LSP Request Processing Pipeline**

Key LSP command implementations in [crates/project/src/lsp_command.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_command.rs>):

  * `GetDefinitions` \- [crates/project/src/lsp_command.rs175-177](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_command.rs#L175-L177>)
  * `GetCompletions` \- [crates/project/src/lsp_command.rs218-222](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_command.rs#L218-L222>)
  * `GetCodeActions` \- [crates/project/src/lsp_command.rs225-228](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_command.rs#L225-L228>)
  * `GetHover` \- [crates/project/src/lsp_command.rs212-215](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_command.rs#L212-L215>)
  * `PerformRename` \- [crates/project/src/lsp_command.rs168-172](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_command.rs#L168-L172>)


Each command implements:

  * `check_capabilities()` \- Verify server supports the feature
  * `to_lsp()` \- Convert to LSP protocol parameters
  * `response_from_lsp()` \- Parse and convert LSP response
  * `to_proto()` / `from_proto()` \- RPC serialization for remote scenarios


Sources: [crates/project/src/lsp_command.rs76-155](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_command.rs#L76-L155>) [crates/project/src/lsp_store.rs3187-3227](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L3187-L3227>)

## Remote LSP Request Flow

For remote projects, the `RemoteLspStore` proxies requests to the host:


**Diagram: Remote LSP Request Sequence**

The `RemoteLspStore` implementation:

  * Forwards all LSP requests via RPC to remote `LocalLspStore`
  * No local language servers are managed
  * Caches language server status information locally
  * Handles reconnection and error recovery


Sources: [crates/project/src/lsp_store.rs1196-1386](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L1196-L1386>) [crates/remote_server/src/headless_project.rs1-73](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/remote_server/src/headless_project.rs#L1-L73>)

## Multiple Language Servers per Buffer

A single buffer can be registered with multiple language servers simultaneously:


**Diagram: Multi-Server Buffer Registration**

The `buffers_opened_in_servers` HashMap tracks which servers have a buffer open:


When requesting LSP features:

  * **Primary server** : Used for core features (definitions, hover, rename)
  * **All servers** : Consulted for diagnostics and completions
  * **Specific server** : Can be targeted by `LanguageServerId` or `LanguageServerName`


Sources: [crates/project/src/lsp_store.rs289](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L289-L289>) [crates/project/src/lsp_store.rs2010-2287](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L2010-L2287>)

## Dynamic Server Capabilities Registration

Language servers can dynamically register capabilities after initialization:


**Diagram: Dynamic Capability Registration Flow**

The `DynamicRegistrations` struct tracks runtime capability changes:


Supported dynamic registrations:

  * File watching (`workspace/didChangeWatchedFiles`)
  * Diagnostic providers (pull diagnostics)
  * More can be added as needed


Sources: [crates/project/src/lsp_store.rs248-252](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L248-L252>) [crates/project/src/lsp_store.rs831-887](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L831-L887>)

## Language Server Progress Reporting

Language servers report long-running operations via the progress API:


**Diagram: Progress Tracking Flow**

Progress types:

  * `ProgressToken::Number(i32)` or `ProgressToken::String(SharedString)`
  * Work done progress: `$/progress` notifications
  * Server status: Custom status notifications


The `LanguageServerStatus` struct tracks:

  * Current progress tokens
  * Server health/status
  * Pending operations


Sources: [crates/project/src/lsp_store.rs146-191](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L146-L191>) [crates/project/src/lsp_store.rs809-829](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L809-L829>)

## Workspace Folder Management

Language servers can be notified about workspace folder changes:


**Diagram: Workspace Folder Tracking**

Key operations:

  * `update_language_server_workspace_roots()` \- Add/remove workspace folders
  * Pending folders are tracked during server startup
  * Once initialized, changes are sent via `workspace/didChangeWorkspaceFolders`


Sources: [crates/project/src/lsp_store.rs220-223](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L220-L223>) [crates/project/src/lsp_store.rs781-805](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L781-L805>)

## File Rename Coordination

The LspStore coordinates file renames with language servers that support the feature:


**Diagram: File Rename Coordination Sequence**

The rename process:

  1. Check which servers support `workspace.fileOperations.willRename`
  2. Send `willRenameFiles` request to get preparatory edits
  3. Apply any returned `WorkspaceEdit` to buffers
  4. Perform the actual filesystem rename
  5. Send `didRenameFiles` notification


Sources: [crates/project/src/lsp_store.rs4505-4799](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L4505-L4799>)

## Language Server Shutdown

Proper cleanup when language servers are no longer needed:


**Diagram: Language Server Shutdown State Machine**

Shutdown triggers:

  * Last buffer using the server is closed
  * Server encounters fatal error
  * Project is closed
  * User manually stops server


The shutdown process:

  1. Unregister all buffers from the server
  2. Send `shutdown` LSP request
  3. Send `exit` LSP notification
  4. Wait for process to exit (5 second timeout)
  5. Force kill if timeout exceeded
  6. Clean up all tracking data structures


Sources: [crates/project/src/lsp_store.rs5754-5865](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L5754-L5865>) [crates/lsp/src/lsp.rs473-542](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/lsp/src/lsp.rs#L473-L542>)

Dismiss

Refresh this wiki

This wiki was recently refreshed. Please wait 7 days to refresh again.

### On this page

  * [LSP Store Architecture](<#lsp-store-architecture>)
  * [Purpose and Scope](<#purpose-and-scope>)
  * [Architecture Overview](<#architecture-overview>)
  * [LspStore Entity Structure](<#lspstore-entity-structure>)
  * [LocalLspStore Internals](<#locallspstore-internals>)
  * [Language Server Identification and Deduplication](<#language-server-identification-and-deduplication>)
  * [Language Server State Machine](<#language-server-state-machine>)
  * [Buffer Registration Lifecycle](<#buffer-registration-lifecycle>)
  * [Diagnostics Aggregation](<#diagnostics-aggregation>)
  * [LSP Request Handling](<#lsp-request-handling>)
  * [Remote LSP Request Flow](<#remote-lsp-request-flow>)
  * [Multiple Language Servers per Buffer](<#multiple-language-servers-per-buffer>)
  * [Dynamic Server Capabilities Registration](<#dynamic-server-capabilities-registration>)
  * [Language Server Progress Reporting](<#language-server-progress-reporting>)
  * [Workspace Folder Management](<#workspace-folder-management>)
  * [File Rename Coordination](<#file-rename-coordination>)
  * [Language Server Shutdown](<#language-server-shutdown>)
