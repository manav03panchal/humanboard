<!-- Source: https://deepwiki.com/zed-industries/zed/2.5-keybinding-and-action-system -->

# 2.5 Keybinding And Action System

Loading...

Index your code with Devin

[DeepWiki](</>)

[DeepWiki](</>)

[zed-industries/zed ](<https://github.com/zed-industries/zed> "Open repository")

Index your code with

Devin

Edit WikiShare

Loading...

Last indexed: 16 December 2025 ([4109c9](<https://github.com/zed-industries/zed/commits/4109c9dd>))

  * [Overview](</zed-industries/zed/1-overview>)
  * [Core Architecture](</zed-industries/zed/2-core-architecture>)
  * [Application Initialization and Lifecycle](</zed-industries/zed/2.1-application-initialization-and-lifecycle>)
  * [GPUI Framework](</zed-industries/zed/2.2-gpui-framework>)
  * [Window and Platform Abstraction](</zed-industries/zed/2.3-window-and-platform-abstraction>)
  * [Event Flow and Input Handling](</zed-industries/zed/2.4-event-flow-and-input-handling>)
  * [Keybinding and Action System](</zed-industries/zed/2.5-keybinding-and-action-system>)
  * [Focus Management and Hit Testing](</zed-industries/zed/2.6-focus-management-and-hit-testing>)
  * [Editor Architecture](</zed-industries/zed/3-editor-architecture>)
  * [Editor Component and UI](</zed-industries/zed/3.1-editor-component-and-ui>)
  * [Buffer System and Text Storage](</zed-industries/zed/3.2-buffer-system-and-text-storage>)
  * [Display Pipeline and Rendering](</zed-industries/zed/3.3-display-pipeline-and-rendering>)
  * [Selections and Editing Operations](</zed-industries/zed/3.4-selections-and-editing-operations>)
  * [Code Intelligence Integration](</zed-industries/zed/3.5-code-intelligence-integration>)
  * [Diff Integration](</zed-industries/zed/3.6-diff-integration>)
  * [Workspace and Panel System](</zed-industries/zed/4-workspace-and-panel-system>)
  * [Workspace Organization](</zed-industries/zed/4.1-workspace-organization>)
  * [Item System and Lifecycle](</zed-industries/zed/4.2-item-system-and-lifecycle>)
  * [Pane Management](</zed-industries/zed/4.3-pane-management>)
  * [Search System](</zed-industries/zed/4.4-search-system>)
  * [Project Management](</zed-industries/zed/5-project-management>)
  * [Project Orchestration](</zed-industries/zed/5.1-project-orchestration>)
  * [Worktree and File System](</zed-industries/zed/5.2-worktree-and-file-system>)
  * [Buffer Store](</zed-industries/zed/5.3-buffer-store>)
  * [Language Intelligence](</zed-industries/zed/6-language-intelligence>)
  * [LSP Store Architecture](</zed-industries/zed/6.1-lsp-store-architecture>)
  * [Language Server Lifecycle](</zed-industries/zed/6.2-language-server-lifecycle>)
  * [Completions and Diagnostics](</zed-industries/zed/6.3-completions-and-diagnostics>)
  * [Multi-Language Server Coordination](</zed-industries/zed/6.4-multi-language-server-coordination>)
  * [Settings and Configuration](</zed-industries/zed/7-settings-and-configuration>)
  * [Settings Store and Layering](</zed-industries/zed/7.1-settings-store-and-layering>)
  * [Settings UI](</zed-industries/zed/7.2-settings-ui>)
  * [Settings Migration](</zed-industries/zed/7.3-settings-migration>)
  * [Keymap System](</zed-industries/zed/7.4-keymap-system>)
  * [Git Integration](</zed-industries/zed/8-git-integration>)
  * [Git Panel and UI](</zed-industries/zed/8.1-git-panel-and-ui>)
  * [Git Store and State Management](</zed-industries/zed/8.2-git-store-and-state-management>)
  * [Repository Operations](</zed-industries/zed/8.3-repository-operations>)
  * [Diff System](</zed-industries/zed/8.4-diff-system>)
  * [Terminal and Task Execution](</zed-industries/zed/9-terminal-and-task-execution>)
  * [Terminal Core](</zed-industries/zed/9.1-terminal-core>)
  * [Terminal View and Rendering](</zed-industries/zed/9.2-terminal-view-and-rendering>)
  * [Task System](</zed-industries/zed/9.3-task-system>)
  * [Vim Mode](</zed-industries/zed/10-vim-mode>)
  * [Mode State Machine](</zed-industries/zed/10.1-mode-state-machine>)
  * [Operators, Motions, and Objects](</zed-industries/zed/10.2-operators-motions-and-objects>)
  * [Visual Mode](</zed-industries/zed/10.3-visual-mode>)
  * [Helix Mode Integration](</zed-industries/zed/10.4-helix-mode-integration>)
  * [AI Agent System](</zed-industries/zed/11-ai-agent-system>)
  * [Agent Communication Protocol (ACP)](</zed-industries/zed/11.1-agent-communication-protocol-\(acp\)>)
  * [Agent UI and Thread Management](</zed-industries/zed/11.2-agent-ui-and-thread-management>)
  * [Agent Connection and Implementations](</zed-industries/zed/11.3-agent-connection-and-implementations>)
  * [Tool System](</zed-industries/zed/11.4-tool-system>)
  * [Mention System and Context](</zed-industries/zed/11.5-mention-system-and-context>)
  * [Legacy Agent Thread System](</zed-industries/zed/11.6-legacy-agent-thread-system>)
  * [Remote Development and Collaboration](</zed-industries/zed/12-remote-development-and-collaboration>)
  * [Local vs Remote Architecture](</zed-industries/zed/12.1-local-vs-remote-architecture>)
  * [Remote Project Architecture](</zed-industries/zed/12.2-remote-project-architecture>)
  * [Collaboration Features](</zed-industries/zed/12.3-collaboration-features>)
  * [CRDT and Synchronization](</zed-industries/zed/12.4-crdt-and-synchronization>)


Menu

# Keybinding and Action System

Relevant source files

  * [assets/keymaps/default-linux.json](<https://github.com/zed-industries/zed/blob/4109c9dd/assets/keymaps/default-linux.json>)
  * [assets/keymaps/default-macos.json](<https://github.com/zed-industries/zed/blob/4109c9dd/assets/keymaps/default-macos.json>)
  * [assets/keymaps/default-windows.json](<https://github.com/zed-industries/zed/blob/4109c9dd/assets/keymaps/default-windows.json>)
  * [assets/settings/default.json](<https://github.com/zed-industries/zed/blob/4109c9dd/assets/settings/default.json>)
  * [crates/editor/src/editor_settings.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor_settings.rs>)
  * [crates/language/src/language_settings.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/language_settings.rs>)
  * [crates/migrator/Cargo.toml](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/migrator/Cargo.toml>)
  * [crates/migrator/src/migrations.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/migrator/src/migrations.rs>)
  * [crates/migrator/src/migrator.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/migrator/src/migrator.rs>)
  * [crates/project/src/project_settings.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project_settings.rs>)
  * [crates/settings/Cargo.toml](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings/Cargo.toml>)
  * [crates/settings/src/keymap_file.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings/src/keymap_file.rs>)
  * [crates/settings/src/settings.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings/src/settings.rs>)
  * [crates/settings/src/settings_content.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings/src/settings_content.rs>)
  * [crates/settings/src/settings_content/editor.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings/src/settings_content/editor.rs>)
  * [crates/settings/src/settings_content/language.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings/src/settings_content/language.rs>)
  * [crates/settings/src/settings_content/project.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings/src/settings_content/project.rs>)
  * [crates/settings/src/settings_content/terminal.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings/src/settings_content/terminal.rs>)
  * [crates/settings/src/settings_content/workspace.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings/src/settings_content/workspace.rs>)
  * [crates/settings/src/settings_store.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings/src/settings_store.rs>)
  * [crates/settings/src/vscode_import.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings/src/vscode_import.rs>)
  * [crates/settings_ui/Cargo.toml](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings_ui/Cargo.toml>)
  * [crates/settings_ui/src/page_data.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings_ui/src/page_data.rs>)
  * [crates/settings_ui/src/settings_ui.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings_ui/src/settings_ui.rs>)
  * [crates/terminal/src/terminal_settings.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/terminal/src/terminal_settings.rs>)
  * [crates/title_bar/Cargo.toml](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/title_bar/Cargo.toml>)
  * [crates/title_bar/src/platform_title_bar.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/title_bar/src/platform_title_bar.rs>)
  * [crates/title_bar/src/platforms/platform_linux.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/title_bar/src/platforms/platform_linux.rs>)
  * [crates/title_bar/src/title_bar.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/title_bar/src/title_bar.rs>)
  * [crates/title_bar/src/title_bar_settings.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/title_bar/src/title_bar_settings.rs>)
  * [crates/worktree/src/worktree_settings.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/worktree/src/worktree_settings.rs>)
  * [crates/zed/src/zed/app_menus.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/zed/src/zed/app_menus.rs>)
  * [crates/zed/src/zed/migrate.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/zed/src/zed/migrate.rs>)
  * [crates/zed_actions/src/lib.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/zed_actions/src/lib.rs>)
  * [docs/src/configuring-zed.md](<https://github.com/zed-industries/zed/blob/4109c9dd/docs/src/configuring-zed.md>)
  * [docs/src/visual-customization.md](<https://github.com/zed-industries/zed/blob/4109c9dd/docs/src/visual-customization.md>)


## Purpose and Scope

This document describes Zed's keybinding and action system, which provides the primary interface for user interaction through keyboard commands. The system maps keystroke sequences to actions, with support for context-aware bindings that activate conditionally based on the current UI state.

This page focuses specifically on the keybinding infrastructure and action dispatch mechanism. For information about the broader event flow from OS input to component handling, see [Event Flow and Input Handling](</zed-industries/zed/2.4-event-flow-and-input-handling>). For settings configuration including keymap preferences, see the Settings and Configuration section (#7).

## Core Concepts

### Actions

Actions are the fundamental unit of user commands in Zed. An action is a typed command that can be dispatched through the UI system, typically in response to a keybinding or menu selection.

Actions are defined using the `actions!` macro or by implementing the `Action` trait:


Actions can also carry parameters:


The action system provides type safety and automatic serialization for parameterized actions, allowing them to be configured in JSON keymap files.

**Diagram: Action System Architecture**


Sources: [crates/zed_actions/src/lib.rs1-176](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/zed_actions/src/lib.rs#L1-L176>) [crates/settings/src/keymap_file.rs1-100](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings/src/keymap_file.rs#L1-L100>)

### Keybindings

A keybinding maps a keystroke sequence to an action. Keystroke sequences consist of one or more keystrokes separated by whitespace, where each keystroke specifies modifiers (`ctrl`, `alt`, `shift`, `cmd`, etc.) followed by a key.

Examples from the default macOS keymap:

  * `"cmd-s"` → `workspace::Save`
  * `"cmd-k cmd-b"` → `editor::BlameHover` (chord sequence)
  * `"alt-shift-f"` → `editor::Format`


Keybindings are organized into sections within keymap files, each with an optional context predicate that determines when the bindings are active.

**Diagram: Keybinding Structure**


Sources: [crates/settings/src/keymap_file.rs56-93](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings/src/keymap_file.rs#L56-L93>) [assets/keymaps/default-macos.json1-100](<https://github.com/zed-industries/zed/blob/4109c9dd/assets/keymaps/default-macos.json#L1-L100>)

### Contexts

Context predicates allow keybindings to be active only in specific UI states. The context system supports:

  1. **Simple contexts** : Just a component name (e.g., `"Editor"`, `"Workspace"`)
  2. **Boolean expressions** : `"Editor && mode == full"`, `"Workspace || Terminal"`
  3. **Negation** : `"!VimMode"`
  4. **Special predicates** : File extension checks, OS checks, custom predicates


The context string is parsed into a `KeyBindingContextPredicate` that can be evaluated against the current UI state.


Sources: [crates/settings/src/keymap_file.rs62-70](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings/src/keymap_file.rs#L62-L70>) [assets/keymaps/default-macos.json155-172](<https://github.com/zed-industries/zed/blob/4109c9dd/assets/keymaps/default-macos.json#L155-L172>)

## Keymap File Structure

### File Format

Keymap files use JSON (with comments allowed) and consist of an array of sections. Each section contains:

Field| Type| Description  
---|---|---  
`context`| String| Context predicate for when bindings are active  
`use_key_equivalents`| Boolean| Enable position-based key mapping for non-QWERTY layouts (macOS)  
`bindings`| Object| Map of keystroke sequences to actions  
  
**Example Section Structure:**


Actions can be specified as:

  * Simple strings: `"editor::Copy"`
  * Arrays with parameters: `["editor::MoveToBeginningOfLine", { "stop_at_soft_wraps": true }]`


Sources: [crates/settings/src/keymap_file.rs56-93](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings/src/keymap_file.rs#L56-L93>) [assets/keymaps/default-macos.json1-50](<https://github.com/zed-industries/zed/blob/4109c9dd/assets/keymaps/default-macos.json#L1-L50>)

### Keymap Loading and Precedence

Keymap files are loaded in a specific order, with later bindings overriding earlier ones:

**Diagram: Keymap Loading Sequence**


The `base_keymap` setting determines which predefined keymap is loaded first:


Available base keymaps: `VSCode`, `Atom`, `JetBrains`, `SublimeText`, `TextMate`, `None`.

Sources: [crates/settings/src/keymap_file.rs150-200](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings/src/keymap_file.rs#L150-L200>) [assets/settings/default.json18-28](<https://github.com/zed-industries/zed/blob/4109c9dd/assets/settings/default.json#L18-L28>)

### Platform-Specific Keymaps

Zed ships with platform-specific default keymap files that account for different modifier key conventions:

Platform| File| Primary Modifier  
---|---|---  
macOS| `default-macos.json`| `cmd`  
Linux| `default-linux.json`| `ctrl`  
Windows| `default-windows.json`| `ctrl`  
  
These files contain equivalent bindings using platform-appropriate modifiers. For example:

  * macOS: `"cmd-c": "editor::Copy"`
  * Linux/Windows: `"ctrl-c": "editor::Copy"`


Sources: [assets/keymaps/default-macos.json1-20](<https://github.com/zed-industries/zed/blob/4109c9dd/assets/keymaps/default-macos.json#L1-L20>) [assets/keymaps/default-linux.json1-20](<https://github.com/zed-industries/zed/blob/4109c9dd/assets/keymaps/default-linux.json#L1-L20>) [assets/keymaps/default-windows.json1-20](<https://github.com/zed-industries/zed/blob/4109c9dd/assets/keymaps/default-windows.json#L1-L20>)

## Action Registration and Dispatch

### Action Registration

Components register handlers for actions they want to respond to:


The registration system maintains a mapping from action type IDs to handler closures. When an action is dispatched, the system looks up the appropriate handler for the focused component or its ancestors.

**Diagram: Action Registration and Handler Storage**


Sources: [crates/settings_ui/src/settings_ui.rs375-401](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings_ui/src/settings_ui.rs#L375-L401>) [crates/title_bar/src/title_bar.rs68-124](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/title_bar/src/title_bar.rs#L68-L124>)

### Action Dispatch Flow

When a keystroke sequence matches a keybinding, the corresponding action is dispatched through the UI hierarchy:

**Diagram: Action Dispatch Through UI Tree**


The dispatch system implements two-phase event handling:

  1. **Capture phase** : Walk from root to focused element
  2. **Bubble phase** : Walk from focused element back to root


Most keybindings use the bubble phase, allowing focused components to handle actions first.

Sources: [crates/settings/src/keymap_file.rs200-300](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings/src/keymap_file.rs#L200-L300>)

## Context Matching System

### Context Predicate Evaluation

The context matching system evaluates boolean expressions against the current UI state. The `KeyBindingContextPredicate` enum represents parsed context expressions:

**Diagram: Context Predicate Types**


### Context Keys

Components provide context keys that can be tested in predicates:

Context Key| Example Values| Usage  
---|---|---  
Component name| `Editor`, `Workspace`, `Pane`| Basic context matching  
`mode`| `full`, `auto_height`| Editor mode  
`vim_mode`| `normal`, `insert`, `visual`| Vim mode state  
`showing_completions`| `true`, `false`| Completion menu state  
`edit_prediction`| `true`, `false`| Edit prediction state  
`extension`| `md`, `rs`, `json`| File extension  
  
Example context expressions:

  * `"Editor && mode == full"` \- Full-height editor
  * `"Editor && !VimMode"` \- Editor with Vim disabled
  * `"Editor && extension == md"` \- Markdown files only
  * `"MessageEditor && !Picker > Editor && !use_modifier_to_send"` \- Complex nested context


Sources: [assets/keymaps/default-macos.json155-172](<https://github.com/zed-industries/zed/blob/4109c9dd/assets/keymaps/default-macos.json#L155-L172>) [assets/keymaps/default-macos.json326-336](<https://github.com/zed-industries/zed/blob/4109c9dd/assets/keymaps/default-macos.json#L326-L336>)

### Context Hierarchy

Context matching respects the UI component hierarchy. The `>` operator allows matching parent-child relationships:


This binding is only active when a `Markdown` component is focused within an `AgentPanel`.

Sources: [assets/keymaps/default-macos.json303-308](<https://github.com/zed-industries/zed/blob/4109c9dd/assets/keymaps/default-macos.json#L303-L308>)

## Base Keymap System

### Base Keymap Selection

The `base_keymap` setting allows users to choose a familiar keybinding scheme:

**Diagram: Base Keymap Architecture**


The base keymap provides comprehensive default bindings, and the user keymap can override specific bindings:


Sources: [assets/settings/default.json18-28](<https://github.com/zed-industries/zed/blob/4109c9dd/assets/settings/default.json#L18-L28>) [crates/settings/src/keymap_file.rs150-200](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings/src/keymap_file.rs#L150-L200>)

### Keymap Compatibility Layers

Each base keymap is organized into sections that mirror the source editor's binding conventions:

**VSCode Section Example:**


**Atom Section Example:**


This separation allows users to understand which bindings come from which source and makes it easier to maintain compatibility with multiple editor conventions.

Sources: [assets/keymaps/default-macos.json525-595](<https://github.com/zed-industries/zed/blob/4109c9dd/assets/keymaps/default-macos.json#L525-L595>) [assets/keymaps/default-macos.json766-776](<https://github.com/zed-industries/zed/blob/4109c9dd/assets/keymaps/default-macos.json#L766-L776>)

## Keymap Migration System

### Automatic Migration

Zed includes a migration system that automatically updates keymaps when actions are renamed or restructured. This ensures user keymaps remain functional across versions.

**Diagram: Keymap Migration Flow**


Migration rules are defined using Tree-sitter queries that match specific action patterns and replace them with updated equivalents.

Sources: [crates/migrator/src/migrator.rs1-100](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/migrator/src/migrator.rs#L1-L100>) [crates/migrator/src/migrations.rs1-40](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/migrator/src/migrations.rs#L1-L40>)

### Migration Pattern Examples

Recent migrations include:

  1. **Agent action namespace changes** (m_2025_03_03):

     * `assistant::*` → `agent::*`
     * Example: `"assistant::Assist"` → `"agent::Chat"`
  2. **Edit prediction provider changes** (m_2025_01_29):

     * Settings format changes for edit prediction configuration
  3. **Menu action updates** (m_2025_03_06):

     * Various menu-related action renames


The migration system ensures these changes are transparent to users while maintaining their custom keybindings.

Sources: [crates/migrator/src/migrations.rs1-40](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/migrator/src/migrations.rs#L1-L40>)

## Keymap Validation

### Validation System

Keymap files are validated when loaded to catch errors early. The `KeyBindingValidator` trait allows components to register custom validation logic:


Validation checks include:

  * Action exists and is registered
  * Action parameters match expected schema
  * Keystroke syntax is valid
  * Context predicate is well-formed


Invalid keybindings generate warnings but don't prevent the rest of the keymap from loading, allowing partial functionality when errors occur.

Sources: [crates/settings/src/keymap_file.rs27-44](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings/src/keymap_file.rs#L27-L44>)

### Error Reporting

When validation fails, errors are reported with context:

Error Type| Description| Example  
---|---|---  
Invalid keystroke| Malformed keystroke syntax| `"crtl-c"` (typo in modifier)  
Unknown action| Action not registered| `"nonexistent::Action"`  
Invalid parameters| Action parameters don't match schema| Wrong type for parameter  
Context parse error| Invalid context expression| Unclosed parenthesis  
  
The validation system provides detailed error messages to help users fix their keymaps.

Sources: [crates/settings/src/keymap_file.rs96-150](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings/src/keymap_file.rs#L96-L150>)

## Integration with Settings System

### Keymap Settings

Keymap behavior is controlled by several settings:

**Diagram: Settings-Keymap Integration**


Key settings:


When `vim_mode` or `helix_mode` is enabled, additional modal editing keybindings are layered on top of the base keymap.

Sources: [assets/settings/default.json18-28](<https://github.com/zed-industries/zed/blob/4109c9dd/assets/settings/default.json#L18-L28>) [assets/settings/default.json120-124](<https://github.com/zed-industries/zed/blob/4109c9dd/assets/settings/default.json#L120-L124>)

### Dynamic Keymap Updates

Keymaps can be modified at runtime through the settings UI:

  1. User opens keymap file via `zed::OpenKeymapFile` action
  2. Makes changes and saves
  3. File watcher detects change
  4. Keymap is reloaded and validated
  5. New bindings take effect immediately


This hot-reload capability enables rapid iteration on keybinding customization without restarting the application.

Sources: [crates/settings/src/settings_store.rs400-450](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings/src/settings_store.rs#L400-L450>)

## Keymap File Locations

### File Paths

File Type| Path  
---|---  
User keymap| `~/.config/zed/keymap.json`  
Base keymap (macOS)| `assets/keymaps/default-macos.json`  
Base keymap (Linux)| `assets/keymaps/default-linux.json`  
Base keymap (Windows)| `assets/keymaps/default-windows.json`  
  
The user keymap file is created automatically when first accessed through the settings UI.

Sources: [crates/settings/src/keymap_file.rs1-50](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/settings/src/keymap_file.rs#L1-L50>)

## Advanced Features

### Key Equivalents (macOS)

The `use_key_equivalents` option enables position-based key mapping for non-QWERTY keyboards on macOS:


The second element of the array contains the parameters as a JSON object. Parameters are validated against the action's JSON schema.

Sources: [assets/keymaps/default-macos.json38-40](<https://github.com/zed-industries/zed/blob/4109c9dd/assets/keymaps/default-macos.json#L38-L40>) [assets/keymaps/default-macos.json104-106](<https://github.com/zed-industries/zed/blob/4109c9dd/assets/keymaps/default-macos.json#L104-L106>)

### Keystroke Sequences (Chords)

Zed supports multi-keystroke sequences (chords) for complex bindings:


The user must press `cmd-k` followed by another key combination. This enables creating large binding spaces without modifier key conflicts.

Sources: [assets/keymaps/default-macos.json556-557](<https://github.com/zed-industries/zed/blob/4109c9dd/assets/keymaps/default-macos.json#L556-L557>) [assets/keymaps/default-macos.json682-683](<https://github.com/zed-industries/zed/blob/4109c9dd/assets/keymaps/default-macos.json#L682-L683>)


Dismiss

Refresh this wiki

This wiki was recently refreshed. Please wait 7 days to refresh again.

### On this page

  * [Keybinding and Action System](<#keybinding-and-action-system>)
  * [Purpose and Scope](<#purpose-and-scope>)
  * [Core Concepts](<#core-concepts>)
  * [Actions](<#actions>)
  * [Keybindings](<#keybindings>)
  * [Contexts](<#contexts>)
  * [Keymap File Structure](<#keymap-file-structure>)
  * [File Format](<#file-format>)
  * [Keymap Loading and Precedence](<#keymap-loading-and-precedence>)
  * [Platform-Specific Keymaps](<#platform-specific-keymaps>)
  * [Action Registration and Dispatch](<#action-registration-and-dispatch>)
  * [Action Registration](<#action-registration>)
  * [Action Dispatch Flow](<#action-dispatch-flow>)
  * [Context Matching System](<#context-matching-system>)
  * [Context Predicate Evaluation](<#context-predicate-evaluation>)
  * [Context Keys](<#context-keys>)
  * [Context Hierarchy](<#context-hierarchy>)
  * [Base Keymap System](<#base-keymap-system>)
  * [Base Keymap Selection](<#base-keymap-selection>)
  * [Keymap Compatibility Layers](<#keymap-compatibility-layers>)
  * [Keymap Migration System](<#keymap-migration-system>)
  * [Automatic Migration](<#automatic-migration>)
  * [Migration Pattern Examples](<#migration-pattern-examples>)
  * [Keymap Validation](<#keymap-validation>)
  * [Validation System](<#validation-system>)
  * [Error Reporting](<#error-reporting>)
  * [Integration with Settings System](<#integration-with-settings-system>)
  * [Keymap Settings](<#keymap-settings>)
  * [Dynamic Keymap Updates](<#dynamic-keymap-updates>)
  * [Keymap File Locations](<#keymap-file-locations>)
  * [File Paths](<#file-paths>)
  * [Advanced Features](<#advanced-features>)
  * [Key Equivalents (macOS)](<#key-equivalents-macos>)
  * [Action Parameters in JSON](<#action-parameters-in-json>)
  * [Keystroke Sequences (Chords)](<#keystroke-sequences-chords>)
