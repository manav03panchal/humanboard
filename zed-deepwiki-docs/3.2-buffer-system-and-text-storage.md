<!-- Source: https://deepwiki.com/zed-industries/zed/3.2-buffer-system-and-text-storage -->

# 3.2 Buffer System And Text Storage

Loading...

Index your code with Devin

[DeepWiki](</>)

[DeepWiki](</>)

[zed-industries/zed ](<https://github.com/zed-industries/zed> "Open repository")

Index your code with

Devin

Edit WikiShare

Loading...

Last indexed: 16 December 2025 ([4109c9](<https://github.com/zed-industries/zed/commits/4109c9dd>))

  * [Overview](</zed-industries/zed/1-overview>)
  * [Core Architecture](</zed-industries/zed/2-core-architecture>)
  * [Application Initialization and Lifecycle](</zed-industries/zed/2.1-application-initialization-and-lifecycle>)
  * [GPUI Framework](</zed-industries/zed/2.2-gpui-framework>)
  * [Window and Platform Abstraction](</zed-industries/zed/2.3-window-and-platform-abstraction>)
  * [Event Flow and Input Handling](</zed-industries/zed/2.4-event-flow-and-input-handling>)
  * [Keybinding and Action System](</zed-industries/zed/2.5-keybinding-and-action-system>)
  * [Focus Management and Hit Testing](</zed-industries/zed/2.6-focus-management-and-hit-testing>)
  * [Editor Architecture](</zed-industries/zed/3-editor-architecture>)
  * [Editor Component and UI](</zed-industries/zed/3.1-editor-component-and-ui>)
  * [Buffer System and Text Storage](</zed-industries/zed/3.2-buffer-system-and-text-storage>)
  * [Display Pipeline and Rendering](</zed-industries/zed/3.3-display-pipeline-and-rendering>)
  * [Selections and Editing Operations](</zed-industries/zed/3.4-selections-and-editing-operations>)
  * [Code Intelligence Integration](</zed-industries/zed/3.5-code-intelligence-integration>)
  * [Diff Integration](</zed-industries/zed/3.6-diff-integration>)
  * [Workspace and Panel System](</zed-industries/zed/4-workspace-and-panel-system>)
  * [Workspace Organization](</zed-industries/zed/4.1-workspace-organization>)
  * [Item System and Lifecycle](</zed-industries/zed/4.2-item-system-and-lifecycle>)
  * [Pane Management](</zed-industries/zed/4.3-pane-management>)
  * [Search System](</zed-industries/zed/4.4-search-system>)
  * [Project Management](</zed-industries/zed/5-project-management>)
  * [Project Orchestration](</zed-industries/zed/5.1-project-orchestration>)
  * [Worktree and File System](</zed-industries/zed/5.2-worktree-and-file-system>)
  * [Buffer Store](</zed-industries/zed/5.3-buffer-store>)
  * [Language Intelligence](</zed-industries/zed/6-language-intelligence>)
  * [LSP Store Architecture](</zed-industries/zed/6.1-lsp-store-architecture>)
  * [Language Server Lifecycle](</zed-industries/zed/6.2-language-server-lifecycle>)
  * [Completions and Diagnostics](</zed-industries/zed/6.3-completions-and-diagnostics>)
  * [Multi-Language Server Coordination](</zed-industries/zed/6.4-multi-language-server-coordination>)
  * [Settings and Configuration](</zed-industries/zed/7-settings-and-configuration>)
  * [Settings Store and Layering](</zed-industries/zed/7.1-settings-store-and-layering>)
  * [Settings UI](</zed-industries/zed/7.2-settings-ui>)
  * [Settings Migration](</zed-industries/zed/7.3-settings-migration>)
  * [Keymap System](</zed-industries/zed/7.4-keymap-system>)
  * [Git Integration](</zed-industries/zed/8-git-integration>)
  * [Git Panel and UI](</zed-industries/zed/8.1-git-panel-and-ui>)
  * [Git Store and State Management](</zed-industries/zed/8.2-git-store-and-state-management>)
  * [Repository Operations](</zed-industries/zed/8.3-repository-operations>)
  * [Diff System](</zed-industries/zed/8.4-diff-system>)
  * [Terminal and Task Execution](</zed-industries/zed/9-terminal-and-task-execution>)
  * [Terminal Core](</zed-industries/zed/9.1-terminal-core>)
  * [Terminal View and Rendering](</zed-industries/zed/9.2-terminal-view-and-rendering>)
  * [Task System](</zed-industries/zed/9.3-task-system>)
  * [Vim Mode](</zed-industries/zed/10-vim-mode>)
  * [Mode State Machine](</zed-industries/zed/10.1-mode-state-machine>)
  * [Operators, Motions, and Objects](</zed-industries/zed/10.2-operators-motions-and-objects>)
  * [Visual Mode](</zed-industries/zed/10.3-visual-mode>)
  * [Helix Mode Integration](</zed-industries/zed/10.4-helix-mode-integration>)
  * [AI Agent System](</zed-industries/zed/11-ai-agent-system>)
  * [Agent Communication Protocol (ACP)](</zed-industries/zed/11.1-agent-communication-protocol-\(acp\)>)
  * [Agent UI and Thread Management](</zed-industries/zed/11.2-agent-ui-and-thread-management>)
  * [Agent Connection and Implementations](</zed-industries/zed/11.3-agent-connection-and-implementations>)
  * [Tool System](</zed-industries/zed/11.4-tool-system>)
  * [Mention System and Context](</zed-industries/zed/11.5-mention-system-and-context>)
  * [Legacy Agent Thread System](</zed-industries/zed/11.6-legacy-agent-thread-system>)
  * [Remote Development and Collaboration](</zed-industries/zed/12-remote-development-and-collaboration>)
  * [Local vs Remote Architecture](</zed-industries/zed/12.1-local-vs-remote-architecture>)
  * [Remote Project Architecture](</zed-industries/zed/12.2-remote-project-architecture>)
  * [Collaboration Features](</zed-industries/zed/12.3-collaboration-features>)
  * [CRDT and Synchronization](</zed-industries/zed/12.4-crdt-and-synchronization>)


Menu

# Buffer System and Text Storage

Relevant source files

  * [crates/buffer_diff/src/buffer_diff.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/buffer_diff/src/buffer_diff.rs>)
  * [crates/editor/src/actions.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/actions.rs>)
  * [crates/editor/src/code_completion_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/code_completion_tests.rs>)
  * [crates/editor/src/code_context_menus.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/code_context_menus.rs>)
  * [crates/editor/src/editor.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs>)
  * [crates/editor/src/editor_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor_tests.rs>)
  * [crates/editor/src/element.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/element.rs>)
  * [crates/language/src/buffer.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/buffer.rs>)
  * [crates/language/src/buffer_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/buffer_tests.rs>)
  * [crates/language/src/syntax_map.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/syntax_map.rs>)
  * [crates/multi_buffer/src/anchor.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/anchor.rs>)
  * [crates/multi_buffer/src/multi_buffer.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/multi_buffer.rs>)
  * [crates/multi_buffer/src/multi_buffer_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/multi_buffer_tests.rs>)


This document describes the buffer system in Zed, which provides the core text storage and manipulation capabilities. The buffer system consists of three layers: the CRDT-based `TextBuffer` for conflict-free text storage, the `Buffer` with language intelligence features, and the `MultiBuffer` for displaying multiple files or excerpts in a single view.

For information about how buffers are displayed and rendered to the screen, see [Display Pipeline and Rendering](</zed-industries/zed/3.3-display-pipeline-and-rendering>). For buffer lifecycle management within projects, see [Buffer Store](</zed-industries/zed/5.3-buffer-store>). For collaborative editing features, see [CRDT and Synchronization](</zed-industries/zed/12.4-crdt-and-synchronization>).

## Architecture Overview

The buffer system is organized into three primary layers, each building on the previous:


**Sources:** [crates/editor/src/editor.rs1-226](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L1-L226>) [crates/multi_buffer/src/multi_buffer.rs1-98](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/multi_buffer.rs#L1-L98>) [crates/language/src/buffer.rs1-134](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/buffer.rs#L1-L134>)

## TextBuffer: CRDT-Based Text Storage

The `TextBuffer` provides conflict-free replicated text storage using CRDT (Conflict-free Replicated Data Type) operations. This is the foundation for both local editing and collaborative editing.

Component| Type| Purpose  
---|---|---  
`TextBuffer`| `text::Buffer`| CRDT-based text buffer with operations  
`Rope`| `rope::Rope`| Efficient string storage using B-tree of chunks  
`Operation`| `text::Operation`| CRDT operations (insert, delete) with timestamps  
`ReplicaId`| `clock::ReplicaId`| Unique identifier for each editor instance  
`Lamport`| `clock::Lamport`| Lamport timestamp for operation ordering  
  
The `TextBuffer` is defined in the `text` crate (not fully shown in provided files) and uses a rope data structure for efficient text operations. The `Buffer` type in `language/src/buffer.rs` wraps this with additional functionality.

**Sources:** [crates/language/src/buffer.rs95-134](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/buffer.rs#L95-L134>) [crates/multi_buffer/src/multi_buffer.rs53-61](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/multi_buffer.rs#L53-L61>)

## Buffer: Language-Aware Text Container

The `Buffer` struct adds language intelligence features on top of `TextBuffer`:


**Sources:** [crates/language/src/buffer.rs95-134](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/buffer.rs#L95-L134>)

### Key Buffer Components

#### File Association


The `File` trait provides access to file path, worktree information, and disk operations for both local and remote files.

**Sources:** [crates/language/src/buffer.rs99-105](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/buffer.rs#L99-L105>) [crates/language/src/buffer.rs375-413](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/buffer.rs#L375-L413>)

#### Language and Syntax


The `SyntaxMap` maintains tree-sitter syntax trees for syntax highlighting and language features. Parsing happens asynchronously and is tracked through the `parse_status` watch channel.

**Sources:** [crates/language/src/buffer.rs110-117](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/buffer.rs#L110-L117>) [crates/language/src/syntax_map.rs24-36](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/syntax_map.rs#L24-L36>)

#### Diagnostics


Each language server can provide its own set of diagnostics. The `DiagnosticSet` is a sum tree that efficiently stores diagnostics keyed by position.

**Sources:** [crates/language/src/buffer.rs119-121](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/buffer.rs#L119-L121>) [crates/language/src/diagnostic_set.rs1-15](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/diagnostic_set.rs#L1-L15>)

### BufferSnapshot: Immutable View

`BufferSnapshot` provides an immutable, cheaply cloneable view of a buffer at a specific point in time:


Snapshots are used extensively throughout Zed to provide consistent views of buffer state during rendering and operations, even as the buffer continues to be edited.

**Sources:** [crates/language/src/buffer.rs179-188](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/buffer.rs#L179-L188>)

## MultiBuffer: Multi-File Views

The `MultiBuffer` allows displaying and editing multiple buffers or excerpts of buffers in a single view. This is essential for features like multi-buffer search results, project-wide find/replace, and git diff views.


**Sources:** [crates/multi_buffer/src/multi_buffer.rs70-98](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/multi_buffer.rs#L70-L98>)

### Excerpts: Buffer Slices

An `Excerpt` represents a contiguous slice of a buffer displayed in the multibuffer:

Field| Type| Purpose  
---|---|---  
`id`| `ExcerptId`| Unique identifier  
`locator`| `Locator`| Position in multibuffer ordering  
`buffer_id`| `BufferId`| Source buffer  
`buffer`| `BufferSnapshot`| Snapshot of source  
`range`| `ExcerptRange<Anchor>`| Range in source buffer  
`text_summary`| `TextSummary`| Cached text metrics  
  
The `ExcerptRange` contains both a `context` range (the full range available for expansion) and a `primary` range (the currently displayed portion).

**Sources:** [crates/multi_buffer/src/multi_buffer.rs676-693](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/multi_buffer.rs#L676-L693>)

### MultiBufferSnapshot

The `MultiBufferSnapshot` maintains the current state of all excerpts:


The `excerpts` sum tree provides efficient lookups by offset, point, or excerpt ID. The `diff_transforms` tree handles the display of deleted diff hunks.

**Sources:** [crates/multi_buffer/src/multi_buffer.rs546-564](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/multi_buffer.rs#L546-L564>)

## Anchors: Stable Positions

Anchors provide stable references to positions in buffers that automatically adjust as text is edited:


### Anchor Properties

A `text::Anchor` contains:

  * `timestamp`: The Lamport timestamp when created
  * `offset`: The byte offset in the buffer
  * `bias`: Whether to move with insertions (`Left` or `Right`)
  * `buffer_id`: Optional buffer identifier for validation


Anchors use CRDT versioning to maintain their validity across edits and collaboration.

**Sources:** [crates/multi_buffer/src/anchor.rs12-16](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/anchor.rs#L12-L16>) [crates/multi_buffer/src/anchor.rs35-81](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/anchor.rs#L35-L81>)

### Anchor Resolution

Anchors are resolved to concrete positions through the snapshot:


The `cmp` method handles the complexity of comparing anchors across different excerpts and diff base positions.

**Sources:** [crates/multi_buffer/src/anchor.rs83-131](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/anchor.rs#L83-L131>) [crates/multi_buffer/src/anchor.rs208-224](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/anchor.rs#L208-L224>)

## Positions and Coordinates

The buffer system uses multiple coordinate systems:

Type| Description| Use Case  
---|---|---  
`MultiBufferOffset`| Byte offset in multibuffer| Text operations  
`MultiBufferPoint`| Line/column in multibuffer| User-facing positions  
`MultiBufferRow`| Line number in multibuffer| Display  
`BufferOffset`| Byte offset in single buffer| Buffer-local operations  
`Point`| Line/column in single buffer| Buffer-local positions  
`Anchor`| Stable reference| Persistent positions  
  
### Conversion Between Coordinate Systems


All conversions require a `MultiBufferSnapshot` reference to resolve the current state.

**Sources:** [crates/multi_buffer/src/multi_buffer.rs192-256](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/multi_buffer.rs#L192-L256>) [crates/multi_buffer/src/multi_buffer.rs505-513](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/multi_buffer.rs#L505-L513>)

## Text Representation: Rope

The underlying text storage uses a Rope data structure, which is a B-tree of text chunks that provides:

  * **Efficient random access** : O(log n) for position lookups
  * **Efficient insertions/deletions** : O(log n) for edits
  * **Efficient slicing** : Extract substrings without copying
  * **Chunk iteration** : Process text in efficient chunks


The `Rope` maintains summary information at each node for quick calculations of:

  * Total length in bytes
  * Total length in UTF-16 code units
  * Line count
  * Longest line length


**Sources:** [crates/language/src/buffer.rs95-96](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/buffer.rs#L95-L96>) [crates/multi_buffer/src/multi_buffer.rs705-727](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/multi_buffer.rs#L705-L727>)

## Operations and Synchronization

Buffer edits are represented as `Operation` enums that can be applied to remote replicas:


**Sources:** [crates/language/src/buffer.rs295-340](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/buffer.rs#L295-L340>) [crates/language/src/buffer.rs343-372](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/buffer.rs#L343-L372>)

### Operation Queue and Deferred Operations

Buffers maintain an `OperationQueue` for operations received out of order:


When a buffer receives an operation that depends on operations it hasn't seen yet (based on Lamport timestamps), it stores the operation in the queue until dependencies arrive.

**Sources:** [crates/language/src/buffer.rs125](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/buffer.rs#L125-L125>)

### Transaction Grouping

Edits can be grouped into transactions for unified undo/redo:


Transactions have configurable grouping intervals. Related edits within the interval are treated as a single undoable unit.

**Sources:** [crates/language/src/buffer.rs107-108](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/buffer.rs#L107-L108>) [crates/editor/src/editor_tests.rs210-318](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor_tests.rs#L210-L318>)

## Buffer Events

The buffer system uses a comprehensive event model:


**Sources:** [crates/language/src/buffer.rs343-372](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/buffer.rs#L343-L372>)

### MultiBuffer Events

`MultiBuffer` emits higher-level events about excerpt changes:

Event| When Fired  
---|---  
`ExcerptsAdded`| New excerpts inserted  
`ExcerptsRemoved`| Excerpts deleted  
`ExcerptsExpanded`| Excerpt ranges expanded  
`ExcerptsEdited`| Text within excerpts changed  
`DiffHunksToggled`| Diff hunks expanded/collapsed  
`Edited`| Any text change  
`TransactionUndone`| Undo operation  
  
**Sources:** [crates/multi_buffer/src/multi_buffer.rs107-139](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/multi_buffer.rs#L107-L139>)

## Diff Integration

The `BufferDiff` entity tracks changes between the buffer and its git base:


**Sources:** [crates/buffer_diff/src/buffer_diff.rs23-43](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/buffer_diff/src/buffer_diff.rs#L23-L43>)

### Diff Hunks

A `DiffHunk` represents a contiguous changed region:


The `secondary_status` indicates staging state:

  * `NoSecondaryHunk`: Fully staged
  * `HasSecondaryHunk`: Unstaged
  * `OverlapsWithSecondaryHunk`: Partially staged


**Sources:** [crates/buffer_diff/src/buffer_diff.rs75-88](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/buffer_diff/src/buffer_diff.rs#L75-L88>) [crates/buffer_diff/src/buffer_diff.rs58-72](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/buffer_diff/src/buffer_diff.rs#L58-L72>)

### MultiBufferDiffHunk

For multibuffers, diff hunks include excerpt information:


**Sources:** [crates/multi_buffer/src/multi_buffer.rs142-158](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/multi_buffer.rs#L142-L158>)

## Buffer Capabilities and Permissions

Buffers have a `Capability` enum that controls editing permissions:


This is essential for:

  * Remote buffers in read-only mode
  * Protected files
  * Buffers opened in diff/preview mode


The capability can change during buffer lifetime via `BufferEvent::CapabilityChanged`.

**Sources:** [crates/language/src/buffer.rs83-89](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/buffer.rs#L83-L89>) [crates/language/src/buffer.rs126](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/buffer.rs#L126-L126>)

## Singleton vs. Multi-Buffer Mode

A `MultiBuffer` can operate in two modes:

### Singleton Mode


Contains exactly one buffer with one excerpt covering the entire buffer. Used for normal file editing. Provides optimizations since excerpt boundaries don't need to be considered.

### Multi-Buffer Mode


Contains multiple excerpts from one or more buffers. Used for:

  * Search results across multiple files
  * Multi-buffer find/replace
  * Git diff views showing multiple files
  * Project diagnostics panel


**Sources:** [crates/multi_buffer/src/multi_buffer.rs87](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/multi_buffer.rs#L87-L87>) [crates/multi_buffer/src/multi_buffer.rs1438-1475](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/multi_buffer.rs#L1438-L1475>)

## Buffer Lifecycle


**Sources:** [crates/language/src/buffer.rs343-372](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/buffer.rs#L343-L372>) [crates/multi_buffer/src/multi_buffer.rs107-139](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/multi_buffer.rs#L107-L139>)

## Performance Characteristics

The buffer system is optimized for:

Operation| Complexity| Notes  
---|---|---  
Text insertion/deletion| O(log n)| Via rope B-tree  
Anchor resolution| O(log n)| Via sum tree lookup  
Syntax tree update| O(affected nodes)| Incremental parsing  
Snapshot creation| O(1)| Arc cloning  
Excerpt lookup by offset| O(log m)| Where m = excerpt count  
Diff hunk lookup| O(log h)| Where h = hunk count  
  
The extensive use of sum trees, rope data structures, and immutable snapshots enables efficient operations even with large files and many excerpts.

**Sources:** [crates/multi_buffer/src/multi_buffer.rs546-705](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/multi_buffer.rs#L546-L705>) [crates/language/src/buffer.rs179-188](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/buffer.rs#L179-L188>)

Dismiss

Refresh this wiki

This wiki was recently refreshed. Please wait 7 days to refresh again.

### On this page

  * [Buffer System and Text Storage](<#buffer-system-and-text-storage>)
  * [Architecture Overview](<#architecture-overview>)
  * [TextBuffer: CRDT-Based Text Storage](<#textbuffer-crdt-based-text-storage>)
  * [Buffer: Language-Aware Text Container](<#buffer-language-aware-text-container>)
  * [Key Buffer Components](<#key-buffer-components>)
  * [File Association](<#file-association>)
  * [Language and Syntax](<#language-and-syntax>)
  * [Diagnostics](<#diagnostics>)
  * [BufferSnapshot: Immutable View](<#buffersnapshot-immutable-view>)
  * [MultiBuffer: Multi-File Views](<#multibuffer-multi-file-views>)
  * [Excerpts: Buffer Slices](<#excerpts-buffer-slices>)
  * [MultiBufferSnapshot](<#multibuffersnapshot>)
  * [Anchors: Stable Positions](<#anchors-stable-positions>)
  * [Anchor Properties](<#anchor-properties>)
  * [Anchor Resolution](<#anchor-resolution>)
  * [Positions and Coordinates](<#positions-and-coordinates>)
  * [Conversion Between Coordinate Systems](<#conversion-between-coordinate-systems>)
  * [Text Representation: Rope](<#text-representation-rope>)
  * [Operations and Synchronization](<#operations-and-synchronization>)
  * [Operation Queue and Deferred Operations](<#operation-queue-and-deferred-operations>)
  * [Transaction Grouping](<#transaction-grouping>)
  * [Buffer Events](<#buffer-events>)
  * [MultiBuffer Events](<#multibuffer-events>)
  * [Diff Integration](<#diff-integration>)
  * [Diff Hunks](<#diff-hunks>)
  * [MultiBufferDiffHunk](<#multibufferdiffhunk>)
  * [Buffer Capabilities and Permissions](<#buffer-capabilities-and-permissions>)
  * [Singleton vs. Multi-Buffer Mode](<#singleton-vs-multi-buffer-mode>)
  * [Singleton Mode](<#singleton-mode>)
  * [Multi-Buffer Mode](<#multi-buffer-mode>)
  * [Buffer Lifecycle](<#buffer-lifecycle>)
  * [Performance Characteristics](<#performance-characteristics>)
