<!-- Source: https://deepwiki.com/zed-industries/zed/5.3-buffer-store -->

# 5.3 Buffer Store

Loading...

Index your code with Devin

[DeepWiki](</>)

[DeepWiki](</>)

[zed-industries/zed ](<https://github.com/zed-industries/zed> "Open repository")

Index your code with

Devin

Edit WikiShare

Loading...

Last indexed: 16 December 2025 ([4109c9](<https://github.com/zed-industries/zed/commits/4109c9dd>))

  * [Overview](</zed-industries/zed/1-overview>)
  * [Core Architecture](</zed-industries/zed/2-core-architecture>)
  * [Application Initialization and Lifecycle](</zed-industries/zed/2.1-application-initialization-and-lifecycle>)
  * [GPUI Framework](</zed-industries/zed/2.2-gpui-framework>)
  * [Window and Platform Abstraction](</zed-industries/zed/2.3-window-and-platform-abstraction>)
  * [Event Flow and Input Handling](</zed-industries/zed/2.4-event-flow-and-input-handling>)
  * [Keybinding and Action System](</zed-industries/zed/2.5-keybinding-and-action-system>)
  * [Focus Management and Hit Testing](</zed-industries/zed/2.6-focus-management-and-hit-testing>)
  * [Editor Architecture](</zed-industries/zed/3-editor-architecture>)
  * [Editor Component and UI](</zed-industries/zed/3.1-editor-component-and-ui>)
  * [Buffer System and Text Storage](</zed-industries/zed/3.2-buffer-system-and-text-storage>)
  * [Display Pipeline and Rendering](</zed-industries/zed/3.3-display-pipeline-and-rendering>)
  * [Selections and Editing Operations](</zed-industries/zed/3.4-selections-and-editing-operations>)
  * [Code Intelligence Integration](</zed-industries/zed/3.5-code-intelligence-integration>)
  * [Diff Integration](</zed-industries/zed/3.6-diff-integration>)
  * [Workspace and Panel System](</zed-industries/zed/4-workspace-and-panel-system>)
  * [Workspace Organization](</zed-industries/zed/4.1-workspace-organization>)
  * [Item System and Lifecycle](</zed-industries/zed/4.2-item-system-and-lifecycle>)
  * [Pane Management](</zed-industries/zed/4.3-pane-management>)
  * [Search System](</zed-industries/zed/4.4-search-system>)
  * [Project Management](</zed-industries/zed/5-project-management>)
  * [Project Orchestration](</zed-industries/zed/5.1-project-orchestration>)
  * [Worktree and File System](</zed-industries/zed/5.2-worktree-and-file-system>)
  * [Buffer Store](</zed-industries/zed/5.3-buffer-store>)
  * [Language Intelligence](</zed-industries/zed/6-language-intelligence>)
  * [LSP Store Architecture](</zed-industries/zed/6.1-lsp-store-architecture>)
  * [Language Server Lifecycle](</zed-industries/zed/6.2-language-server-lifecycle>)
  * [Completions and Diagnostics](</zed-industries/zed/6.3-completions-and-diagnostics>)
  * [Multi-Language Server Coordination](</zed-industries/zed/6.4-multi-language-server-coordination>)
  * [Settings and Configuration](</zed-industries/zed/7-settings-and-configuration>)
  * [Settings Store and Layering](</zed-industries/zed/7.1-settings-store-and-layering>)
  * [Settings UI](</zed-industries/zed/7.2-settings-ui>)
  * [Settings Migration](</zed-industries/zed/7.3-settings-migration>)
  * [Keymap System](</zed-industries/zed/7.4-keymap-system>)
  * [Git Integration](</zed-industries/zed/8-git-integration>)
  * [Git Panel and UI](</zed-industries/zed/8.1-git-panel-and-ui>)
  * [Git Store and State Management](</zed-industries/zed/8.2-git-store-and-state-management>)
  * [Repository Operations](</zed-industries/zed/8.3-repository-operations>)
  * [Diff System](</zed-industries/zed/8.4-diff-system>)
  * [Terminal and Task Execution](</zed-industries/zed/9-terminal-and-task-execution>)
  * [Terminal Core](</zed-industries/zed/9.1-terminal-core>)
  * [Terminal View and Rendering](</zed-industries/zed/9.2-terminal-view-and-rendering>)
  * [Task System](</zed-industries/zed/9.3-task-system>)
  * [Vim Mode](</zed-industries/zed/10-vim-mode>)
  * [Mode State Machine](</zed-industries/zed/10.1-mode-state-machine>)
  * [Operators, Motions, and Objects](</zed-industries/zed/10.2-operators-motions-and-objects>)
  * [Visual Mode](</zed-industries/zed/10.3-visual-mode>)
  * [Helix Mode Integration](</zed-industries/zed/10.4-helix-mode-integration>)
  * [AI Agent System](</zed-industries/zed/11-ai-agent-system>)
  * [Agent Communication Protocol (ACP)](</zed-industries/zed/11.1-agent-communication-protocol-\(acp\)>)
  * [Agent UI and Thread Management](</zed-industries/zed/11.2-agent-ui-and-thread-management>)
  * [Agent Connection and Implementations](</zed-industries/zed/11.3-agent-connection-and-implementations>)
  * [Tool System](</zed-industries/zed/11.4-tool-system>)
  * [Mention System and Context](</zed-industries/zed/11.5-mention-system-and-context>)
  * [Legacy Agent Thread System](</zed-industries/zed/11.6-legacy-agent-thread-system>)
  * [Remote Development and Collaboration](</zed-industries/zed/12-remote-development-and-collaboration>)
  * [Local vs Remote Architecture](</zed-industries/zed/12.1-local-vs-remote-architecture>)
  * [Remote Project Architecture](</zed-industries/zed/12.2-remote-project-architecture>)
  * [Collaboration Features](</zed-industries/zed/12.3-collaboration-features>)
  * [CRDT and Synchronization](</zed-industries/zed/12.4-crdt-and-synchronization>)


Menu

# Buffer Store

Relevant source files

  * [crates/collab/src/tests/editor_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/collab/src/tests/editor_tests.rs>)
  * [crates/collab/src/tests/integration_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/collab/src/tests/integration_tests.rs>)
  * [crates/collab/src/tests/remote_editing_collaboration_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/collab/src/tests/remote_editing_collaboration_tests.rs>)
  * [crates/copilot/Cargo.toml](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/copilot/Cargo.toml>)
  * [crates/copilot/src/copilot.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/copilot/src/copilot.rs>)
  * [crates/copilot/src/sign_in.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/copilot/src/sign_in.rs>)
  * [crates/editor/src/hover_links.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/hover_links.rs>)
  * [crates/fs/src/fs.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/fs/src/fs.rs>)
  * [crates/git/src/status.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git/src/status.rs>)
  * [crates/lsp/src/lsp.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/lsp/src/lsp.rs>)
  * [crates/prettier/src/prettier.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/prettier/src/prettier.rs>)
  * [crates/prettier/src/prettier_server.js](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/prettier/src/prettier_server.js>)
  * [crates/project/src/buffer_store.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs>)
  * [crates/project/src/lsp_command.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_command.rs>)
  * [crates/project/src/lsp_store.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs>)
  * [crates/project/src/prettier_store.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/prettier_store.rs>)
  * [crates/project/src/project.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project.rs>)
  * [crates/project/src/project_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project_tests.rs>)
  * [crates/project/src/worktree_store.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/worktree_store.rs>)
  * [crates/proto/proto/lsp.proto](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/proto/proto/lsp.proto>)
  * [crates/remote_server/src/headless_project.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/remote_server/src/headless_project.rs>)
  * [crates/remote_server/src/remote_editing_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/remote_server/src/remote_editing_tests.rs>)
  * [crates/worktree/src/worktree.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/worktree/src/worktree.rs>)
  * [crates/worktree/src/worktree_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/worktree/src/worktree_tests.rs>)


## Purpose and Scope

The Buffer Store manages the lifecycle and synchronization of all open text buffers within a project. It handles buffer creation, loading from disk or remote sources, saving, and deallocation. The Buffer Store maintains mappings between file paths and buffer instances, coordinates buffer state across local and remote scenarios, and manages buffer sharing in collaborative editing sessions.

For information about the underlying text data structures and CRDT operations, see [Buffer System and Text Storage](</zed-industries/zed/3.2-buffer-system-and-text-storage>). For language server integration with buffers, see [LSP Store Architecture](</zed-industries/zed/6.1-lsp-store-architecture>).

Sources: [crates/project/src/buffer_store.rs1-41](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L1-L41>)

* * *

## Core Architecture

### BufferStore Entity Structure


The `BufferStore` entity exists in one of two states:

State| Purpose| Key Data  
---|---|---  
**Local**|  Direct file system access| `local_buffer_ids_by_entry_id`: Maps worktree entries to buffers  
**Remote**|  RPC-based buffer operations| `upstream_client`: Connection to remote project  
`loading_remote_buffers_by_id`: Buffers being streamed  
  
Sources: [crates/project/src/buffer_store.rs30-68](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L30-L68>)

* * *

### Buffer Tracking and Lifecycle


The `loading_buffers` field prevents duplicate loading efforts: when multiple callers request the same path, they share a single `Task` that loads the buffer once.

Sources: [crates/project/src/buffer_store.rs34](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L34-L34>) [crates/project/src/buffer_store.rs70-73](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L70-L73>)

* * *

## Buffer Identification and Mapping

### Path-to-Buffer Resolution


The mapping works as follows:

  1. **ProjectPath** → `path_to_buffer_id` → **BufferId** : Locate which buffer corresponds to a file
  2. **BufferId** → `opened_buffers` → **OpenBuffer** : Get the buffer state
  3. **OpenBuffer::Complete** contains a `WeakEntity<Buffer>`: The actual buffer instance


Sources: [crates/project/src/buffer_store.rs36-37](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L36-L37>)

* * *

### OpenBuffer States

The `OpenBuffer` enum tracks buffer readiness:

State| Description| Data  
---|---|---  
**Complete**|  Buffer fully loaded and active| `WeakEntity<Buffer>`: Reference to the buffer entity  
**Operations**|  Buffer exists but operations are queued| `Vec<Operation>`: Pending CRDT operations to apply  
  
When a buffer is being synchronized remotely, it may start as `Operations` to queue edits that arrive before the full buffer state is received.

Sources: [crates/project/src/buffer_store.rs70-73](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L70-L73>)

* * *

## Local Buffer Operations

### Opening Local Buffers


For local buffers, the process:

  1. Check if already open via `path_to_buffer_id`
  2. Check if loading via `loading_buffers` (share the task if so)
  3. Get entry metadata from worktree
  4. Load file contents from file system
  5. Create `Buffer` entity with contents and file metadata
  6. Register buffer in tracking maps
  7. Emit `BufferStoreEvent::BufferOpened`


Sources: [crates/project/src/buffer_store.rs364-477](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L364-L477>) [crates/project/src/buffer_store.rs591-664](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L591-L664>)

* * *

### Creating New Local Buffers


New buffers (not associated with files) are created with:

  * Empty text content
  * No file association
  * Optional exclusion from project search if marked non-searchable
  * Immediately registered in `opened_buffers`


Sources: [crates/project/src/buffer_store.rs478-492](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L478-L492>)

* * *

### Saving Local Buffers

The save operation flow:

  1. **Determine target path** : Use buffer's current file or caller-provided path
  2. **Get worktree** : Resolve which worktree contains the target path
  3. **Write to file system** : Use `Worktree::write_file()` with rope contents
  4. **Update buffer state** : Mark as saved with new modification time
  5. **Update tracking** : If path changed, update `path_to_buffer_id` mapping
  6. **Emit event** : `BufferStoreEvent::BufferChangedFilePath` if path changed


Sources: [crates/project/src/buffer_store.rs493-563](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L493-L563>)

* * *

## Remote Buffer Operations

### Remote Buffer Architecture


Remote buffer operations involve message passing between guest and host:

Operation| Guest Action| Host Action| Protocol Message  
---|---|---|---  
**Open buffer**|  Send path request| Load from FS| `proto::OpenBufferByPath`  
**Create buffer**|  Send create request| Allocate buffer| `proto::OpenNewBuffer`  
**Save buffer**|  Send save request| Write to FS| `proto::SaveBuffer`  
  
Sources: [crates/project/src/buffer_store.rs54-62](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L54-L62>)

* * *

### Remote Buffer Loading Protocol


The chunked protocol allows large buffers to be streamed incrementally, avoiding memory spikes and timeout issues. The guest buffer starts with initial state, then applies operations from each chunk.

Sources: [crates/project/src/buffer_store.rs156-245](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L156-L245>)

* * *

### Wait-for-Remote-Buffer Pattern

Multiple callers may request the same remote buffer. The `wait_for_remote_buffer()` method coordinates:


This pattern ensures all callers receive the same buffer instance without duplicate RPC requests.

Sources: [crates/project/src/buffer_store.rs103-123](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L103-L123>)

* * *

## Collaborative Buffer Sharing

### Shared Buffer Management

When a project is shared in collaboration, the buffer store tracks which buffers are shared with which peers:


The `SharedBuffer` struct contains:

  * `buffer`: The `Entity<Buffer>` being shared
  * `lsp_handle`: Optional LSP registration handle to ensure language server notifications reach the buffer


When a peer leaves, their entry in `shared_buffers` is removed, which unregisters LSP notifications and cleans up resources.

Sources: [crates/project/src/buffer_store.rs39](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L39-L39>) [crates/project/src/buffer_store.rs43-47](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L43-L47>)

* * *

### Buffer Sharing Protocol


The `OpenLspBufferHandle` ensures that while a buffer is shared, the LSP store maintains active subscriptions to language server events (diagnostics, completions, etc.) for that buffer.

Sources: [crates/project/src/buffer_store.rs769-820](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L769-L820>) [crates/project/src/buffer_store.rs851-867](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L851-L867>)

* * *

## Event System

### BufferStoreEvent Types

The buffer store emits events to notify other system components of buffer lifecycle changes:

Event| When Emitted| Purpose  
---|---|---  
**BufferAdded**|  New buffer created| Notify subscriptions that a buffer exists  
**BufferOpened**|  Buffer loaded from file| Signal buffer ready for editing, with file path  
**SharedBufferClosed**|  Peer stops sharing buffer| Clean up collaboration state  
**BufferDropped**|  Buffer deallocated| Remove from caches and subscriptions  
**BufferChangedFilePath**|  Buffer saved to new path| Update path-based lookups  
  
Sources: [crates/project/src/buffer_store.rs75-87](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L75-L87>)

* * *

### Event Flow Example


The event system decouples buffer lifecycle management from language services and git integration, allowing each store to react independently.

Sources: [crates/project/src/project.rs1-352](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project.rs#L1-L352>) [crates/project/src/lsp_store.rs1-43](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L1-L43>)

* * *

## Buffer-Entry Coordination

### Local Buffer-to-Entry Mapping

In local mode, the buffer store maintains a bidirectional link between worktree entries and buffers:

  * `local_buffer_ids_by_entry_id`: Maps `ProjectEntryId` → `BufferId`
  * Subscribed to `WorktreeStoreEvent` to detect entry deletions
  * When entry deleted: drop corresponding buffer and emit `BufferStoreEvent::BufferDropped`


This ensures that if a file is deleted from disk (and removed from the worktree), any open buffer for that file is also cleaned up.

Sources: [crates/project/src/buffer_store.rs63-68](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L63-L68>) [crates/project/src/buffer_store.rs684-741](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L684-L741>)

* * *

## ProjectTransaction Management

### Transaction Aggregation

A `ProjectTransaction` groups related edits across multiple buffers:


The `deserialize_project_transaction()` method handles remote transactions:

  1. Wait for all referenced buffers to load
  2. Deserialize each transaction from protobuf
  3. Wait for each transaction's edits to be synced (via `wait_for_edits()`)
  4. Optionally push to history for undo/redo


Sources: [crates/project/src/buffer_store.rs89-99](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L89-L99>) [crates/project/src/buffer_store.rs254-289](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L254-L289>)

* * *

## Searchability Control

### Non-Searchable Buffers

Certain buffers are excluded from project-wide search:

  * Buffers created programmatically (not from files)
  * Temporary scratch buffers
  * Buffers explicitly marked non-searchable


This prevents internal/temporary buffers from cluttering search results.

Sources: [crates/project/src/buffer_store.rs40](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L40-L40>) [crates/project/src/buffer_store.rs478-492](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L478-L492>)

* * *

## Integration Points

### Relationship with Other Stores


The buffer store integrates with:

  * **WorktreeStore** : Resolves file paths to worktree entries, loads file contents
  * **LspStore** : Notifies of buffer lifecycle for LSP registration
  * **GitStore** : Provides buffers for diff computation
  * **Project** : Central event bus for coordination


Sources: [crates/project/src/project.rs183-220](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project.rs#L183-L220>) [crates/project/src/lsp_store.rs254-299](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L254-L299>)

* * *

## Implementation Details

### Buffer Registration

When a buffer is opened or created, `register_buffer()` performs bookkeeping:

  1. Create `BufferOrderedMessage` sender for synchronizing operations
  2. Subscribe to `BufferEvent::Operation` for replication
  3. Add to `opened_buffers` with `OpenBuffer::Complete`
  4. If has file path: add to `path_to_buffer_id`
  5. Emit `BufferStoreEvent::BufferAdded`


The operation synchronization ensures buffer edits are sent to remote peers in the correct order.

Sources: [crates/project/src/buffer_store.rs869-965](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L869-L965>)

* * *

### Downstream Client Synchronization

When acting as a host for remote clients:

  * `downstream_client`: Optional `(AnyProtoClient, project_id)` for sending updates
  * On buffer registration: send `proto::CreateBufferForPeer` with full state
  * On buffer operations: forward via RPC to guests
  * On save: send `proto::BufferSaved` notification


The buffer store coordinates with the RPC layer to stream buffer state and incremental updates.

Sources: [crates/project/src/buffer_store.rs38](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L38-L38>) [crates/project/src/buffer_store.rs742-820](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L742-L820>)

* * *

## Summary

The Buffer Store serves as the central registry for all open text buffers in a project, managing:

  * **Lifecycle** : Opening from files, creating new, saving, closing
  * **Identity** : Mapping paths to buffers, tracking buffer IDs
  * **Synchronization** : Local file system I/O or remote RPC operations
  * **Collaboration** : Sharing buffers with remote peers, coordinating LSP registration
  * **Events** : Broadcasting buffer changes to dependent systems


It operates in two modes (local and remote) with different implementations but a unified interface, enabling seamless local editing and remote collaboration scenarios.

Sources: [crates/project/src/buffer_store.rs1-966](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L1-L966>)

Dismiss

Refresh this wiki

This wiki was recently refreshed. Please wait 7 days to refresh again.

### On this page

  * [Buffer Store](<#buffer-store>)
  * [Purpose and Scope](<#purpose-and-scope>)
  * [Core Architecture](<#core-architecture>)
  * [BufferStore Entity Structure](<#bufferstore-entity-structure>)
  * [Buffer Tracking and Lifecycle](<#buffer-tracking-and-lifecycle>)
  * [Buffer Identification and Mapping](<#buffer-identification-and-mapping>)
  * [Path-to-Buffer Resolution](<#path-to-buffer-resolution>)
  * [OpenBuffer States](<#openbuffer-states>)
  * [Local Buffer Operations](<#local-buffer-operations>)
  * [Opening Local Buffers](<#opening-local-buffers>)
  * [Creating New Local Buffers](<#creating-new-local-buffers>)
  * [Saving Local Buffers](<#saving-local-buffers>)
  * [Remote Buffer Operations](<#remote-buffer-operations>)
  * [Remote Buffer Architecture](<#remote-buffer-architecture>)
  * [Remote Buffer Loading Protocol](<#remote-buffer-loading-protocol>)
  * [Wait-for-Remote-Buffer Pattern](<#wait-for-remote-buffer-pattern>)
  * [Collaborative Buffer Sharing](<#collaborative-buffer-sharing>)
  * [Shared Buffer Management](<#shared-buffer-management>)
  * [Buffer Sharing Protocol](<#buffer-sharing-protocol>)
  * [Event System](<#event-system>)
  * [BufferStoreEvent Types](<#bufferstoreevent-types>)
  * [Event Flow Example](<#event-flow-example>)
  * [Buffer-Entry Coordination](<#buffer-entry-coordination>)
  * [Local Buffer-to-Entry Mapping](<#local-buffer-to-entry-mapping>)
  * [ProjectTransaction Management](<#projecttransaction-management>)
  * [Transaction Aggregation](<#transaction-aggregation>)
  * [Searchability Control](<#searchability-control>)
  * [Non-Searchable Buffers](<#non-searchable-buffers>)
  * [Integration Points](<#integration-points>)
  * [Relationship with Other Stores](<#relationship-with-other-stores>)
  * [Implementation Details](<#implementation-details>)
  * [Buffer Registration](<#buffer-registration>)
  * [Downstream Client Synchronization](<#downstream-client-synchronization>)
  * [Summary](<#summary>)
