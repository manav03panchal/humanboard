<!-- Source: https://deepwiki.com/zed-industries/zed/5.1-project-orchestration -->

# 5.1 Project Orchestration

Loading...

Index your code with Devin

[DeepWiki](</>)

[DeepWiki](</>)

[zed-industries/zed ](<https://github.com/zed-industries/zed> "Open repository")

Index your code with

Devin

Edit WikiShare

Loading...

Last indexed: 16 December 2025 ([4109c9](<https://github.com/zed-industries/zed/commits/4109c9dd>))

  * [Overview](</zed-industries/zed/1-overview>)
  * [Core Architecture](</zed-industries/zed/2-core-architecture>)
  * [Application Initialization and Lifecycle](</zed-industries/zed/2.1-application-initialization-and-lifecycle>)
  * [GPUI Framework](</zed-industries/zed/2.2-gpui-framework>)
  * [Window and Platform Abstraction](</zed-industries/zed/2.3-window-and-platform-abstraction>)
  * [Event Flow and Input Handling](</zed-industries/zed/2.4-event-flow-and-input-handling>)
  * [Keybinding and Action System](</zed-industries/zed/2.5-keybinding-and-action-system>)
  * [Focus Management and Hit Testing](</zed-industries/zed/2.6-focus-management-and-hit-testing>)
  * [Editor Architecture](</zed-industries/zed/3-editor-architecture>)
  * [Editor Component and UI](</zed-industries/zed/3.1-editor-component-and-ui>)
  * [Buffer System and Text Storage](</zed-industries/zed/3.2-buffer-system-and-text-storage>)
  * [Display Pipeline and Rendering](</zed-industries/zed/3.3-display-pipeline-and-rendering>)
  * [Selections and Editing Operations](</zed-industries/zed/3.4-selections-and-editing-operations>)
  * [Code Intelligence Integration](</zed-industries/zed/3.5-code-intelligence-integration>)
  * [Diff Integration](</zed-industries/zed/3.6-diff-integration>)
  * [Workspace and Panel System](</zed-industries/zed/4-workspace-and-panel-system>)
  * [Workspace Organization](</zed-industries/zed/4.1-workspace-organization>)
  * [Item System and Lifecycle](</zed-industries/zed/4.2-item-system-and-lifecycle>)
  * [Pane Management](</zed-industries/zed/4.3-pane-management>)
  * [Search System](</zed-industries/zed/4.4-search-system>)
  * [Project Management](</zed-industries/zed/5-project-management>)
  * [Project Orchestration](</zed-industries/zed/5.1-project-orchestration>)
  * [Worktree and File System](</zed-industries/zed/5.2-worktree-and-file-system>)
  * [Buffer Store](</zed-industries/zed/5.3-buffer-store>)
  * [Language Intelligence](</zed-industries/zed/6-language-intelligence>)
  * [LSP Store Architecture](</zed-industries/zed/6.1-lsp-store-architecture>)
  * [Language Server Lifecycle](</zed-industries/zed/6.2-language-server-lifecycle>)
  * [Completions and Diagnostics](</zed-industries/zed/6.3-completions-and-diagnostics>)
  * [Multi-Language Server Coordination](</zed-industries/zed/6.4-multi-language-server-coordination>)
  * [Settings and Configuration](</zed-industries/zed/7-settings-and-configuration>)
  * [Settings Store and Layering](</zed-industries/zed/7.1-settings-store-and-layering>)
  * [Settings UI](</zed-industries/zed/7.2-settings-ui>)
  * [Settings Migration](</zed-industries/zed/7.3-settings-migration>)
  * [Keymap System](</zed-industries/zed/7.4-keymap-system>)
  * [Git Integration](</zed-industries/zed/8-git-integration>)
  * [Git Panel and UI](</zed-industries/zed/8.1-git-panel-and-ui>)
  * [Git Store and State Management](</zed-industries/zed/8.2-git-store-and-state-management>)
  * [Repository Operations](</zed-industries/zed/8.3-repository-operations>)
  * [Diff System](</zed-industries/zed/8.4-diff-system>)
  * [Terminal and Task Execution](</zed-industries/zed/9-terminal-and-task-execution>)
  * [Terminal Core](</zed-industries/zed/9.1-terminal-core>)
  * [Terminal View and Rendering](</zed-industries/zed/9.2-terminal-view-and-rendering>)
  * [Task System](</zed-industries/zed/9.3-task-system>)
  * [Vim Mode](</zed-industries/zed/10-vim-mode>)
  * [Mode State Machine](</zed-industries/zed/10.1-mode-state-machine>)
  * [Operators, Motions, and Objects](</zed-industries/zed/10.2-operators-motions-and-objects>)
  * [Visual Mode](</zed-industries/zed/10.3-visual-mode>)
  * [Helix Mode Integration](</zed-industries/zed/10.4-helix-mode-integration>)
  * [AI Agent System](</zed-industries/zed/11-ai-agent-system>)
  * [Agent Communication Protocol (ACP)](</zed-industries/zed/11.1-agent-communication-protocol-\(acp\)>)
  * [Agent UI and Thread Management](</zed-industries/zed/11.2-agent-ui-and-thread-management>)
  * [Agent Connection and Implementations](</zed-industries/zed/11.3-agent-connection-and-implementations>)
  * [Tool System](</zed-industries/zed/11.4-tool-system>)
  * [Mention System and Context](</zed-industries/zed/11.5-mention-system-and-context>)
  * [Legacy Agent Thread System](</zed-industries/zed/11.6-legacy-agent-thread-system>)
  * [Remote Development and Collaboration](</zed-industries/zed/12-remote-development-and-collaboration>)
  * [Local vs Remote Architecture](</zed-industries/zed/12.1-local-vs-remote-architecture>)
  * [Remote Project Architecture](</zed-industries/zed/12.2-remote-project-architecture>)
  * [Collaboration Features](</zed-industries/zed/12.3-collaboration-features>)
  * [CRDT and Synchronization](</zed-industries/zed/12.4-crdt-and-synchronization>)


Menu

# Project Orchestration

Relevant source files

  * [crates/collab/src/tests/editor_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/collab/src/tests/editor_tests.rs>)
  * [crates/collab/src/tests/integration_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/collab/src/tests/integration_tests.rs>)
  * [crates/collab/src/tests/remote_editing_collaboration_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/collab/src/tests/remote_editing_collaboration_tests.rs>)
  * [crates/copilot/Cargo.toml](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/copilot/Cargo.toml>)
  * [crates/copilot/src/copilot.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/copilot/src/copilot.rs>)
  * [crates/copilot/src/sign_in.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/copilot/src/sign_in.rs>)
  * [crates/editor/src/hover_links.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/hover_links.rs>)
  * [crates/fs/src/fs.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/fs/src/fs.rs>)
  * [crates/git/src/status.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git/src/status.rs>)
  * [crates/lsp/src/lsp.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/lsp/src/lsp.rs>)
  * [crates/prettier/src/prettier.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/prettier/src/prettier.rs>)
  * [crates/prettier/src/prettier_server.js](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/prettier/src/prettier_server.js>)
  * [crates/project/src/buffer_store.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs>)
  * [crates/project/src/lsp_command.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_command.rs>)
  * [crates/project/src/lsp_store.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs>)
  * [crates/project/src/prettier_store.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/prettier_store.rs>)
  * [crates/project/src/project.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project.rs>)
  * [crates/project/src/project_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project_tests.rs>)
  * [crates/project/src/worktree_store.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/worktree_store.rs>)
  * [crates/proto/proto/lsp.proto](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/proto/proto/lsp.proto>)
  * [crates/remote_server/src/headless_project.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/remote_server/src/headless_project.rs>)
  * [crates/remote_server/src/remote_editing_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/remote_server/src/remote_editing_tests.rs>)
  * [crates/worktree/src/worktree.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/worktree/src/worktree.rs>)
  * [crates/worktree/src/worktree_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/worktree/src/worktree_tests.rs>)


The `Project` entity serves as the central orchestrator in Zed's architecture, coordinating all project-level services and state. It manages specialized stores (BufferStore, LspStore, WorktreeStore, GitStore, etc.) and provides a unified interface for file operations, language intelligence, version control, and collaborative editing. This page covers the Project's coordination responsibilities and architecture.

For detailed information about file system management, see [Worktree and File System](</zed-industries/zed/5.2-worktree-and-file-system>). For buffer lifecycle and synchronization, see [Buffer Store](</zed-industries/zed/5.3-buffer-store>). For language server integration, see [LSP Store Architecture](</zed-industries/zed/6.1-lsp-store-architecture>).

## Project Entity Structure

The `Project` struct acts as a container and coordinator for multiple specialized subsystems, each implemented as a separate GPUI entity.


**Sources:** [crates/project/src/project.rs183-220](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project.rs#L183-L220>)

## Project State Machine

The Project operates in one of three distinct states, determining its capabilities and behavior:

State| Description| Capabilities  
---|---|---  
`Local`| Single-player mode| Full local access to file system and language servers  
`Shared`| Host in multiplayer| Shares project to remote clients via RPC  
`Remote`| Guest in multiplayer| Proxies all operations through RPC to host  
  

**Sources:** [crates/project/src/project.rs271-283](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project.rs#L271-L283>)

The state is represented by the `ProjectClientState` enum:
    
    
    ProjectClientState::Local                           // Single-player
    ProjectClientState::Shared { remote_id }            // Multi-player host
    ProjectClientState::Remote { remote_id, replica_id, capability, ... }  // Multi-player guest
    

**Sources:** [crates/project/src/project.rs271-283](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project.rs#L271-L283>)

## Initialization and Store Coordination

### Local Project Initialization

When creating a local project, the Project orchestrates a specific initialization sequence to ensure dependencies between stores are satisfied:


**Sources:** [crates/project/src/project.rs286-543](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project.rs#L286-L543>) [crates/remote_server/src/headless_project.rs74-173](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/remote_server/src/headless_project.rs#L74-L173>)

The initialization order matters because:

  1. `WorktreeStore` must exist before `BufferStore` (buffers need worktree context)
  2. `BufferStore` must exist before `LspStore` (LSP notifications affect buffers)
  3. `GitStore` depends on both `WorktreeStore` and `BufferStore`
  4. `TaskStore` needs `WorktreeStore` and `ToolchainStore`


### Store Subscription Pattern

The Project subscribes to events from each store to coordinate cross-cutting concerns:


**Sources:** [crates/project/src/project.rs470-542](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project.rs#L470-L542>)

Key subscription handlers in `Project::local()`:

  * **WorktreeStoreEvent** : Propagated as `Event::WorktreeAdded`, `Event::WorktreeRemoved`
  * **BufferStoreEvent::BufferAdded** : Triggers LSP buffer registration
  * **LspStoreEvent::LanguageServerAdded** : Emitted as `Event::LanguageServerAdded`
  * **GitStoreEvent** : Updates git-related UI state


**Sources:** [crates/project/src/project.rs470-542](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project.rs#L470-L542>)

## Remote Project Architecture

Remote projects enable collaborative editing and SSH-based remote development through RPC communication:


**Sources:** [crates/project/src/project.rs1130-1257](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project.rs#L1130-L1257>) [crates/remote_server/src/headless_project.rs45-63](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/remote_server/src/headless_project.rs#L45-L63>)

### Remote Store Pattern

Each store implements both local and remote variants:

**WorktreeStore:**

  * `LocalWorktree`: Direct file system access with background scanning
  * `RemoteWorktree`: Receives updates via RPC from host's LocalWorktree


**BufferStore:**

  * `LocalBufferStore`: Manages buffers backed by local files
  * `RemoteBufferStore`: Proxies buffer operations to host, receives operations stream


**LspStore:**

  * `LocalLspStore`: Spawns and manages language server processes
  * `RemoteLspStore`: Forwards LSP requests to host, receives LSP responses


**Sources:** [crates/worktree/src/worktree.rs87-90](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/worktree/src/worktree.rs#L87-L90>) [crates/project/src/buffer_store.rs49-62](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs#L49-L62>) [crates/project/src/lsp_store.rs5-10](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L5-L10>)

### Project Sharing Workflow


**Sources:** [crates/project/src/project.rs1130-1257](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project.rs#L1130-L1257>) [crates/project/src/project.rs2026-2208](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project.rs#L2026-L2208>)

## Cross-Store Coordination Patterns

### Buffer Registration with Language Servers

When a buffer is opened, the Project coordinates between BufferStore and LspStore:


**Sources:** [crates/project/src/project.rs2402-2554](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project.rs#L2402-L2554>) [crates/project/src/lsp_store.rs2730-2940](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L2730-L2940>)

### Worktree Changes and Buffer Updates

When the file system changes, the Project ensures buffers stay synchronized:


**Sources:** [crates/project/src/project.rs3776-3865](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project.rs#L3776-L3865>) [crates/worktree/src/worktree.rs680-700](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/worktree/src/worktree.rs#L680-L700>)

### Language Server Lifecycle Management

The Project delegates language server management to LspStore but coordinates startup with worktrees:


**Sources:** [crates/project/src/lsp_store.rs359-570](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs#L359-L570>) [crates/project/src/project.rs1734-1936](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project.rs#L1734-L1936>)

## Event Propagation

The Project acts as an event hub, translating store-specific events into project-level events:

Store Event| Project Event| Purpose  
---|---|---  
`WorktreeStoreEvent::WorktreeAdded`| `Event::WorktreeAdded`| Notify UI of new worktree  
`LspStoreEvent::LanguageServerAdded`| `Event::LanguageServerAdded`| Update language server UI  
`LspStoreEvent::DiagnosticsUpdated`| `Event::DiagnosticsUpdated`| Refresh problem list  
`BufferStoreEvent::BufferOpened`| Internal coordination| Register with LSP  
`GitStoreEvent::RepositoryUpdated`| `Event::UpdatedGitRepositories`| Update git UI  
  
**Sources:** [crates/project/src/project.rs286-352](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project.rs#L286-L352>)

The `Project::Event` enum defines all events emitted:
    
    
    Event::LanguageServerAdded(LanguageServerId, LanguageServerName, Option<WorktreeId>)
    Event::LanguageServerRemoved(LanguageServerId)
    Event::WorktreeAdded(WorktreeId)
    Event::WorktreeRemoved(WorktreeId)
    Event::DiagnosticsUpdated { paths, language_server_id }
    Event::DiskBasedDiagnosticsStarted/Finished
    ...
    

**Sources:** [crates/project/src/project.rs286-352](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project.rs#L286-L352>)

## RPC Message Routing

For remote projects, the Project handles bidirectional RPC communication:


Key RPC handlers in Project:

  * `handle_open_buffer_by_path`: Routes to BufferStore
  * `handle_get_hover`: Routes to LspStore
  * `handle_get_completions`: Routes to LspStore
  * `handle_perform_code_action`: Routes to LspStore
  * `handle_search_project`: Coordinates search across worktrees


**Sources:** [crates/project/src/project.rs8168-8890](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project.rs#L8168-L8890>)

## Summary

The `Project` entity provides:

  1. **Centralized Coordination** : Single point of control for all project-level subsystems
  2. **State Management** : Manages Local/Shared/Remote states and transitions
  3. **Event Orchestration** : Translates and propagates events between stores
  4. **RPC Abstraction** : Handles remote operation proxying transparently
  5. **Lifecycle Management** : Coordinates initialization and shutdown of stores
  6. **Cross-Store Operations** : Implements operations requiring multiple stores


This architecture enables Zed to support both single-user local development and multi-user collaborative editing with the same core abstraction.

**Sources:** [crates/project/src/project.rs1-220](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project.rs#L1-L220>) [crates/remote_server/src/headless_project.rs45-173](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/remote_server/src/headless_project.rs#L45-L173>)

Dismiss

Refresh this wiki

This wiki was recently refreshed. Please wait 7 days to refresh again.

### On this page

  * [Project Orchestration](<#project-orchestration>)
  * [Project Entity Structure](<#project-entity-structure>)
  * [Project State Machine](<#project-state-machine>)
  * [Initialization and Store Coordination](<#initialization-and-store-coordination>)
  * [Local Project Initialization](<#local-project-initialization>)
  * [Store Subscription Pattern](<#store-subscription-pattern>)
  * [Remote Project Architecture](<#remote-project-architecture>)
  * [Remote Store Pattern](<#remote-store-pattern>)
  * [Project Sharing Workflow](<#project-sharing-workflow>)
  * [Cross-Store Coordination Patterns](<#cross-store-coordination-patterns>)
  * [Buffer Registration with Language Servers](<#buffer-registration-with-language-servers>)
  * [Worktree Changes and Buffer Updates](<#worktree-changes-and-buffer-updates>)
  * [Language Server Lifecycle Management](<#language-server-lifecycle-management>)
  * [Event Propagation](<#event-propagation>)
  * [RPC Message Routing](<#rpc-message-routing>)
  * [Summary](<#summary>)
