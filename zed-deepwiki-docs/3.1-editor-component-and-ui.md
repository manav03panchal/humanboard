<!-- Source: https://deepwiki.com/zed-industries/zed/3.1-editor-component-and-ui -->

# 3.1 Editor Component And Ui

Loading...

Index your code with Devin

[DeepWiki](</>)

[DeepWiki](</>)

[zed-industries/zed ](<https://github.com/zed-industries/zed> "Open repository")

Index your code with

Devin

Edit WikiShare

Loading...

Last indexed: 16 December 2025 ([4109c9](<https://github.com/zed-industries/zed/commits/4109c9dd>))

  * [Overview](</zed-industries/zed/1-overview>)
  * [Core Architecture](</zed-industries/zed/2-core-architecture>)
  * [Application Initialization and Lifecycle](</zed-industries/zed/2.1-application-initialization-and-lifecycle>)
  * [GPUI Framework](</zed-industries/zed/2.2-gpui-framework>)
  * [Window and Platform Abstraction](</zed-industries/zed/2.3-window-and-platform-abstraction>)
  * [Event Flow and Input Handling](</zed-industries/zed/2.4-event-flow-and-input-handling>)
  * [Keybinding and Action System](</zed-industries/zed/2.5-keybinding-and-action-system>)
  * [Focus Management and Hit Testing](</zed-industries/zed/2.6-focus-management-and-hit-testing>)
  * [Editor Architecture](</zed-industries/zed/3-editor-architecture>)
  * [Editor Component and UI](</zed-industries/zed/3.1-editor-component-and-ui>)
  * [Buffer System and Text Storage](</zed-industries/zed/3.2-buffer-system-and-text-storage>)
  * [Display Pipeline and Rendering](</zed-industries/zed/3.3-display-pipeline-and-rendering>)
  * [Selections and Editing Operations](</zed-industries/zed/3.4-selections-and-editing-operations>)
  * [Code Intelligence Integration](</zed-industries/zed/3.5-code-intelligence-integration>)
  * [Diff Integration](</zed-industries/zed/3.6-diff-integration>)
  * [Workspace and Panel System](</zed-industries/zed/4-workspace-and-panel-system>)
  * [Workspace Organization](</zed-industries/zed/4.1-workspace-organization>)
  * [Item System and Lifecycle](</zed-industries/zed/4.2-item-system-and-lifecycle>)
  * [Pane Management](</zed-industries/zed/4.3-pane-management>)
  * [Search System](</zed-industries/zed/4.4-search-system>)
  * [Project Management](</zed-industries/zed/5-project-management>)
  * [Project Orchestration](</zed-industries/zed/5.1-project-orchestration>)
  * [Worktree and File System](</zed-industries/zed/5.2-worktree-and-file-system>)
  * [Buffer Store](</zed-industries/zed/5.3-buffer-store>)
  * [Language Intelligence](</zed-industries/zed/6-language-intelligence>)
  * [LSP Store Architecture](</zed-industries/zed/6.1-lsp-store-architecture>)
  * [Language Server Lifecycle](</zed-industries/zed/6.2-language-server-lifecycle>)
  * [Completions and Diagnostics](</zed-industries/zed/6.3-completions-and-diagnostics>)
  * [Multi-Language Server Coordination](</zed-industries/zed/6.4-multi-language-server-coordination>)
  * [Settings and Configuration](</zed-industries/zed/7-settings-and-configuration>)
  * [Settings Store and Layering](</zed-industries/zed/7.1-settings-store-and-layering>)
  * [Settings UI](</zed-industries/zed/7.2-settings-ui>)
  * [Settings Migration](</zed-industries/zed/7.3-settings-migration>)
  * [Keymap System](</zed-industries/zed/7.4-keymap-system>)
  * [Git Integration](</zed-industries/zed/8-git-integration>)
  * [Git Panel and UI](</zed-industries/zed/8.1-git-panel-and-ui>)
  * [Git Store and State Management](</zed-industries/zed/8.2-git-store-and-state-management>)
  * [Repository Operations](</zed-industries/zed/8.3-repository-operations>)
  * [Diff System](</zed-industries/zed/8.4-diff-system>)
  * [Terminal and Task Execution](</zed-industries/zed/9-terminal-and-task-execution>)
  * [Terminal Core](</zed-industries/zed/9.1-terminal-core>)
  * [Terminal View and Rendering](</zed-industries/zed/9.2-terminal-view-and-rendering>)
  * [Task System](</zed-industries/zed/9.3-task-system>)
  * [Vim Mode](</zed-industries/zed/10-vim-mode>)
  * [Mode State Machine](</zed-industries/zed/10.1-mode-state-machine>)
  * [Operators, Motions, and Objects](</zed-industries/zed/10.2-operators-motions-and-objects>)
  * [Visual Mode](</zed-industries/zed/10.3-visual-mode>)
  * [Helix Mode Integration](</zed-industries/zed/10.4-helix-mode-integration>)
  * [AI Agent System](</zed-industries/zed/11-ai-agent-system>)
  * [Agent Communication Protocol (ACP)](</zed-industries/zed/11.1-agent-communication-protocol-\(acp\)>)
  * [Agent UI and Thread Management](</zed-industries/zed/11.2-agent-ui-and-thread-management>)
  * [Agent Connection and Implementations](</zed-industries/zed/11.3-agent-connection-and-implementations>)
  * [Tool System](</zed-industries/zed/11.4-tool-system>)
  * [Mention System and Context](</zed-industries/zed/11.5-mention-system-and-context>)
  * [Legacy Agent Thread System](</zed-industries/zed/11.6-legacy-agent-thread-system>)
  * [Remote Development and Collaboration](</zed-industries/zed/12-remote-development-and-collaboration>)
  * [Local vs Remote Architecture](</zed-industries/zed/12.1-local-vs-remote-architecture>)
  * [Remote Project Architecture](</zed-industries/zed/12.2-remote-project-architecture>)
  * [Collaboration Features](</zed-industries/zed/12.3-collaboration-features>)
  * [CRDT and Synchronization](</zed-industries/zed/12.4-crdt-and-synchronization>)


Menu

# Editor Component and UI

Relevant source files

  * [crates/buffer_diff/src/buffer_diff.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/buffer_diff/src/buffer_diff.rs>)
  * [crates/editor/src/actions.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/actions.rs>)
  * [crates/editor/src/code_completion_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/code_completion_tests.rs>)
  * [crates/editor/src/code_context_menus.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/code_context_menus.rs>)
  * [crates/editor/src/editor.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs>)
  * [crates/editor/src/editor_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor_tests.rs>)
  * [crates/editor/src/element.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/element.rs>)
  * [crates/language/src/buffer.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/buffer.rs>)
  * [crates/language/src/buffer_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/buffer_tests.rs>)
  * [crates/language/src/syntax_map.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/syntax_map.rs>)
  * [crates/multi_buffer/src/anchor.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/anchor.rs>)
  * [crates/multi_buffer/src/multi_buffer.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/multi_buffer.rs>)
  * [crates/multi_buffer/src/multi_buffer_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/multi_buffer_tests.rs>)


## Purpose and Scope

This document describes the `Editor` entity and its UI rendering system, which provides Zed's primary text editing interface. The Editor manages user interactions, visual presentation, and coordinates with underlying text storage and display systems. For information about the buffer system that stores text, see [3.2](</zed-industries/zed/3.2-buffer-system-and-text-storage>). For details on the display pipeline and coordinate transformations, see [3.3](</zed-industries/zed/3.3-display-pipeline-and-rendering>). For selection and editing operations, see [3.4](</zed-industries/zed/3.4-selections-and-editing-operations>).

The Editor combines several responsibilities:

  * Managing editor state (mode, settings, selections)
  * Rendering text and UI elements via `EditorElement`
  * Handling user input (keyboard, mouse, touch)
  * Coordinating with workspace and project systems
  * Displaying context menus (completions, code actions)


* * *

## Editor Entity Architecture

### Core Editor Structure

The `Editor` entity is the central data structure for text editing in Zed. It maintains all editor state and coordinates between the buffer system, display system, and UI framework.


**Sources:** [crates/editor/src/editor.rs1-227](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L1-L227>) [crates/editor/src/editor.rs1024-1250](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L1024-L1250>)

### Editor Modes

The `EditorMode` enum determines how the editor behaves and appears:

Mode| Description| Use Case  
---|---|---  
`SingleLine`| Single-line input without scrolling| Command palette, search boxes  
`AutoHeight { min_lines, max_lines }`| Expands vertically to fit content| Chat messages, commit messages  
`Full { scale_ui_elements_with_buffer_font_size, show_active_line_background, sizing_behavior }`| Full-featured editor with all UI elements| Primary editing surface  
`Minimap { parent }`| Miniature overview of parent editor| Code overview panel  
  

**Sources:** [crates/editor/src/editor.rs480-523](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L480-L523>)

### Key Editor Fields

The `Editor` struct contains numerous fields organized by responsibility:


**Sources:** [crates/editor/src/editor.rs1024-1250](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L1024-L1250>)

* * *

## EditorElement and Rendering

### EditorElement Structure

`EditorElement` is responsible for rendering the editor's visual representation. It implements GPUI's rendering pipeline and manages layout, painting, and event handling.


**Sources:** [crates/editor/src/element.rs196-211](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/element.rs#L196-L211>) [crates/editor/src/element.rs1-100](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/element.rs#L1-L100>)

### Rendering Pipeline

The rendering process flows through several stages:

  1. **Register Actions** : Register all editor actions with the window system
  2. **Compute Layout** : Calculate dimensions based on available space
  3. **Prepare Layout** : Generate detailed layout data structures
  4. **Paint** : Render all visual elements to the screen


**Sources:** [crates/editor/src/element.rs213-627](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/element.rs#L213-L627>) [crates/editor/src/element.rs1069-1500](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/element.rs#L1069-L1500>)

### Text Line Rendering

Individual text lines are laid out and rendered with careful attention to:

  * Syntax highlighting
  * Inlay hints
  * Cursor positions
  * Selection ranges
  * Diagnostics
  * Git diff indicators


**Sources:** [crates/editor/src/element.rs99](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/element.rs#L99-L99>) [crates/editor/src/element.rs2500-2800](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/element.rs#L2500-L2800>)

* * *

## Display State and Coordinates

### DisplayMap Integration

The Editor uses a `DisplayMap` to transform between buffer coordinates (logical text positions) and display coordinates (on-screen positions). This handles:

  * Soft wraps
  * Code folds
  * Inlay hints (type annotations, parameter names)
  * Tab expansions
  * Block decorations (diagnostics, headers)


**Sources:** [crates/editor/src/editor.rs6-10](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L6-L10>) [crates/editor/src/display_map](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/display_map>)

### Position Mapping

The `PositionMap` in `EditorElement` provides fast lookups between different coordinate systems during rendering:

Method| Purpose  
---|---  
`point_for_position(text_bounds, position)`| Convert display point to pixel coordinates  
`position_for_point(text_bounds, point)`| Convert pixel coordinates to display point  
`column_pixels_for_row(row)`| Get horizontal pixel offset for a row  
  
**Sources:** [crates/editor/src/element.rs60-62](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/element.rs#L60-L62>) [crates/editor/src/element.rs4000-4200](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/element.rs#L4000-L4200>)

* * *

## User Interaction Handling

### Input Event Flow

User input flows through multiple layers before reaching the editor:


**Sources:** [crates/editor/src/element.rs629-800](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/element.rs#L629-L800>) [crates/editor/src/editor.rs3000-3500](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L3000-L3500>)

### Mouse Interaction

Mouse events are handled through several mechanisms:

  1. **Hit Testing** : Determine what element was clicked
  2. **Position Resolution** : Convert pixel coordinates to buffer positions
  3. **Selection Management** : Update cursor and selection state
  4. **Context Menus** : Show completions or code actions


**Sources:** [crates/editor/src/element.rs2200-2600](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/element.rs#L2200-L2600>) [crates/editor/src/editor.rs4500-5000](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L4500-L5000>)

### Keyboard Actions

Keyboard input is processed through the action system. The editor registers hundreds of actions for text editing operations:

**Action Categories:**

  * **Movement** : `move_left`, `move_right`, `move_up`, `move_down`, `move_to_beginning_of_line`, etc.
  * **Selection** : `select_left`, `select_right`, `select_word`, `select_line`, `select_all`, etc.
  * **Editing** : `newline`, `backspace`, `delete`, `indent`, `outdent`, `cut`, `copy`, `paste`, etc.
  * **Navigation** : `go_to_definition`, `go_to_diagnostic`, `go_to_prev_hunk`, etc.
  * **Code Intelligence** : `show_completions`, `toggle_code_actions`, `rename`, `format`, etc.


**Sources:** [crates/editor/src/element.rs213-627](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/element.rs#L213-L627>) [crates/editor/src/actions.rs1-500](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/actions.rs#L1-L500>)

* * *

## Context Menus

### CodeContextMenu Types

The editor displays two types of context menus:


**Sources:** [crates/editor/src/code_context_menus.rs69-216](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/code_context_menus.rs#L69-L216>) [crates/editor/src/code_context_menus.rs224-300](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/code_context_menus.rs#L224-L300>)

### Completions Menu Architecture

The completions menu provides intelligent code completion with fuzzy filtering:

Component| Purpose  
---|---  
`initial_position: Anchor`| Where menu was triggered  
`completions: Rc<RefCell<Box<[Completion]>>>`| All available completions  
`match_candidates: Arc<[(Option<Anchor>, Vec<StringMatchCandidate>)]>`| Candidates grouped by match start position  
`entries: Rc<RefCell<Box<[StringMatch]>>>`| Filtered and sorted matches  
`filter_task: Task<()>`| Background fuzzy filtering  
`markdown_cache: VecDeque<(MarkdownCacheKey, Entity<Markdown>)>`| Rendered documentation cache  
  

**Sources:** [crates/editor/src/code_context_menus.rs302-600](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/code_context_menus.rs#L302-L600>) [crates/editor/src/editor.rs7000-7500](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L7000-L7500>)

### Context Menu Rendering

Context menus are rendered in two parts:

  1. **Primary Menu** : Vertical list of items (completions or actions)
  2. **Aside Panel** : Optional documentation or preview (completions only)


**Sources:** [crates/editor/src/code_context_menus.rs157-183](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/code_context_menus.rs#L157-L183>) [crates/editor/src/code_context_menus.rs700-1000](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/code_context_menus.rs#L700-L1000>)

* * *

## Editor Styling and Theming

### EditorStyle Structure

The `EditorStyle` struct defines the visual appearance of the editor:


**Sources:** [crates/editor/src/editor.rs542-579](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L542-L579>)

### Visual Highlights

The editor supports multiple types of visual highlights:

Highlight Type| Purpose| Storage  
---|---|---  
`highlighted_rows`| Row-based highlights (breakpoints, current line, etc.)| `HashMap<TypeId, Vec<RowHighlight>>`  
`background_highlights`| Range-based highlights (search results, references, etc.)| `HashMap<HighlightKey, BackgroundHighlight>`  
`gutter_highlights`| Gutter-specific highlights (git blame, diagnostics)| `HashMap<TypeId, GutterHighlight>`  
`scrollbar_marker_state`| Markers in scrollbar (search results, diagnostics)| `ScrollbarMarkerState`  
  

**Sources:** [crates/editor/src/editor.rs1086-1091](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L1086-L1091>) [crates/editor/src/element.rs1500-2000](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/element.rs#L1500-L2000>)

* * *

## Integration with Core Systems

### MultiBuffer Integration

The Editor interacts with `MultiBuffer` for all text operations:


**Sources:** [crates/editor/src/editor.rs3500-4000](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L3500-L4000>) [crates/multi_buffer/src/multi_buffer.rs1-100](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/multi_buffer.rs#L1-L100>)

### Workspace Integration

The Editor implements the `WorkspaceItem` trait to integrate with the workspace:

Method| Purpose  
---|---  
`tab_content()`| Render tab bar content  
`tab_tooltip()`| Show file path on hover  
`serial_behavior()`| Control serialization behavior  
`can_save()`| Whether buffer can be saved  
`save()`| Save buffer to disk  
`reload()`| Reload buffer from disk  
  

**Sources:** [crates/editor/src/items.rs1-500](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/items.rs#L1-L500>) [crates/workspace/src/item.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/item.rs>)

### Project and LSP Integration

The Editor coordinates with the `Project` for language intelligence:


**Sources:** [crates/editor/src/editor.rs6000-6500](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L6000-L6500>) [crates/project/src/project.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project.rs>)

* * *

## State Management and Updates

### Editor State Synchronization

The Editor maintains consistency between multiple state components:


**Sources:** [crates/editor/src/editor.rs2000-2500](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L2000-L2500>) [crates/editor/src/editor.rs8000-8500](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L8000-L8500>)

### Event Emission

The Editor emits various events for external observers:

Event| When Emitted| Observers  
---|---|---  
`EditorEvent::Edited`| After any edit to buffer| Workspace, collaboration  
`EditorEvent::BufferEdited`| Buffer content changed| Title bar, git panel  
`EditorEvent::SelectionsChanged`| Selection moved| Status bar, breadcrumbs  
`EditorEvent::ScrollPositionChanged`| Viewport scrolled| Minimap, scrollbar  
`EditorEvent::ExcerptsExpanded`| Excerpts expanded in multibuffer| Search results  
`EditorEvent::Focused`| Editor gained focus| Workspace, command palette  
  
**Sources:** [crates/editor/src/editor.rs1250-1350](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L1250-L1350>)

Dismiss

Refresh this wiki

This wiki was recently refreshed. Please wait 7 days to refresh again.

### On this page

  * [Editor Component and UI](<#editor-component-and-ui>)
  * [Purpose and Scope](<#purpose-and-scope>)
  * [Editor Entity Architecture](<#editor-entity-architecture>)
  * [Core Editor Structure](<#core-editor-structure>)
  * [Editor Modes](<#editor-modes>)
  * [Key Editor Fields](<#key-editor-fields>)
  * [EditorElement and Rendering](<#editorelement-and-rendering>)
  * [EditorElement Structure](<#editorelement-structure>)
  * [Rendering Pipeline](<#rendering-pipeline>)
  * [Text Line Rendering](<#text-line-rendering>)
  * [Display State and Coordinates](<#display-state-and-coordinates>)
  * [DisplayMap Integration](<#displaymap-integration>)
  * [Position Mapping](<#position-mapping>)
  * [User Interaction Handling](<#user-interaction-handling>)
  * [Input Event Flow](<#input-event-flow>)
  * [Mouse Interaction](<#mouse-interaction>)
  * [Keyboard Actions](<#keyboard-actions>)
  * [Context Menus](<#context-menus>)
  * [CodeContextMenu Types](<#codecontextmenu-types>)
  * [Completions Menu Architecture](<#completions-menu-architecture>)
  * [Context Menu Rendering](<#context-menu-rendering>)
  * [Editor Styling and Theming](<#editor-styling-and-theming>)
  * [EditorStyle Structure](<#editorstyle-structure>)
  * [Visual Highlights](<#visual-highlights>)
  * [Integration with Core Systems](<#integration-with-core-systems>)
  * [MultiBuffer Integration](<#multibuffer-integration>)
  * [Workspace Integration](<#workspace-integration>)
  * [Project and LSP Integration](<#project-and-lsp-integration>)
  * [State Management and Updates](<#state-management-and-updates>)
  * [Editor State Synchronization](<#editor-state-synchronization>)
  * [Event Emission](<#event-emission>)
