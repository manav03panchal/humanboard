<!-- Source: https://deepwiki.com/zed-industries/zed/3.5-code-intelligence-integration -->

# 3.5 Code Intelligence Integration

Loading...

Index your code with Devin

[DeepWiki](</>)

[DeepWiki](</>)

[zed-industries/zed ](<https://github.com/zed-industries/zed> "Open repository")

Index your code with

Devin

Edit WikiShare

Loading...

Last indexed: 16 December 2025 ([4109c9](<https://github.com/zed-industries/zed/commits/4109c9dd>))

  * [Overview](</zed-industries/zed/1-overview>)
  * [Core Architecture](</zed-industries/zed/2-core-architecture>)
  * [Application Initialization and Lifecycle](</zed-industries/zed/2.1-application-initialization-and-lifecycle>)
  * [GPUI Framework](</zed-industries/zed/2.2-gpui-framework>)
  * [Window and Platform Abstraction](</zed-industries/zed/2.3-window-and-platform-abstraction>)
  * [Event Flow and Input Handling](</zed-industries/zed/2.4-event-flow-and-input-handling>)
  * [Keybinding and Action System](</zed-industries/zed/2.5-keybinding-and-action-system>)
  * [Focus Management and Hit Testing](</zed-industries/zed/2.6-focus-management-and-hit-testing>)
  * [Editor Architecture](</zed-industries/zed/3-editor-architecture>)
  * [Editor Component and UI](</zed-industries/zed/3.1-editor-component-and-ui>)
  * [Buffer System and Text Storage](</zed-industries/zed/3.2-buffer-system-and-text-storage>)
  * [Display Pipeline and Rendering](</zed-industries/zed/3.3-display-pipeline-and-rendering>)
  * [Selections and Editing Operations](</zed-industries/zed/3.4-selections-and-editing-operations>)
  * [Code Intelligence Integration](</zed-industries/zed/3.5-code-intelligence-integration>)
  * [Diff Integration](</zed-industries/zed/3.6-diff-integration>)
  * [Workspace and Panel System](</zed-industries/zed/4-workspace-and-panel-system>)
  * [Workspace Organization](</zed-industries/zed/4.1-workspace-organization>)
  * [Item System and Lifecycle](</zed-industries/zed/4.2-item-system-and-lifecycle>)
  * [Pane Management](</zed-industries/zed/4.3-pane-management>)
  * [Search System](</zed-industries/zed/4.4-search-system>)
  * [Project Management](</zed-industries/zed/5-project-management>)
  * [Project Orchestration](</zed-industries/zed/5.1-project-orchestration>)
  * [Worktree and File System](</zed-industries/zed/5.2-worktree-and-file-system>)
  * [Buffer Store](</zed-industries/zed/5.3-buffer-store>)
  * [Language Intelligence](</zed-industries/zed/6-language-intelligence>)
  * [LSP Store Architecture](</zed-industries/zed/6.1-lsp-store-architecture>)
  * [Language Server Lifecycle](</zed-industries/zed/6.2-language-server-lifecycle>)
  * [Completions and Diagnostics](</zed-industries/zed/6.3-completions-and-diagnostics>)
  * [Multi-Language Server Coordination](</zed-industries/zed/6.4-multi-language-server-coordination>)
  * [Settings and Configuration](</zed-industries/zed/7-settings-and-configuration>)
  * [Settings Store and Layering](</zed-industries/zed/7.1-settings-store-and-layering>)
  * [Settings UI](</zed-industries/zed/7.2-settings-ui>)
  * [Settings Migration](</zed-industries/zed/7.3-settings-migration>)
  * [Keymap System](</zed-industries/zed/7.4-keymap-system>)
  * [Git Integration](</zed-industries/zed/8-git-integration>)
  * [Git Panel and UI](</zed-industries/zed/8.1-git-panel-and-ui>)
  * [Git Store and State Management](</zed-industries/zed/8.2-git-store-and-state-management>)
  * [Repository Operations](</zed-industries/zed/8.3-repository-operations>)
  * [Diff System](</zed-industries/zed/8.4-diff-system>)
  * [Terminal and Task Execution](</zed-industries/zed/9-terminal-and-task-execution>)
  * [Terminal Core](</zed-industries/zed/9.1-terminal-core>)
  * [Terminal View and Rendering](</zed-industries/zed/9.2-terminal-view-and-rendering>)
  * [Task System](</zed-industries/zed/9.3-task-system>)
  * [Vim Mode](</zed-industries/zed/10-vim-mode>)
  * [Mode State Machine](</zed-industries/zed/10.1-mode-state-machine>)
  * [Operators, Motions, and Objects](</zed-industries/zed/10.2-operators-motions-and-objects>)
  * [Visual Mode](</zed-industries/zed/10.3-visual-mode>)
  * [Helix Mode Integration](</zed-industries/zed/10.4-helix-mode-integration>)
  * [AI Agent System](</zed-industries/zed/11-ai-agent-system>)
  * [Agent Communication Protocol (ACP)](</zed-industries/zed/11.1-agent-communication-protocol-\(acp\)>)
  * [Agent UI and Thread Management](</zed-industries/zed/11.2-agent-ui-and-thread-management>)
  * [Agent Connection and Implementations](</zed-industries/zed/11.3-agent-connection-and-implementations>)
  * [Tool System](</zed-industries/zed/11.4-tool-system>)
  * [Mention System and Context](</zed-industries/zed/11.5-mention-system-and-context>)
  * [Legacy Agent Thread System](</zed-industries/zed/11.6-legacy-agent-thread-system>)
  * [Remote Development and Collaboration](</zed-industries/zed/12-remote-development-and-collaboration>)
  * [Local vs Remote Architecture](</zed-industries/zed/12.1-local-vs-remote-architecture>)
  * [Remote Project Architecture](</zed-industries/zed/12.2-remote-project-architecture>)
  * [Collaboration Features](</zed-industries/zed/12.3-collaboration-features>)
  * [CRDT and Synchronization](</zed-industries/zed/12.4-crdt-and-synchronization>)


Menu

# Code Intelligence Integration

Relevant source files

  * [crates/buffer_diff/src/buffer_diff.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/buffer_diff/src/buffer_diff.rs>)
  * [crates/collab/src/tests/editor_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/collab/src/tests/editor_tests.rs>)
  * [crates/collab/src/tests/integration_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/collab/src/tests/integration_tests.rs>)
  * [crates/collab/src/tests/remote_editing_collaboration_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/collab/src/tests/remote_editing_collaboration_tests.rs>)
  * [crates/copilot/Cargo.toml](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/copilot/Cargo.toml>)
  * [crates/copilot/src/copilot.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/copilot/src/copilot.rs>)
  * [crates/copilot/src/sign_in.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/copilot/src/sign_in.rs>)
  * [crates/editor/src/actions.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/actions.rs>)
  * [crates/editor/src/code_completion_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/code_completion_tests.rs>)
  * [crates/editor/src/code_context_menus.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/code_context_menus.rs>)
  * [crates/editor/src/editor.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs>)
  * [crates/editor/src/editor_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor_tests.rs>)
  * [crates/editor/src/element.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/element.rs>)
  * [crates/editor/src/hover_links.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/hover_links.rs>)
  * [crates/fs/src/fs.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/fs/src/fs.rs>)
  * [crates/git/src/status.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/git/src/status.rs>)
  * [crates/language/src/buffer.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/buffer.rs>)
  * [crates/language/src/buffer_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/buffer_tests.rs>)
  * [crates/language/src/syntax_map.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/syntax_map.rs>)
  * [crates/lsp/src/lsp.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/lsp/src/lsp.rs>)
  * [crates/multi_buffer/src/anchor.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/anchor.rs>)
  * [crates/multi_buffer/src/multi_buffer.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/multi_buffer.rs>)
  * [crates/multi_buffer/src/multi_buffer_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/multi_buffer/src/multi_buffer_tests.rs>)
  * [crates/prettier/src/prettier.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/prettier/src/prettier.rs>)
  * [crates/prettier/src/prettier_server.js](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/prettier/src/prettier_server.js>)
  * [crates/project/src/buffer_store.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/buffer_store.rs>)
  * [crates/project/src/lsp_command.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_command.rs>)
  * [crates/project/src/lsp_store.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store.rs>)
  * [crates/project/src/prettier_store.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/prettier_store.rs>)
  * [crates/project/src/project.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project.rs>)
  * [crates/project/src/project_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project_tests.rs>)
  * [crates/project/src/worktree_store.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/worktree_store.rs>)
  * [crates/proto/proto/lsp.proto](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/proto/proto/lsp.proto>)
  * [crates/remote_server/src/headless_project.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/remote_server/src/headless_project.rs>)
  * [crates/remote_server/src/remote_editing_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/remote_server/src/remote_editing_tests.rs>)
  * [crates/worktree/src/worktree.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/worktree/src/worktree.rs>)
  * [crates/worktree/src/worktree_tests.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/worktree/src/worktree_tests.rs>)


## Purpose and Scope

This document explains how the Editor integrates with language intelligence features provided by Language Servers. It focuses on the editor-side mechanisms for displaying and interacting with code completions, diagnostics, code actions, hover information, and other LSP-powered features.

For comprehensive documentation of the Language Server Protocol implementation and lifecycle management, see [Language Intelligence](</zed-industries/zed/6-language-intelligence>). For details on the Editor's core architecture, see [Editor Component and UI](</zed-industries/zed/3.1-editor-component-and-ui>). For buffer-level text operations, see [Buffer System and Text Storage](</zed-industries/zed/3.2-buffer-system-and-text-storage>).

## Architecture Overview

The Editor acts as a presentation and interaction layer for code intelligence features. It maintains state for various LSP features, coordinates with the Project/LspStore to fetch data, and renders results to users.

**Key Components in Editor Integration**


Sources: [crates/editor/src/editor.rs1027-1130](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L1027-L1130>)

## Completion System Integration

### Completion State Management

The Editor maintains completion state through the `CodeContextMenu::Completions` variant stored in `context_menu`. Completions are triggered by user typing or explicit actions.


**Completion Triggering Logic**

The editor determines when to show completions based on:

  * Completion trigger characters from language server capabilities
  * Manual invocation via `ShowCompletions` action
  * Automatic triggering after typing (configurable)


Sources: [crates/editor/src/editor.rs8900-9100](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L8900-L9100>) [crates/editor/src/code_context_menus.rs69-212](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/code_context_menus.rs#L69-L212>)

### Completion Menu Rendering

The `CompletionsMenu` structure manages the visual presentation of completions:

Component| Responsibility  
---|---  
`matches`| Filtered and sorted completion items  
`selected_item`| Currently highlighted completion  
`scroll_handle`| Scrolling state for long lists  
`markdown_cache`| Cached documentation markdown  
`origin`| Display position relative to cursor  
  
The menu supports:

  * Fuzzy filtering based on user input
  * Documentation preview in a side panel
  * Icon display for completion types
  * Keyboard and mouse navigation


Sources: [crates/editor/src/code_context_menus.rs213-458](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/code_context_menus.rs#L213-L458>)

### Completion Data Flow


**Key Data Structures**

The `Completion` struct ([project/src/project.rs469-496](<https://github.com/zed-industries/zed/blob/4109c9dd/project/src/project.rs#L469-L496>)) wraps LSP completion items with editor-specific metadata:

  * `replace_range`: Anchor range for text replacement
  * `new_text`: Text to insert
  * `label`: Formatted display label
  * `documentation`: Optional markdown documentation
  * `source`: CompletionSource (LSP/DAP/Custom/BufferWord)


Sources: [crates/project/src/project.rs469-521](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/project.rs#L469-L521>) [crates/project/src/lsp_command.rs1-30](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_command.rs#L1-L30>)

## Diagnostics Display

### Diagnostic State in Editor

The Editor maintains diagnostic information at multiple levels:

  1. **Buffer-level diagnostics** : Stored in `Buffer.diagnostics` as `DiagnosticSet` per language server
  2. **Editor display state** : `Editor.active_diagnostics` tracks which diagnostic group is currently expanded
  3. **Visual indicators** : Gutter indicators, underlines, and inline diagnostic blocks


Sources: [crates/editor/src/editor.rs1052-1059](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L1052-L1059>) [crates/language/src/buffer.rs119](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/buffer.rs#L119-L119>)

### Diagnostic Update Flow

When language servers send diagnostics:

  1. LspStore receives `textDocument/publishDiagnostics` notification
  2. LspStore updates buffer's `DiagnosticSet`
  3. Buffer emits `DiagnosticsUpdated` event
  4. Editor receives event and updates inline diagnostics
  5. Editor schedules repaint to show updated indicators


**Inline Diagnostic Rendering**

Inline diagnostics are short summary messages shown at the end of lines with problems:


Sources: [crates/editor/src/editor.rs1054-1056](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L1054-L1056>) [crates/editor/src/editor.rs661-668](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L661-L668>)

### Diagnostic Navigation

The editor provides actions to navigate between diagnostics:

Action| Behavior  
---|---  
`GoToDiagnostic`| Jump to next diagnostic (wraps around)  
`GoToPrevDiagnostic`| Jump to previous diagnostic  
Severity filtering| Can be configured to skip certain severity levels  
  
Sources: [crates/editor/src/editor.rs398](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L398-L398>)

## Code Actions

### Code Action State

The Editor tracks available code actions in `available_code_actions: Option<(Location, Rc<[AvailableCodeAction]>)>`. Code actions are fetched when:

  * Cursor moves to a new position
  * Diagnostics are updated at cursor position
  * User explicitly invokes `ToggleCodeActions`


**Code Action Types**


Sources: [crates/editor/src/editor.rs1103](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L1103-L1103>) [crates/project/src/lsp_command.rs304-350](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_command.rs#L304-L350>)

### Code Action Menu

When code actions are available, the `CodeActionsMenu` displays them:


Sources: [crates/editor/src/code_context_menus.rs697-950](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/code_context_menus.rs#L697-L950>)

### Code Action Debouncing

To avoid overwhelming the language server, code action requests are debounced:

  * Timeout: `CODE_ACTIONS_DEBOUNCE_TIMEOUT` (250ms)
  * Triggered by cursor movement or diagnostic updates
  * Cancelled if cursor moves away before timeout


Sources: [crates/editor/src/editor.rs235](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L235-L235>) [crates/editor/src/editor.rs1104](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L1104-L1104>)

## Hover Information

### Hover State Management

The Editor's `hover_state: Option<HoverState>` tracks hover popover information:


**Hover Trigger Conditions**

Trigger| Behavior  
---|---  
Mouse hover| Delayed hover after mouse stops moving  
Explicit action| `hover_popover::hover` action shows immediately  
Diagnostic hover| Show diagnostic details on hover over gutter/text  
  
Sources: [crates/editor/src/hover_popover.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/hover_popover.rs>)

### Hover Content Types

The `Hover` struct from Project can contain multiple content blocks:


Each `HoverBlock` has a `HoverBlockKind`:

  * `Code { language }`: Syntax-highlighted code
  * `Markdown`: Formatted documentation
  * `PlainText`: Unformatted text


Sources: [crates/project/src/lsp_command.rs78-106](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_command.rs#L78-L106>)

### Hover Rendering Pipeline


The hover popover intelligently positions itself:

  * Above cursor if space available
  * Below cursor otherwise
  * Avoids overlapping with context menus
  * Constrained within editor bounds


Sources: [crates/editor/src/hover_popover.rs27-28](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/hover_popover.rs#L27-L28>) [crates/editor/src/element.rs4020-4150](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/element.rs#L4020-L4150>)

## Document Highlights

### Highlight Request Flow

Document highlights show all references to the symbol under the cursor:


**Highlight Types**

The LSP protocol distinguishes highlight kinds:

  * `DocumentHighlightRead`: Variable read
  * `DocumentHighlightWrite`: Variable write
  * Other: General references


These are styled differently in the editor using `DocumentHighlightRead` and `DocumentHighlightWrite` style keys.

Sources: [crates/editor/src/editor.rs1107](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L1107-L1107>) [crates/editor/src/editor.rs278-279](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L278-L279>)

### Selection-Based Highlighting

In addition to LSP-based highlights, the editor provides local selection highlighting:

  * When text is selected, all matching occurrences are highlighted
  * Uses quick local search, not LSP
  * Styled with `SelectedTextHighlight` type


Sources: [crates/editor/src/editor.rs1106](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L1106-L1106>) [crates/editor/src/editor.rs282](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L282-L282>)

## Inlay Hints

### Inlay Hint Types and Display

Inlay hints provide inline annotations from the language server:

Inlay Hint Kind| Display Location| Example  
---|---|---  
Type| After expression| `let x = 5;` → `let x: i32 = 5;`  
Parameter| Before argument| `foo(42)` → `foo(count: 42)`  
  
**Inlay Hint Architecture**


Sources: [crates/editor/src/inlays/mod.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/inlays/mod.rs>) [crates/project/src/lsp_store/inlay_hint_cache.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store/inlay_hint_cache.rs>)

### Inlay Hint Caching Strategy

Inlay hints are cached aggressively to avoid excessive LSP requests:

  1. **Cache by excerpt** : For multi-buffer views, hints are cached per excerpt
  2. **Invalidation strategies** : 
     * `OnType`: Invalidate on any edit
     * `OnChange`: Only invalidate when visible range changes
     * `None`: Never invalidate
  3. **Resolution** : Some hints support lazy resolution for documentation


Sources: [crates/project/src/lsp_store/inlay_hint_cache.rs133](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_store/inlay_hint_cache.rs#L133-L133>)

### Inlay Hint Settings Integration

Users can configure inlay hints via language settings:


The editor checks these settings before requesting hints from the language server.

Sources: [crates/language/src/language_settings.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/language_settings.rs>) [crates/editor/src/inlays/inlay_hints.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/inlays/inlay_hints.rs>)

## Signature Help

### Signature Help State

The `SignatureHelpState` structure ([editor.rs1099](<https://github.com/zed-industries/zed/blob/4109c9dd/editor.rs#L1099-L1099>)) manages function signature display:


**Triggering Signature Help**

Signature help can be triggered by:

  * Typing trigger characters (e.g., `(`, `,` in many languages)
  * Explicit action: `ShowSignatureHelp`
  * Auto-show when enabled in settings


Sources: [crates/editor/src/signature_help.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/signature_help.rs>)

### Signature Help Display

The signature help popover shows:

  1. **Active signature** : The currently matching function signature
  2. **Active parameter** : Highlighted parameter at cursor position
  3. **Documentation** : Optional markdown documentation for the signature
  4. **Navigation** : Multiple overloads can be navigated with actions


The editor actions `signature_help_next` and `signature_help_prev` allow cycling through signature overloads.

Sources: [crates/editor/src/signature_help.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/signature_help.rs>) [crates/editor/src/element.rs593-596](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/element.rs#L593-L596>)

## Go-to-Definition and Navigation

### Navigation Request Types

The Editor supports several navigation operations:

Action| LSP Method| Behavior  
---|---|---  
`GoToDefinition`| `textDocument/definition`| Jump to symbol definition  
`GoToTypeDefinition`| `textDocument/typeDefinition`| Jump to type definition  
`GoToDeclaration`| `textDocument/declaration`| Jump to declaration  
`GoToImplementation`| `textDocument/implementation`| Jump to implementations  
`FindAllReferences`| `textDocument/references`| Show all references  
  
Sources: [crates/editor/src/actions.rs484-508](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/actions.rs#L484-L508>) [crates/editor/src/editor.rs404-412](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L404-L412>)

### Navigation Result Handling


**Location Link Structure**

Navigation results are `LocationLink` structs containing:

  * `origin_selection_range`: The range that was selected
  * `target_uri`: File URI of the target
  * `target_range`: Full range of target definition
  * `target_selection_range`: Precise position to jump to


Sources: [crates/project/src/lsp_command.rs108-140](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_command.rs#L108-L140>)

### Navigation Fallback Strategies

When LSP navigation fails or returns no results, the editor can use fallback strategies (configured via `GoToDefinitionFallback`):

  1. **None** : Show error message
  2. **SymbolSearch** : Search for symbol in workspace
  3. **WordHighlight** : Highlight word occurrences in current file


Sources: [crates/editor/src/editor_settings.rs98](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor_settings.rs#L98-L98>)

## Integration Data Flow Summary

The complete flow of code intelligence data through the editor:


Sources: [crates/editor/src/editor.rs8900-9300](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L8900-L9300>) [crates/project/src/lsp_command.rs350-800](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/lsp_command.rs#L350-L800>)

## Editor State Management

The Editor consolidates all code intelligence state in a cohesive structure:


All these state fields work together to provide a seamless code editing experience with full language intelligence.

Sources: [crates/editor/src/editor.rs1027-1130](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/editor.rs#L1027-L1130>)

Dismiss

Refresh this wiki

This wiki was recently refreshed. Please wait 7 days to refresh again.

### On this page

  * [Code Intelligence Integration](<#code-intelligence-integration>)
  * [Purpose and Scope](<#purpose-and-scope>)
  * [Architecture Overview](<#architecture-overview>)
  * [Completion System Integration](<#completion-system-integration>)
  * [Completion State Management](<#completion-state-management>)
  * [Completion Menu Rendering](<#completion-menu-rendering>)
  * [Completion Data Flow](<#completion-data-flow>)
  * [Diagnostics Display](<#diagnostics-display>)
  * [Diagnostic State in Editor](<#diagnostic-state-in-editor>)
  * [Diagnostic Update Flow](<#diagnostic-update-flow>)
  * [Diagnostic Navigation](<#diagnostic-navigation>)
  * [Code Actions](<#code-actions>)
  * [Code Action State](<#code-action-state>)
  * [Code Action Menu](<#code-action-menu>)
  * [Code Action Debouncing](<#code-action-debouncing>)
  * [Hover Information](<#hover-information>)
  * [Hover State Management](<#hover-state-management>)
  * [Hover Content Types](<#hover-content-types>)
  * [Hover Rendering Pipeline](<#hover-rendering-pipeline>)
  * [Document Highlights](<#document-highlights>)
  * [Highlight Request Flow](<#highlight-request-flow>)
  * [Selection-Based Highlighting](<#selection-based-highlighting>)
  * [Inlay Hints](<#inlay-hints>)
  * [Inlay Hint Types and Display](<#inlay-hint-types-and-display>)
  * [Inlay Hint Caching Strategy](<#inlay-hint-caching-strategy>)
  * [Inlay Hint Settings Integration](<#inlay-hint-settings-integration>)
  * [Signature Help](<#signature-help>)
  * [Signature Help State](<#signature-help-state>)
  * [Signature Help Display](<#signature-help-display>)
  * [Go-to-Definition and Navigation](<#go-to-definition-and-navigation>)
  * [Navigation Request Types](<#navigation-request-types>)
  * [Navigation Result Handling](<#navigation-result-handling>)
  * [Navigation Fallback Strategies](<#navigation-fallback-strategies>)
  * [Integration Data Flow Summary](<#integration-data-flow-summary>)
  * [Editor State Management](<#editor-state-management>)
