<!-- Source: https://deepwiki.com/zed-industries/zed/12.3-collaboration-features -->

# 12.3 Collaboration Features

Loading...

Index your code with Devin

[DeepWiki](</>)

[DeepWiki](</>)

[zed-industries/zed ](<https://github.com/zed-industries/zed> "Open repository")

Index your code with

Devin

Edit WikiShare

Loading...

Last indexed: 16 December 2025 ([4109c9](<https://github.com/zed-industries/zed/commits/4109c9dd>))

  * [Overview](</zed-industries/zed/1-overview>)
  * [Core Architecture](</zed-industries/zed/2-core-architecture>)
  * [Application Initialization and Lifecycle](</zed-industries/zed/2.1-application-initialization-and-lifecycle>)
  * [GPUI Framework](</zed-industries/zed/2.2-gpui-framework>)
  * [Window and Platform Abstraction](</zed-industries/zed/2.3-window-and-platform-abstraction>)
  * [Event Flow and Input Handling](</zed-industries/zed/2.4-event-flow-and-input-handling>)
  * [Keybinding and Action System](</zed-industries/zed/2.5-keybinding-and-action-system>)
  * [Focus Management and Hit Testing](</zed-industries/zed/2.6-focus-management-and-hit-testing>)
  * [Editor Architecture](</zed-industries/zed/3-editor-architecture>)
  * [Editor Component and UI](</zed-industries/zed/3.1-editor-component-and-ui>)
  * [Buffer System and Text Storage](</zed-industries/zed/3.2-buffer-system-and-text-storage>)
  * [Display Pipeline and Rendering](</zed-industries/zed/3.3-display-pipeline-and-rendering>)
  * [Selections and Editing Operations](</zed-industries/zed/3.4-selections-and-editing-operations>)
  * [Code Intelligence Integration](</zed-industries/zed/3.5-code-intelligence-integration>)
  * [Diff Integration](</zed-industries/zed/3.6-diff-integration>)
  * [Workspace and Panel System](</zed-industries/zed/4-workspace-and-panel-system>)
  * [Workspace Organization](</zed-industries/zed/4.1-workspace-organization>)
  * [Item System and Lifecycle](</zed-industries/zed/4.2-item-system-and-lifecycle>)
  * [Pane Management](</zed-industries/zed/4.3-pane-management>)
  * [Search System](</zed-industries/zed/4.4-search-system>)
  * [Project Management](</zed-industries/zed/5-project-management>)
  * [Project Orchestration](</zed-industries/zed/5.1-project-orchestration>)
  * [Worktree and File System](</zed-industries/zed/5.2-worktree-and-file-system>)
  * [Buffer Store](</zed-industries/zed/5.3-buffer-store>)
  * [Language Intelligence](</zed-industries/zed/6-language-intelligence>)
  * [LSP Store Architecture](</zed-industries/zed/6.1-lsp-store-architecture>)
  * [Language Server Lifecycle](</zed-industries/zed/6.2-language-server-lifecycle>)
  * [Completions and Diagnostics](</zed-industries/zed/6.3-completions-and-diagnostics>)
  * [Multi-Language Server Coordination](</zed-industries/zed/6.4-multi-language-server-coordination>)
  * [Settings and Configuration](</zed-industries/zed/7-settings-and-configuration>)
  * [Settings Store and Layering](</zed-industries/zed/7.1-settings-store-and-layering>)
  * [Settings UI](</zed-industries/zed/7.2-settings-ui>)
  * [Settings Migration](</zed-industries/zed/7.3-settings-migration>)
  * [Keymap System](</zed-industries/zed/7.4-keymap-system>)
  * [Git Integration](</zed-industries/zed/8-git-integration>)
  * [Git Panel and UI](</zed-industries/zed/8.1-git-panel-and-ui>)
  * [Git Store and State Management](</zed-industries/zed/8.2-git-store-and-state-management>)
  * [Repository Operations](</zed-industries/zed/8.3-repository-operations>)
  * [Diff System](</zed-industries/zed/8.4-diff-system>)
  * [Terminal and Task Execution](</zed-industries/zed/9-terminal-and-task-execution>)
  * [Terminal Core](</zed-industries/zed/9.1-terminal-core>)
  * [Terminal View and Rendering](</zed-industries/zed/9.2-terminal-view-and-rendering>)
  * [Task System](</zed-industries/zed/9.3-task-system>)
  * [Vim Mode](</zed-industries/zed/10-vim-mode>)
  * [Mode State Machine](</zed-industries/zed/10.1-mode-state-machine>)
  * [Operators, Motions, and Objects](</zed-industries/zed/10.2-operators-motions-and-objects>)
  * [Visual Mode](</zed-industries/zed/10.3-visual-mode>)
  * [Helix Mode Integration](</zed-industries/zed/10.4-helix-mode-integration>)
  * [AI Agent System](</zed-industries/zed/11-ai-agent-system>)
  * [Agent Communication Protocol (ACP)](</zed-industries/zed/11.1-agent-communication-protocol-\(acp\)>)
  * [Agent UI and Thread Management](</zed-industries/zed/11.2-agent-ui-and-thread-management>)
  * [Agent Connection and Implementations](</zed-industries/zed/11.3-agent-connection-and-implementations>)
  * [Tool System](</zed-industries/zed/11.4-tool-system>)
  * [Mention System and Context](</zed-industries/zed/11.5-mention-system-and-context>)
  * [Legacy Agent Thread System](</zed-industries/zed/11.6-legacy-agent-thread-system>)
  * [Remote Development and Collaboration](</zed-industries/zed/12-remote-development-and-collaboration>)
  * [Local vs Remote Architecture](</zed-industries/zed/12.1-local-vs-remote-architecture>)
  * [Remote Project Architecture](</zed-industries/zed/12.2-remote-project-architecture>)
  * [Collaboration Features](</zed-industries/zed/12.3-collaboration-features>)
  * [CRDT and Synchronization](</zed-industries/zed/12.4-crdt-and-synchronization>)


Menu

# Collaboration Features

Relevant source files

  * [crates/editor/src/items.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/items.rs>)
  * [crates/language/src/proto.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/proto.rs>)
  * [crates/project/src/search.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/project/src/search.rs>)
  * [crates/proto/proto/buffer.proto](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/proto/proto/buffer.proto>)
  * [crates/search/src/buffer_search.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/search/src/buffer_search.rs>)
  * [crates/search/src/project_search.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/search/src/project_search.rs>)
  * [crates/vim/src/normal/search.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/vim/src/normal/search.rs>)
  * [crates/workspace/src/item.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/item.rs>)
  * [crates/workspace/src/pane.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/pane.rs>)
  * [crates/workspace/src/searchable.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/searchable.rs>)
  * [crates/workspace/src/workspace.rs](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/workspace.rs>)


This page documents Zed's real-time collaboration features that enable multiple users to work together on the same codebase. These features include following other collaborators, viewing shared cursors and selections, and synchronizing editor state in real-time.

For information about the local vs remote architectural split, see [Local vs Remote Architecture](</zed-industries/zed/12.1-local-vs-remote-architecture>). For details on the CRDT-based text synchronization, see [CRDT and Synchronization](</zed-industries/zed/12.4-crdt-and-synchronization>).

## Overview

Zed's collaboration features enable users to:

  * Follow other collaborators to see what they're viewing and editing
  * View shared cursors and selections from all active collaborators
  * Automatically synchronize editor state (scroll position, selections, excerpts) in real-time
  * Toggle between following and independent navigation
  * Support both peer-to-peer collaboration and AI agent collaboration


The collaboration system is built on top of the remote architecture and uses protocol buffers for state serialization.

Sources: [crates/workspace/src/workspace.rs938-954](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/workspace.rs#L938-L954>) [crates/workspace/src/item.rs37-207](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/item.rs#L37-L207>)

## Collaborator Identification

### CollaboratorId Enum

The `CollaboratorId` enum distinguishes between human collaborators and AI agents:


This enum is used throughout the collaboration system to identify who is performing actions or being followed.

**Sources:** [crates/workspace/src/workspace.rs938-954](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/workspace.rs#L938-L954>)

### Follower Structure

The `Follower` struct tracks following relationships:


This structure is used internally to maintain the list of users following a particular leader.

**Sources:** [crates/workspace/src/workspace.rs956-960](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/workspace.rs#L956-L960>)

## Collaboration Architecture


**Sources:** [crates/workspace/src/workspace.rs764-818](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/workspace.rs#L764-L818>) [crates/workspace/src/item.rs165-348](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/item.rs#L165-L348>) [crates/editor/src/items.rs64-382](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/items.rs#L64-L382>)

## FollowableItem Trait

The `FollowableItem` trait defines the interface for items that can be followed in a collaboration session. Items implementing this trait can broadcast their state to followers and receive state updates from leaders.

### Core Methods

Method| Purpose| Line Reference  
---|---|---  
`remote_id()`| Returns the view ID for network identification| [item.rs65-67](<https://github.com/zed-industries/zed/blob/4109c9dd/item.rs#L65-L67>)  
`set_leader_id()`| Sets who this item is following| [item.rs179-201](<https://github.com/zed-industries/zed/blob/4109c9dd/item.rs#L179-L201>)  
`to_state_proto()`| Serializes complete item state| [item.rs203-247](<https://github.com/zed-industries/zed/blob/4109c9dd/item.rs#L203-L247>)  
`to_follow_event()`| Converts item events to follow events| [item.rs249-262](<https://github.com/zed-industries/zed/blob/4109c9dd/item.rs#L249-L262>)  
`add_event_to_update_proto()`| Adds incremental updates to proto| [item.rs264-330](<https://github.com/zed-industries/zed/blob/4109c9dd/item.rs#L264-L330>)  
`apply_update_proto()`| Applies updates from leader| [item.rs332-344](<https://github.com/zed-industries/zed/blob/4109c9dd/item.rs#L332-L344>)  
`update_agent_location()`| Updates for AI agent location| [item.rs360-381](<https://github.com/zed-industries/zed/blob/4109c9dd/item.rs#L360-L381>)  
  
**Sources:** [crates/workspace/src/item.rs165-348](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/item.rs#L165-L348>)

### Leader Update Throttling

Collaboration updates are throttled to prevent overwhelming the network:


This constant defines the minimum interval between broadcasting state updates to followers.

**Sources:** [crates/workspace/src/item.rs37](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/item.rs#L37-L37>)

## Following System

### Following Workflow


**Sources:** [crates/workspace/src/workspace.rs2286-2518](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/workspace.rs#L2286-L2518>) [crates/editor/src/items.rs179-201](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/items.rs#L179-L201>) [crates/editor/src/items.rs384-498](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/items.rs#L384-L498>)

### Following Actions

Zed provides several actions for controlling follow behavior:

Action| Behavior| Implementation  
---|---|---  
`FollowNextCollaborator`| Cycles through collaborators in the project| [workspace.rs223](<https://github.com/zed-industries/zed/blob/4109c9dd/workspace.rs#L223-L223>)  
`Unfollow`| Stops following the current leader| [workspace.rs281](<https://github.com/zed-industries/zed/blob/4109c9dd/workspace.rs#L281-L281>)  
  
**Sources:** [crates/workspace/src/workspace.rs195-287](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/workspace.rs#L195-L287>)

### Workspace Following Methods

The `Workspace` provides methods to manage following state:

#### toggle_follow


Toggles following state for a specific peer. If already following that peer, unfollows; otherwise, starts following.

**Sources:** [crates/workspace/src/workspace.rs2286-2305](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/workspace.rs#L2286-L2305>)

#### follow


Initiates following a collaborator. This method:

  1. Retrieves the leader's active view from the project
  2. Deserializes the view state using `FollowableViewRegistry`
  3. Opens or activates the corresponding item in the workspace
  4. Sets the leader ID on the item


**Sources:** [crates/workspace/src/workspace.rs2307-2409](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/workspace.rs#L2307-L2409>)

#### unfollow


Stops following the current leader. Returns the peer ID that was being followed.

**Sources:** [crates/workspace/src/workspace.rs2411-2449](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/workspace.rs#L2411-L2449>)

#### follow_next_collaborator


Cycles through available collaborators, following the next one in the list.

**Sources:** [crates/workspace/src/workspace.rs2451-2518](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/workspace.rs#L2451-L2518>)

### FollowableViewRegistry

The `FollowableViewRegistry` maps view types to their serialization/deserialization logic:


**Sources:** [crates/workspace/src/workspace.rs764-818](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/workspace.rs#L764-L818>)

## Shared Cursors and Selections

### Selection State Management

When following a collaborator, the follower's editor displays the leader's selections and hides its own:


**Sources:** [crates/editor/src/items.rs179-201](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/items.rs#L179-L201>)

### Selection Serialization

Selections are serialized to protocol buffers for network transmission:


**Sources:** [crates/language/src/proto.rs166-185](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/proto.rs#L166-L185>) [crates/language/src/proto.rs516-566](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/proto.rs#L516-L566>) [crates/editor/src/items.rs516-526](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/items.rs#L516-L526>)

### Cursor Shape Synchronization

Different cursor shapes are synchronized across collaborators:


Cursor shapes are serialized to the protocol buffer enum:


**Sources:** [crates/language/src/proto.rs187-205](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/language/src/proto.rs#L187-L205>) [crates/proto/proto/buffer.proto219-224](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/proto/proto/buffer.proto#L219-L224>)

## State Synchronization Protocol

### Complete State Serialization

When a follower first joins, the leader's complete editor state is serialized:


**Sources:** [crates/editor/src/items.rs203-247](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/items.rs#L203-L247>)

### Incremental Updates

After initial synchronization, incremental updates are sent efficiently:


**Sources:** [crates/editor/src/items.rs264-330](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/items.rs#L264-L330>)

### Applying Updates

When a follower receives an update, it applies changes to its editor state:


This function:

  1. Opens any new buffers referenced in inserted excerpts
  2. Updates the multibuffer by inserting/removing excerpts
  3. Deserializes selections and scroll anchor
  4. Waits for buffer operations to complete (using `wait_for_anchors`)
  5. Updates editor selections and scroll position


**Sources:** [crates/editor/src/items.rs384-498](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/items.rs#L384-L498>)

### Follow Events

The `to_follow_event` method determines when local actions should break following:


Key behaviors:

  * Any local edit unfollows immediately
  * Local selection or scroll changes unfollow
  * Remote changes (from the leader) do not unfollow


**Sources:** [crates/editor/src/items.rs249-262](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/items.rs#L249-L262>)

## Protocol Buffer Definitions

### Selection Message


### UpdateSelections Operation


### Editor View State


**Sources:** [crates/proto/proto/buffer.proto207-212](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/proto/proto/buffer.proto#L207-L212>) [crates/proto/proto/buffer.proto164-170](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/proto/proto/buffer.proto#L164-L170>) [crates/proto/proto/view.proto20-40](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/proto/proto/view.proto#L20-L40>) (inferred)

## AI Agent Collaboration

The collaboration system also supports AI agents as collaborators. The `CollaboratorId::Agent` variant identifies agent actions.

### Agent Location Updates

The `update_agent_location` method updates the editor to display where an AI agent is working:


This creates a point selection at the agent's location and scrolls to make it visible.

**Sources:** [crates/editor/src/items.rs360-381](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/items.rs#L360-L381>)

## Performance Considerations

### Update Throttling

Leader updates are throttled to 200ms to prevent network congestion:


This ensures that rapid typing or scrolling doesn't flood the network with updates.

**Sources:** [crates/workspace/src/item.rs37](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/item.rs#L37-L37>)

### Incremental Updates vs Full State

The system uses two modes of synchronization:

  * **Full state** (`to_state_proto`): Sent when a follower first joins
  * **Incremental updates** (`add_event_to_update_proto`): Sent for ongoing changes


This approach minimizes bandwidth while ensuring followers can join at any time.

**Sources:** [crates/editor/src/items.rs203-247](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/items.rs#L203-L247>) [crates/editor/src/items.rs264-330](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/items.rs#L264-L330>)

### Anchor Waiting

Before applying updates, the system waits for all referenced anchors to be valid:


This ensures CRDT operations have completed before applying UI updates.

**Sources:** [crates/editor/src/items.rs469-480](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/items.rs#L469-L480>)

## Summary

Zed's collaboration features provide seamless real-time editing experiences through:

Component| Responsibility  
---|---  
`FollowableItem` trait| Defines serialization/deserialization interface  
`FollowableViewRegistry`| Maps view types to collaboration handlers  
`CollaboratorId`| Identifies peers and agents  
Leader/follower state| Manages who is following whom  
Selection serialization| Transmits cursor positions and selections  
Incremental updates| Efficiently synchronizes state changes  
Protocol buffers| Defines wire format for state transmission  
  
These components work together to enable multiple users (and AI agents) to collaborate on the same codebase with minimal latency and network overhead.

**Sources:** [crates/workspace/src/workspace.rs764-818](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/workspace.rs#L764-L818>) [crates/workspace/src/workspace.rs2286-2518](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/workspace.rs#L2286-L2518>) [crates/workspace/src/item.rs165-348](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/workspace/src/item.rs#L165-L348>) [crates/editor/src/items.rs64-498](<https://github.com/zed-industries/zed/blob/4109c9dd/crates/editor/src/items.rs#L64-L498>)

Dismiss

Refresh this wiki

This wiki was recently refreshed. Please wait 7 days to refresh again.

### On this page

  * [Collaboration Features](<#collaboration-features>)
  * [Overview](<#overview>)
  * [Collaborator Identification](<#collaborator-identification>)
  * [CollaboratorId Enum](<#collaboratorid-enum>)
  * [Follower Structure](<#follower-structure>)
  * [Collaboration Architecture](<#collaboration-architecture>)
  * [FollowableItem Trait](<#followableitem-trait>)
  * [Core Methods](<#core-methods>)
  * [Leader Update Throttling](<#leader-update-throttling>)
  * [Following System](<#following-system>)
  * [Following Workflow](<#following-workflow>)
  * [Following Actions](<#following-actions>)
  * [Workspace Following Methods](<#workspace-following-methods>)
  * [toggle_follow](<#toggle_follow>)
  * [follow](<#follow>)
  * [unfollow](<#unfollow>)
  * [follow_next_collaborator](<#follow_next_collaborator>)
  * [FollowableViewRegistry](<#followableviewregistry>)
  * [Shared Cursors and Selections](<#shared-cursors-and-selections>)
  * [Selection State Management](<#selection-state-management>)
  * [Selection Serialization](<#selection-serialization>)
  * [Cursor Shape Synchronization](<#cursor-shape-synchronization>)
  * [State Synchronization Protocol](<#state-synchronization-protocol>)
  * [Complete State Serialization](<#complete-state-serialization>)
  * [Incremental Updates](<#incremental-updates>)
  * [Applying Updates](<#applying-updates>)
  * [Follow Events](<#follow-events>)
  * [Protocol Buffer Definitions](<#protocol-buffer-definitions>)
  * [Selection Message](<#selection-message>)
  * [UpdateSelections Operation](<#updateselections-operation>)
  * [Editor View State](<#editor-view-state>)
  * [AI Agent Collaboration](<#ai-agent-collaboration>)
  * [Agent Location Updates](<#agent-location-updates>)
  * [Performance Considerations](<#performance-considerations>)
  * [Update Throttling](<#update-throttling>)
  * [Incremental Updates vs Full State](<#incremental-updates-vs-full-state>)
  * [Anchor Waiting](<#anchor-waiting>)
  * [Summary](<#summary>)
